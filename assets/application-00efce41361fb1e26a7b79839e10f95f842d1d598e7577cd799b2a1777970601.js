function showAjaxSpinner(t){var e=t.parent().find(".ajax-spinner");t.hide(),e.addClass("visible"),e.hasClass("match-width")&&e.css("width",t.css("width"))}function hideAjaxSpinner(t){var e=t.parent().find(".ajax-spinner");t.show(),e.removeClass("visible")}function assert(t,e){if(!t)throw e||"Assertion failed"}function pXcycle(t,e){var n=t[0],i=t[1],a=t[2],o=t[3];i=ii(i=ii(i=ii(i=ii(i=hh(i=hh(i=hh(i=hh(i=gg(i=gg(i=gg(i=gg(i=ff(i=ff(i=ff(i=ff(i,a=ff(a,o=ff(o,n=ff(n,i,a,o,e[0],7,-680876936),i,a,e[1],12,-389564586),n,i,e[2],17,606105819),o,n,e[3],22,-1044525330),a=ff(a,o=ff(o,n=ff(n,i,a,o,e[4],7,-176418897),i,a,e[5],12,1200080426),n,i,e[6],17,-1473231341),o,n,e[7],22,-45705983),a=ff(a,o=ff(o,n=ff(n,i,a,o,e[8],7,1770035416),i,a,e[9],12,-1958414417),n,i,e[10],17,-42063),o,n,e[11],22,-1990404162),a=ff(a,o=ff(o,n=ff(n,i,a,o,e[12],7,1804603682),i,a,e[13],12,-40341101),n,i,e[14],17,-1502002290),o,n,e[15],22,1236535329),a=gg(a,o=gg(o,n=gg(n,i,a,o,e[1],5,-165796510),i,a,e[6],9,-1069501632),n,i,e[11],14,643717713),o,n,e[0],20,-373897302),a=gg(a,o=gg(o,n=gg(n,i,a,o,e[5],5,-701558691),i,a,e[10],9,38016083),n,i,e[15],14,-660478335),o,n,e[4],20,-405537848),a=gg(a,o=gg(o,n=gg(n,i,a,o,e[9],5,568446438),i,a,e[14],9,-1019803690),n,i,e[3],14,-187363961),o,n,e[8],20,1163531501),a=gg(a,o=gg(o,n=gg(n,i,a,o,e[13],5,-1444681467),i,a,e[2],9,-51403784),n,i,e[7],14,1735328473),o,n,e[12],20,-1926607734),a=hh(a,o=hh(o,n=hh(n,i,a,o,e[5],4,-378558),i,a,e[8],11,-2022574463),n,i,e[11],16,1839030562),o,n,e[14],23,-35309556),a=hh(a,o=hh(o,n=hh(n,i,a,o,e[1],4,-1530992060),i,a,e[4],11,1272893353),n,i,e[7],16,-155497632),o,n,e[10],23,-1094730640),a=hh(a,o=hh(o,n=hh(n,i,a,o,e[13],4,681279174),i,a,e[0],11,-358537222),n,i,e[3],16,-722521979),o,n,e[6],23,76029189),a=hh(a,o=hh(o,n=hh(n,i,a,o,e[9],4,-640364487),i,a,e[12],11,-421815835),n,i,e[15],16,530742520),o,n,e[2],23,-995338651),a=ii(a,o=ii(o,n=ii(n,i,a,o,e[0],6,-198630844),i,a,e[7],10,1126891415),n,i,e[14],15,-1416354905),o,n,e[5],21,-57434055),a=ii(a,o=ii(o,n=ii(n,i,a,o,e[12],6,1700485571),i,a,e[3],10,-1894986606),n,i,e[10],15,-1051523),o,n,e[1],21,-2054922799),a=ii(a,o=ii(o,n=ii(n,i,a,o,e[8],6,1873313359),i,a,e[15],10,-30611744),n,i,e[6],15,-1560198380),o,n,e[13],21,1309151649),a=ii(a,o=ii(o,n=ii(n,i,a,o,e[4],6,-145523070),i,a,e[11],10,-1120210379),n,i,e[2],15,718787259),o,n,e[9],21,-343485551),t[0]=add32(n,t[0]),t[1]=add32(i,t[1]),t[2]=add32(a,t[2]),t[3]=add32(o,t[3])}function cmn(t,e,n,i,a,o){return e=add32(add32(e,t),add32(i,o)),add32(e<<a|e>>>32-a,n)}function ff(t,e,n,i,a,o,r){return cmn(e&n|~e&i,t,e,a,o,r)}function gg(t,e,n,i,a,o,r){return cmn(e&i|n&~i,t,e,a,o,r)}function hh(t,e,n,i,a,o,r){return cmn(e^n^i,t,e,a,o,r)}function ii(t,e,n,i,a,o,r){return cmn(n^(e|~i),t,e,a,o,r)}function pX1(t){txt="";var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)pXcycle(i,pXblk(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),55<e)for(pXcycle(i,a),e=0;e<16;e++)a[e]=0;return a[14]=8*n,pXcycle(i,a),i}function pXblk(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function rhex(t){for(var e="",n=0;n<4;n++)e+=hex_chr[t>>8*n+4&15]+hex_chr[t>>8*n&15];return e}function hex(t){for(var e=0;e<t.length;e++)t[e]=rhex(t[e]);return t.join("")}function pX(t){return hex(pX1(t))}function add32(t,e){return t+e&4294967295}function add32(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function isMobile(){return Math.min(window.screen.width,window.screen.height)<500}function notifyFreeWorksheets(t,e){if(t.attr("data-free-worksheets")){var n=parseInt(t.data("free-worksheets")),i=e-n,a=_isEnglish()?"left top":"right top";if(i<=0)return $.notify(_t("notifyjs.end_trial"),{position:a,className:"error",autoHideDelay:5e3}),!1;$.notify(_t("notifyjs.remaining","remaining",i),{position:a,className:"success",autoHideDelay:5e3}),t.data("free-worksheets",n+1)}return!0}function _g_k(t,e){return pX(atob(_g_k_)+t+e).substr(0,10)}function isTablet(){return"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints&&!window.MSStream||/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(m,t){function s(t){var e=t.length,n=at.type(t);return"function"!==n&&!at.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t))}function e(t,n,i){if(at.isFunction(n))return at.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return at.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(ft.test(n))return at.filter(n,t,i);n=at.filter(n,t)}return at.grep(t,function(t){return 0<=at.inArray(t,n)!==i})}function n(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function f(t){var n=xt[t]={};return at.each(t.match(bt)||[],function(t,e){n[e]=!0}),n}function a(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",o,!1),m.removeEventListener("load",o,!1)):(pt.detachEvent("onreadystatechange",o),m.detachEvent("onload",o))}function o(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(a(),at.ready())}function l(t,e,n){if(n===undefined&&1===t.nodeType){var i="data-"+e.replace(_t,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:kt.test(n)?at.parseJSON(n):n)}catch(a){}at.data(t,e,n)}else n=undefined}return n}function d(t){var e;for(e in t)if(("data"!==e||!at.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function i(t,e,n,i){if(at.acceptData(t)){var a,o,r=at.expando,s=t.nodeType,l=s?at.cache:t,d=s?t[r]:t[r]&&r;if(d&&l[d]&&(i||l[d].data)||n!==undefined||"string"!=typeof e)return d||(d=s?t[r]=X.pop()||at.guid++:r),l[d]||(l[d]=s?{}:{toJSON:at.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[d]=at.extend(l[d],e):l[d].data=at.extend(l[d].data,e)),o=l[d],i||(o.data||(o.data={}),o=o.data),n!==undefined&&(o[at.camelCase(e)]=n),"string"==typeof e?null==(a=o[e])&&(a=o[at.camelCase(e)]):a=o,a}}function r(t,e,n){if(at.acceptData(t)){var i,a,o=t.nodeType,r=o?at.cache:t,s=o?t[at.expando]:at.expando;if(r[s]){if(e&&(i=n?r[s]:r[s].data)){a=(e=at.isArray(e)?e.concat(at.map(e,at.camelCase)):e in i?[e]:(e=at.camelCase(e))in i?[e]:e.split(" ")).length;for(;a--;)delete i[e[a]];if(n?!d(i):!at.isEmptyObject(i))return}(n||(delete r[s].data,d(r[s])))&&(o?at.cleanData([t],!0):nt.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}function c(){return!0}function u(){return!1}function h(){try{return pt.activeElement}catch(t){}}function g(t){var e=Pt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function v(t,e){var n,i,a=0,o=typeof t.getElementsByTagName!==$t?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==$t?t.querySelectorAll(e||"*"):undefined;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[a]);a++)!e||at.nodeName(i,e)?o.push(i):at.merge(o,v(i,e));return e===undefined||e&&at.nodeName(t,e)?at.merge([t],o):o}function y(t){Mt.test(t.type)&&(t.defaultChecked=t.checked)}function p(t,e){return at.nodeName(t,"table")&&at.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==at.find.attr(t,"type"))+"/"+t.type,t}function x(t){var e=Ut.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var n,i=0;null!=(n=t[i]);i++)at._data(n,"globalEval",!e||at._data(e[i],"globalEval"))}function $(t,e){if(1===e.nodeType&&at.hasData(t)){var n,i,a,o=at._data(t),r=at._data(e,o),s=o.events;if(s)for(n in delete r.handle,r.events={},s)for(i=0,a=s[n].length;i<a;i++)at.event.add(e,n,s[n][i]);r.data&&(r.data=at.extend({},r.data))}}function k(t,e){var n,i,a;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!nt.noCloneEvent&&e[at.expando]){for(i in(a=at._data(e)).events)at.removeEvent(e,i,a.handle);e.removeAttribute(at.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,x(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),nt.html5Clone&&t.innerHTML&&!at.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Mt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function _(t,e){var n,i=at(e.createElement(t)).appendTo(e.body),a=m.getDefaultComputedStyle&&(n=m.getDefaultComputedStyle(i[0]))?n.display:at.css(i[0],"display");return i.detach(),a}function S(t){var e=pt,n=Zt[t];return n||("none"!==(n=_(t,e))&&n||((e=((Gt=(Gt||at("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||Gt[0].contentDocument).document).write(),e.close(),n=_(t,e),Gt.detach()),Zt[t]=n),n}function T(e,n){return{get:function(){var t=e();if(null!=t){if(!t)return(this.get=n).apply(this,arguments);delete this.get}}}}function C(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,a=ue.length;a--;)if((e=ue[a]+n)in t)return e;return i}function A(t,e){for(var n,i,a,o=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(o[r]=at._data(i,"olddisplay"),n=i.style.display,e?(o[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Ct(i)&&(o[r]=at._data(i,"olddisplay",S(i.nodeName)))):(a=Ct(i),(n&&"none"!==n||!a)&&at._data(i,"olddisplay",a?n:at.css(i,"display"))));for(r=0;r<s;r++)(i=t[r]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[r]||"":"none"));return t}function M(t,e,n){var i=se.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function j(t,e,n,i,a){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,r=0;o<4;o+=2)"margin"===n&&(r+=at.css(t,n+Tt[o],!0,a)),i?("content"===n&&(r-=at.css(t,"padding"+Tt[o],!0,a)),"margin"!==n&&(r-=at.css(t,"border"+Tt[o]+"Width",!0,a))):(r+=at.css(t,"padding"+Tt[o],!0,a),"padding"!==n&&(r+=at.css(t,"border"+Tt[o]+"Width",!0,a)));return r}function E(t,e,n){var i=!0,a="width"===e?t.offsetWidth:t.offsetHeight,o=Kt(t),r=nt.boxSizing&&"border-box"===at.css(t,"boxSizing",!1,o);if(a<=0||null==a){if(((a=te(t,e,o))<0||null==a)&&(a=t.style[e]),ne.test(a))return a;i=r&&(nt.boxSizingReliable()||a===t.style[e]),a=parseFloat(a)||0}return a+j(t,e,n||(r?"border":"content"),i,o)+"px"}function D(t,e,n,i,a){return new D.prototype.init(t,e,n,i,a)}function N(){return setTimeout(function(){fe=undefined}),fe=at.now()}function O(t,e){var n,i={height:t},a=0;for(e=e?1:0;a<4;a+=2-e)i["margin"+(n=Tt[a])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function P(t,e,n){for(var i,a=(ke[e]||[]).concat(ke["*"]),o=0,r=a.length;o<r;o++)if(i=a[o].call(n,e,t))return i}function F(e,t,n){var i,a,o,r,s,l,d,c=this,u={},f=e.style,h=e.nodeType&&Ct(e),p=at._data(e,"fxshow");for(i in n.queue||(null==(s=at._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,at.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(d=at.css(e,"display"))?at._data(e,"olddisplay")||S(e.nodeName):d)&&"none"===at.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",nt.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),t)if(a=t[i],be.exec(a)){if(delete t[i],o=o||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!p||p[i]===undefined)continue;h=!0}u[i]=p&&p[i]||at.style(e,i)}else d=undefined;if(at.isEmptyObject(u))"inline"===("none"===d?S(e.nodeName):d)&&(f.display=d);else for(i in p?"hidden"in p&&(h=p.hidden):p=at._data(e,"fxshow",{}),o&&(p.hidden=!h),h?at(e).show():c.done(function(){at(e).hide()}),c.done(function(){var t;for(t in at._removeData(e,"fxshow"),u)at.style(e,t,u[t])}),u)r=P(h?p[i]:0,i,c),i in p||(p[i]=r.start,h&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}function L(t,e){var n,i,a,o,r;for(n in t)if(a=e[i=at.camelCase(n)],o=t[n],at.isArray(o)&&(a=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(r=at.cssHooks[i])&&"expand"in r)for(n in o=r.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=a);else e[i]=a}function I(o,t,e){var n,r,i=0,a=$e.length,s=at.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=fe||N(),e=Math.max(0,d.startTime+d.duration-t),n=1-(e/d.duration||0),i=0,a=d.tweens.length;i<a;i++)d.tweens[i].run(n);return s.notifyWith(o,[d,n,e]),n<1&&a?e:(s.resolveWith(o,[d]),!1)},d=s.promise({elem:o,props:at.extend({},t),opts:at.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:fe||N(),duration:e.duration,tweens:[],createTween:function(t,e){var n=at.Tween(o,d.opts,t,e,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var e=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;e<n;e++)d.tweens[e].run(1);return t?s.resolveWith(o,[d,t]):s.rejectWith(o,[d,t]),this}}),c=d.props;for(L(c,d.opts.specialEasing);i<a;i++)if(n=$e[i].call(d,o,c,d.opts))return n;return at.map(c,P,d),at.isFunction(d.opts.start)&&d.opts.start.call(o,d),at.fx.timer(at.extend(l,{elem:o,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function R(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,a=t.toLowerCase().match(bt)||[];if(at.isFunction(e))for(;n=a[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function H(e,a,o,r){function s(t){var i;return l[t]=!0,at.each(e[t]||[],function(t,e){var n=e(a,o,r);return"string"!=typeof n||d||l[n]?d?!(i=n):void 0:(a.dataTypes.unshift(n),s(n),!1)}),i}var l={},d=e===Je;return s(a.dataTypes[0])||!l["*"]&&s("*")}function z(t,e){var n,i,a=at.ajaxSettings.flatOptions||{};for(i in e)e[i]!==undefined&&((a[i]?t:n||(n={}))[i]=e[i]);return n&&at.extend(!0,t,n),t}function B(t,e,n){for(var i,a,o,r,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),a===undefined&&(a=t.mimeType||e.getResponseHeader("Content-Type"));if(a)for(r in s)if(s[r]&&s[r].test(a)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}i||(i=r)}o=o||i}if(o)return o!==l[0]&&l.unshift(o),n[o]}function W(t,e,n,i){var a,o,r,s,l,d={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)d[r.toLowerCase()]=t.converters[r];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=d[l+" "+o]||d["* "+o]))for(a in d)if((s=a.split(" "))[1]===o&&(r=d[l+" "+s[0]]||d["* "+s[0]])){!0===r?r=d[a]:!0!==d[a]&&(o=s[0],c.unshift(s[1]));break}if(!0!==r)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function V(n,t,i,a){var e;if(at.isArray(t))at.each(t,function(t,e){i||Ge.test(n)?a(n,e):V(n+"["+("object"==typeof e?t:"")+"]",e,i,a)});else if(i||"object"!==at.type(t))a(n,t);else for(e in t)V(n+"["+e+"]",t[e],i,a)}function q(){try{return new m.XMLHttpRequest}catch(t){}}function U(){try{return new m.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function J(t){return at.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var X=[],Y=X.slice,G=X.concat,Q=X.push,Z=X.indexOf,K={},tt=K.toString,et=K.hasOwnProperty,nt={},it="1.11.1",at=function(t,e){return new at.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,st=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};at.fn=at.prototype={jquery:it,constructor:at,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=at.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return at.each(this,t,e)},map:function(n){return this.pushStack(at.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:X.sort,splice:X.splice},at.extend=at.fn.extend=function(t){var e,n,i,a,o,r,s=t||{},l=1,d=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==typeof s||at.isFunction(s)||(s={}),l===d&&(s=this,l--);l<d;l++)if(null!=(o=arguments[l]))for(a in o)e=s[a],s!==(i=o[a])&&(c&&i&&(at.isPlainObject(i)||(n=at.isArray(i)))?(n?(n=!1,r=e&&at.isArray(e)?e:[]):r=e&&at.isPlainObject(e)?e:{},s[a]=at.extend(c,r,i)):i!==undefined&&(s[a]=i));return s},at.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===at.type(t)},isArray:Array.isArray||function(t){return"array"===at.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!at.isArray(t)&&0<=t-parseFloat(t)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==at.type(t)||t.nodeType||at.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(e in t)return et.call(t,e);for(e in t);return e===undefined||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[tt.call(t)]||"object":typeof t},globalEval:function(t){t&&at.trim(t)&&(m.execScript||function(t){m.eval.call(m,t)})(t)},camelCase:function(t){return t.replace(rt,"ms-").replace(st,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,a=t.length,o=s(t);if(n){if(o)for(;i<a&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(o)for(;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?at.merge(n,"string"==typeof t?[t]:t):Q.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(Z)return Z.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,a=t.length;i<n;)t[a++]=e[i++];if(n!=n)for(;e[i]!==undefined;)t[a++]=e[i++];return t.length=a,t},grep:function(t,e,n){for(var i=[],a=0,o=t.length,r=!n;a<o;a++)!e(t[a],a)!==r&&i.push(t[a]);return i},map:function(t,e,n){var i,a=0,o=t.length,r=[];if(s(t))for(;a<o;a++)null!=(i=e(t[a],a,n))&&r.push(i);else for(a in t)null!=(i=e(t[a],a,n))&&r.push(i);return G.apply([],r)},guid:1,proxy:function(t,e){var n,i,a;return"string"==typeof e&&(a=t[e],e=t,t=a),at.isFunction(t)?(n=Y.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(Y.call(arguments)))}).guid=t.guid=t.guid||at.guid++,i):undefined},now:function(){return+new Date},support:nt}),at.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()});var dt=function(n){function x(t,e,n,i){var a,o,r,s,l,d,c,u,f,h;if((e?e.ownerDocument||e:H)!==D&&E(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=(e=e||D).nodeType)&&9!==s)return[];if(O&&!i){if(a=yt.exec(t))if(r=a[1]){if(9===s){if(!(o=e.getElementById(r))||!o.parentNode)return n;if(o.id===r)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&I(e,o)&&o.id===r)return n.push(o),n}else{if(a[2])return K.apply(n,e.getElementsByTagName(t)),n;if((r=a[3])&&v.getElementsByClassName&&e.getElementsByClassName)return K.apply(n,e.getElementsByClassName(r)),n}if(v.qsa&&(!P||!P.test(t))){if(u=c=R,f=e,h=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(d=S(t),(c=e.getAttribute("id"))?u=c.replace(xt,"\\$&"):e.setAttribute("id",u),u="[id='"+u+"'] ",l=d.length;l--;)d[l]=u+g(d[l]);f=bt.test(t)&&m(e.parentNode)||e,h=d.join(",")}if(h)try{return K.apply(n,f.querySelectorAll(h)),n}catch(p){}finally{c||e.removeAttribute("id")}}}return C(t.replace(lt,"$1"),e,n,i)}function t(){function n(t,e){return i.push(t+" ")>$.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function l(t){return t[R]=!0,t}function i(t){var e=D.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function e(t,e){for(var n=t.split("|"),i=t.length;i--;)$.attrHandle[n[i]]=e}function d(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function o(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function r(r){return l(function(o){return o=+o,l(function(t,e){for(var n,i=r([],t.length,o),a=i.length;a--;)t[n=i[a]]&&(t[n]=!(e[n]=t[n]))})})}function m(t){return t&&typeof t.getElementsByTagName!==J&&t}function s(){}function g(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function u(r,t,e){var s=t.dir,l=e&&"parentNode"===s,d=B++;return t.first?function(t,e,n){for(;t=t[s];)if(1===t.nodeType||l)return r(t,e,n)}:function(t,e,n){var i,a,o=[z,d];if(n){for(;t=t[s];)if((1===t.nodeType||l)&&r(t,e,n))return!0}else for(;t=t[s];)if(1===t.nodeType||l){if((i=(a=t[R]||(t[R]={}))[s])&&i[0]===z&&i[1]===d)return o[2]=i[2];if((a[s]=o)[2]=r(t,e,n))return!0}}}function f(a){return 1<a.length?function(t,e,n){for(var i=a.length;i--;)if(!a[i](t,e,n))return!1;return!0}:a[0]}function y(t,e,n){for(var i=0,a=e.length;i<a;i++)x(t,e[i],n);return n}function w(t,e,n,i,a){for(var o,r=[],s=0,l=t.length,d=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,a)||(r.push(o),d&&e.push(s)));return r}function b(h,p,m,g,v,t){return g&&!g[R]&&(g=b(g)),v&&!v[R]&&(v=b(v,t)),l(function(t,e,n,i){var a,o,r,s=[],l=[],d=e.length,c=t||y(p||"*",n.nodeType?[n]:n,[]),u=!h||!t&&p?c:w(c,s,h,n,i),f=m?v||(t?h:d||g)?[]:e:u;if(m&&m(u,f,n,i),g)for(a=w(f,l),g(a,[],n,i),o=a.length;o--;)(r=a[o])&&(f[l[o]]=!(u[l[o]]=r));if(t){if(v||h){if(v){for(a=[],o=f.length;o--;)(r=f[o])&&a.push(u[o]=r);v(null,f=[],a,i)}for(o=f.length;o--;)(r=f[o])&&-1<(a=v?et.call(t,r):s[o])&&(t[a]=!(e[a]=r))}}else f=w(f===e?f.splice(d,f.length):f),v?v(null,e,f,i):K.apply(e,f)})}function h(t){for(var i,e,n,a=t.length,o=$.relative[t[0].type],r=o||$.relative[" "],s=o?1:0,l=u(function(t){return t===i},r,!0),d=u(function(t){return-1<et.call(i,t)},r,!0),c=[function(t,e,n){return!o&&(n||e!==A)||((i=e).nodeType?l(t,e,n):d(t,e,n))}];s<a;s++)if(e=$.relative[t[s].type])c=[u(f(c),e)];else{if((e=$.filter[t[s].type].apply(null,t[s].matches))[R]){for(n=++s;n<a&&!$.relative[t[n].type];n++);return b(1<s&&f(c),1<s&&g(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(lt,"$1"),e,s<n&&h(t.slice(s,n)),n<a&&h(t=t.slice(n)),n<a&&g(t))}c.push(e)}return f(c)}function c(g,v){var y=0<v.length,b=0<g.length,t=function(t,e,n,i,a){var o,r,s,l=0,d="0",c=t&&[],u=[],f=A,h=t||b&&$.find.TAG("*",a),p=z+=null==f?1:Math.random()||.1,m=h.length;for(a&&(A=e!==D&&e);d!==m&&null!=(o=h[d]);d++){if(b&&o){for(r=0;s=g[r++];)if(s(o,e,n)){i.push(o);break}a&&(z=p)}y&&((o=!s&&o)&&l--,t&&c.push(o))}if(l+=d,y&&d!==l){for(r=0;s=v[r++];)s(c,u,e,n);if(t){if(0<l)for(;d--;)c[d]||u[d]||(u[d]=Q.call(i));u=w(u)}K.apply(i,u),a&&!t&&0<u.length&&1<l+v.length&&x.uniqueSort(i)}return a&&(z=p,A=f),c};return y?l(t):t}var p,v,$,k,_,S,T,C,A,M,j,E,D,N,O,P,F,L,I,R="sizzle"+-new Date,H=n.document,z=0,B=0,W=t(),V=t(),q=t(),U=function(t,e){return t===e&&(j=!0),0},J=typeof undefined,X=1<<31,Y={}.hasOwnProperty,G=[],Q=G.pop,Z=G.push,K=G.push,tt=G.slice,et=G.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=at.replace("w","w#"),rt="\\["+it+"*("+at+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",st=":("+at+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),dt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ft=new RegExp(st),ht=new RegExp("^"+ot+"$"),pt={ID:new RegExp("^#("+at+")"),CLASS:new RegExp("^\\.("+at+")"),TAG:new RegExp("^("+at.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,xt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),$t=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{K.apply(G=tt.call(H.childNodes),H.childNodes),G[H.childNodes.length].nodeType}catch(kt){K={apply:G.length?function(t,e){Z.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(p in v=x.support={},_=x.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=x.setDocument=function(t){var e,l=t?t.ownerDocument||t:H,n=l.defaultView;return l!==D&&9===l.nodeType&&l.documentElement?(N=(D=l).documentElement,O=!_(l),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){E()},!1):n.attachEvent&&n.attachEvent("onunload",function(){E()})),v.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),v.getElementsByTagName=i(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),v.getElementsByClassName=vt.test(l.getElementsByClassName)&&i(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),v.getById=i(function(t){return N.appendChild(t).id=R,!l.getElementsByName||!l.getElementsByName(R).length}),v.getById?($.find.ID=function(t,e){if(typeof e.getElementById!==J&&O){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},$.filter.ID=function(t){var e=t.replace(wt,$t);return function(t){return t.getAttribute("id")===e}}):(delete $.find.ID,$.filter.ID=function(t){var n=t.replace(wt,$t);return function(t){var e=typeof t.getAttributeNode!==J&&t.getAttributeNode("id");return e&&e.value===n}}),$.find.TAG=v.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==J)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],a=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[a++];)1===n.nodeType&&i.push(n);return i},$.find.CLASS=v.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==J&&O)return e.getElementsByClassName(t)},F=[],P=[],(v.qsa=vt.test(l.querySelectorAll))&&(i(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&P.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+it+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),i(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(v.matchesSelector=vt.test(L=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&i(function(t){v.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),F.push("!=",st)}),P=P.length&&new RegExp(P.join("|")),F=F.length&&new RegExp(F.join("|")),e=vt.test(N.compareDocumentPosition),I=e||vt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return j=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument===H&&I(H,t)?-1:e===l||e.ownerDocument===H&&I(H,e)?1:M?et.call(M,t)-et.call(M,e):0:4&n?-1:1)}:function(t,e){if(t===e)return j=!0,0;var n,i=0,a=t.parentNode,o=e.parentNode,r=[t],s=[e];if(!a||!o)return t===l?-1:e===l?1:a?-1:o?1:M?et.call(M,t)-et.call(M,e):0;if(a===o)return d(t,e);for(n=t;n=n.parentNode;)r.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;r[i]===s[i];)i++;return i?d(r[i],s[i]):r[i]===H?-1:s[i]===H?1:0},l):D},x.matches=function(t,e){return x(t,null,null,e)},x.matchesSelector=function(t,e){if((t.ownerDocument||t)!==D&&E(t),e=e.replace(ut,"='$1']"),v.matchesSelector&&O&&(!F||!F.test(e))&&(!P||!P.test(e)))try{var n=L.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(kt){}return 0<x(e,D,null,[t]).length},x.contains=function(t,e){return(t.ownerDocument||t)!==D&&E(t),I(t,e)},x.attr=function(t,e){(t.ownerDocument||t)!==D&&E(t);var n=$.attrHandle[e.toLowerCase()],i=n&&Y.call($.attrHandle,e.toLowerCase())?n(t,e,!O):undefined;return i!==undefined?i:v.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},x.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},x.uniqueSort=function(t){var e,n=[],i=0,a=0;if(j=!v.detectDuplicates,M=!v.sortStable&&t.slice(0),t.sort(U),j){for(;e=t[a++];)e===t[a]&&(i=n.push(a));for(;i--;)t.splice(n[i],1)}return M=null,t},k=x.getText=function(t){var e,n="",i=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},($=x.selectors={cacheLength:50,createPseudo:l,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,$t),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,$t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||x.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&x.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ft.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,$t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==J&&t.getAttribute("class")||"")})},ATTR:function(n,i,a){return function(t){var e=x.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===a:"!="===i?e!==a:"^="===i?a&&0===e.indexOf(a):"*="===i?a&&-1<e.indexOf(a):"$="===i?a&&e.slice(-a.length)===a:"~="===i?-1<(" "+e+" ").indexOf(a):"|="===i&&(e===a||e.slice(0,a.length+1)===a+"-"))}},CHILD:function(h,t,e,p,m){var g="nth"!==h.slice(0,3),v="last"!==h.slice(-4),y="of-type"===t;return 1===p&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,a,o,r,s,l,d=g!==v?"nextSibling":"previousSibling",c=t.parentNode,
u=y&&t.nodeName.toLowerCase(),f=!n&&!y;if(c){if(g){for(;d;){for(o=t;o=o[d];)if(y?o.nodeName.toLowerCase()===u:1===o.nodeType)return!1;l=d="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&f){for(s=(i=(a=c[R]||(c[R]={}))[h]||[])[0]===z&&i[1],r=i[0]===z&&i[2],o=s&&c.childNodes[s];o=++s&&o&&o[d]||(r=s=0)||l.pop();)if(1===o.nodeType&&++r&&o===t){a[h]=[z,s,r];break}}else if(f&&(i=(t[R]||(t[R]={}))[h])&&i[0]===z)r=i[1];else for(;(o=++s&&o&&o[d]||(r=s=0)||l.pop())&&((y?o.nodeName.toLowerCase()!==u:1!==o.nodeType)||!++r||(f&&((o[R]||(o[R]={}))[h]=[z,r]),o!==t)););return(r-=m)===p||r%p==0&&0<=r/p}}},PSEUDO:function(t,o){var e,r=$.pseudos[t]||$.setFilters[t.toLowerCase()]||x.error("unsupported pseudo: "+t);return r[R]?r(o):1<r.length?(e=[t,t,"",o],$.setFilters.hasOwnProperty(t.toLowerCase())?l(function(t,e){for(var n,i=r(t,o),a=i.length;a--;)t[n=et.call(t,i[a])]=!(e[n]=i[a])}):function(t){return r(t,0,e)}):r}},pseudos:{not:l(function(t){var i=[],a=[],s=T(t.replace(lt,"$1"));return s[R]?l(function(t,e,n,i){for(var a,o=s(t,null,i,[]),r=t.length;r--;)(a=o[r])&&(t[r]=!(e[r]=a))}):function(t,e,n){return i[0]=t,s(i,null,n,a),!a.pop()}}),has:l(function(e){return function(t){return 0<x(e,t).length}}),contains:l(function(e){return function(t){return-1<(t.textContent||t.innerText||k(t)).indexOf(e)}}),lang:l(function(n){return ht.test(n||"")||x.error("unsupported lang: "+n),n=n.replace(wt,$t).toLowerCase(),function(t){var e;do{if(e=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===N},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!$.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:r(function(){return[0]}),last:r(function(t,e){return[e-1]}),eq:r(function(t,e,n){return[n<0?n+e:n]}),even:r(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:r(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:r(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:r(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=$.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[p]=a(p);for(p in{submit:!0,reset:!0})$.pseudos[p]=o(p);return s.prototype=$.filters=$.pseudos,$.setFilters=new s,S=x.tokenize=function(t,e){var n,i,a,o,r,s,l,d=V[t+" "];if(d)return e?0:d.slice(0);for(r=t,s=[],l=$.preFilter;r;){for(o in n&&!(i=dt.exec(r))||(i&&(r=r.slice(i[0].length)||r),s.push(a=[])),n=!1,(i=ct.exec(r))&&(n=i.shift(),a.push({value:n,type:i[0].replace(lt," ")}),r=r.slice(n.length)),$.filter)!(i=pt[o].exec(r))||l[o]&&!(i=l[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),r=r.slice(n.length));if(!n)break}return e?r.length:r?x.error(t):V(t,s).slice(0)},T=x.compile=function(t,e){var n,i=[],a=[],o=q[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)(o=h(e[n]))[R]?i.push(o):a.push(o);(o=q(t,c(a,i))).selector=t}return o},C=x.select=function(t,e,n,i){var a,o,r,s,l,d="function"==typeof t&&t,c=!i&&S(t=d.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(r=o[0]).type&&v.getById&&9===e.nodeType&&O&&$.relative[o[1].type]){if(!(e=($.find.ID(r.matches[0].replace(wt,$t),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(a=pt.needsContext.test(t)?0:o.length;a--&&(r=o[a],!$.relative[s=r.type]);)if((l=$.find[s])&&(i=l(r.matches[0].replace(wt,$t),bt.test(o[0].type)&&m(e.parentNode)||e))){if(o.splice(a,1),!(t=i.length&&g(o)))return K.apply(n,i),n;break}}return(d||T(t,c))(i,e,!O,n,bt.test(t)&&m(e.parentNode)||e),n},v.sortStable=R.split("").sort(U).join("")===R,v.detectDuplicates=!!j,E(),v.sortDetached=i(function(t){return 1&t.compareDocumentPosition(D.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||e("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),v.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||e("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||e(nt,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),x}(m);at.find=dt,at.expr=dt.selectors,at.expr[":"]=at.expr.pseudos,at.unique=dt.uniqueSort,at.text=dt.getText,at.isXMLDoc=dt.isXML,at.contains=dt.contains;var ct=at.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;at.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?at.find.matchesSelector(i,t)?[i]:[]:at.find.matches(t,at.grep(e,function(t){return 1===t.nodeType}))},at.fn.extend({find:function(t){var e,n=[],i=this,a=i.length;if("string"!=typeof t)return this.pushStack(at(t).filter(function(){for(e=0;e<a;e++)if(at.contains(i[e],this))return!0}));for(e=0;e<a;e++)at.find(t,i[e],n);return(n=this.pushStack(1<a?at.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&ct.test(t)?at(t):t||[],!1).length}});var ht,pt=m.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(at.fn.init=function(t,e){var n,i;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):at.isFunction(t)?"undefined"!=typeof ht.ready?ht.ready(t):t(at):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),at.makeArray(t,this));if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:mt.exec(t))||!n[1]&&e)return!e||e.jquery?(e||ht).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof at?e[0]:e,at.merge(this,at.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:pt,!0)),ut.test(n[1])&&at.isPlainObject(e))for(n in e)at.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((i=pt.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return ht.find(t);this.length=1,this[0]=i}return this.context=pt,this.selector=t,this}).prototype=at.fn,ht=at(pt);var gt=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};at.extend({dir:function(t,e,n){for(var i=[],a=t[e];a&&9!==a.nodeType&&(n===undefined||1!==a.nodeType||!at(a).is(n));)1===a.nodeType&&i.push(a),a=a[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),at.fn.extend({has:function(t){var e,n=at(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(at.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,a=this.length,o=[],r=ct.test(t)||"string"!=typeof t?at(t,e||this.context):0;i<a;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&at.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?at.unique(o):o)},index:function(t){return t?"string"==typeof t?at.inArray(this[0],at(t)):at.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(at.unique(at.merge(this.get(),at(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),at.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return at.dir(t,"parentNode")},parentsUntil:function(t,e,n){return at.dir(t,"parentNode",n)},next:function(t){return n(t,"nextSibling")},prev:function(t){return n(t,"previousSibling")},nextAll:function(t){return at.dir(t,"nextSibling")},prevAll:function(t){return at.dir(t,"previousSibling")},nextUntil:function(t,e,n){return at.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return at.dir(t,"previousSibling",n)},siblings:function(t){return at.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return at.sibling(t.firstChild)},contents:function(t){return at.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:at.merge([],t.childNodes)}},function(i,a){at.fn[i]=function(t,e){var n=at.map(this,a,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=at.filter(e,n)),1<this.length&&(vt[i]||(n=at.unique(n)),gt.test(i)&&(n=n.reverse())),this.pushStack(n)}});var yt,bt=/\S+/g,xt={};at.Callbacks=function(a){a="string"==typeof a?xt[a]||f(a):at.extend({},a);var o,e,n,r,i,s,l=[],d=!a.once&&[],c=function(t){for(e=a.memory&&t,n=!0,i=s||0,s=0,r=l.length,o=!0;l&&i<r;i++)if(!1===l[i].apply(t[0],t[1])&&a.stopOnFalse){e=!1;break}o=!1,l&&(d?d.length&&c(d.shift()):e?l=[]:u.disable())},u={add:function(){if(l){var t=l.length;!function i(t){at.each(t,function(t,e){var n=at.type(e);"function"===n?a.unique&&u.has(e)||l.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),o?r=l.length:e&&(s=t,c(e))}return this},remove:function(){return l&&at.each(arguments,function(t,e){for(var n;-1<(n=at.inArray(e,l,n));)l.splice(n,1),o&&(n<=r&&r--,n<=i&&i--)}),this},has:function(t){return t?-1<at.inArray(t,l):!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=d=e=undefined,this},disabled:function(){return!l},lock:function(){return d=undefined,e||u.disable(),this},locked:function(){return!d},fireWith:function(t,e){return!l||n&&!d||(e=[t,(e=e||[]).slice?e.slice():e],o?d.push(e):c(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},at.extend({Deferred:function(t){var o=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],a="pending",r={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var a=arguments;return at.Deferred(function(i){at.each(o,function(t,e){var n=at.isFunction(a[t])&&a[t];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&at.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[e[0]+"With"](this===r?i.promise():this,n?[t]:arguments)})}),a=null}).promise()},promise:function(t){return null!=t?at.extend(t,r):r}},s={};return r.pipe=r.then,at.each(o,function(t,e){var n=e[2],i=e[3];r[e[1]]=n.add,i&&n.add(function(){a=i},o[1^t][2].disable,o[2][2].lock),s[e[0]]=function(){return s[e[0]+"With"](this===s?r:this,arguments),this},s[e[0]+"With"]=n.fireWith}),r.promise(s),t&&t.call(s,s),s},when:function(t){var a,e,n,i=0,o=Y.call(arguments),r=o.length,s=1!==r||t&&at.isFunction(t.promise)?r:0,l=1===s?t:at.Deferred(),d=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?Y.call(arguments):t,i===a?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(1<r)for(a=new Array(r),e=new Array(r),n=new Array(r);i<r;i++)o[i]&&at.isFunction(o[i].promise)?o[i].promise().done(d(i,n,o)).fail(l.reject).progress(d(i,e,a)):--s;return s||l.resolveWith(n,o),l.promise()}}),at.fn.ready=function(t){return at.ready.promise().done(t),this},at.extend({isReady:!1,readyWait:1,holdReady:function(t){t?at.readyWait++:at.ready(!0)},ready:function(t){if(!0===t?!--at.readyWait:!at.isReady){if(!pt.body)return setTimeout(at.ready);(at.isReady=!0)!==t&&0<--at.readyWait||(yt.resolveWith(pt,[at]),at.fn.triggerHandler&&(at(pt).triggerHandler("ready"),at(pt).off("ready")))}}}),at.ready.promise=function(t){if(!yt)if(yt=at.Deferred(),"complete"===pt.readyState)setTimeout(at.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",o,!1),m.addEventListener("load",o,!1);else{pt.attachEvent("onreadystatechange",o),m.attachEvent("onload",o);var e=!1;try{e=null==m.frameElement&&pt.documentElement}catch(n){}e&&e.doScroll&&function i(){if(!at.isReady){try{e.doScroll("left")}catch(n){return setTimeout(i,50)}a(),at.ready()}}()}return yt.promise(t)};var wt,$t=typeof undefined;for(wt in at(nt))break;nt.ownLast="0"!==wt,nt.inlineBlockNeedsLayout=!1,at(function(){var t,e,n,i;(n=pt.getElementsByTagName("body")[0])&&n.style&&(e=pt.createElement("div"),(i=pt.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==$t&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=pt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(e){nt.deleteExpando=!1}}t=null}(),at.acceptData=function(t){var e=at.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;at.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?at.cache[t[at.expando]]:t[at.expando])&&!d(t)},data:function(t,e,n){return i(t,e,n)},removeData:function(t,e){return r(t,e)},_data:function(t,e,n){return i(t,e,n,!0)},_removeData:function(t,e){return r(t,e,!0)}}),at.fn.extend({data:function(t,e){var n,i,a,o=this[0],r=o&&o.attributes;if(t!==undefined)return"object"==typeof t?this.each(function(){at.data(this,t)}):1<arguments.length?this.each(function(){at.data(this,t,e)}):o?l(o,t,at.data(o,t)):undefined;if(this.length&&(a=at.data(o),1===o.nodeType&&!at._data(o,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&0===(i=r[n].name).indexOf("data-")&&l(o,i=at.camelCase(i.slice(5)),a[i]);at._data(o,"parsedAttrs",!0)}return a},removeData:function(t){return this.each(function(){at.removeData(this,t)})}}),at.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=at._data(t,e),n&&(!i||at.isArray(n)?i=at._data(t,e,at.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=at.queue(t,e),i=n.length,a=n.shift(),o=at._queueHooks(t,e),r=function(){at.dequeue(t,e)};"inprogress"===a&&(a=n.shift(),i--),a&&("fx"===e&&n.unshift("inprogress"),delete o.stop,a.call(t,r,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at._data(t,n)||at._data(t,n,{empty:at.Callbacks("once memory").add(function(){at._removeData(t,e+"queue"),at._removeData(t,n)})})}}),at.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?at.queue(this[0],e):n===undefined?this:this.each(function(){var t=at.queue(this,e,n);at._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&at.dequeue(this,e)})},dequeue:function(t){return this.each(function(){at.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,a=at.Deferred(),o=this,r=this.length,s=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";r--;)(n=at._data(o[r],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),a.promise(e)}});var St=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Ct=function(t,e){return t=e||t,"none"===at.css(t,"display")||!at.contains(t.ownerDocument,t)},At=at.access=function(t,e,n,i,a,o,r){var s=0,l=t.length,d=null==n;if("object"===at.type(n))for(s in a=!0,n)at.access(t,e,s,n[s],!0,o,r);else if(i!==undefined&&(a=!0,at.isFunction(i)||(r=!0),d&&(r?(e.call(t,i),e=null):(d=e,e=function(t,e,n){return d.call(at(t),n)})),e))for(;s<l;s++)e(t[s],n,r?i:i.call(t[s],s,e(t[s],n)));return a?t:d?e.call(t):l?e(t[0],n):o},Mt=/^(?:checkbox|radio)$/i;!function(){var t=pt.createElement("input"),e=pt.createElement("div"),n=pt.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===e.firstChild.nodeType,nt.tbody=!e.getElementsByTagName("tbody").length,nt.htmlSerialize=!!e.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),nt.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){nt.noCloneEvent=!1}),e.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,e,n=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(nt[t+"Bubbles"]=e in m)||(n.setAttribute(e,"t"),nt[t+"Bubbles"]=!1===n.attributes[e].expando);n=null}();var jt=/^(?:input|select|textarea)$/i,Et=/^key/,Dt=/^(?:mouse|pointer|contextmenu)|click/,Nt=/^(?:focusinfocus|focusoutblur)$/,Ot=/^([^.]*)(?:\.(.+)|)$/;at.event={global:{},add:function(t,e,n,i,a){var o,r,s,l,d,c,u,f,h,p,m,g=at._data(t);if(g){for(n.handler&&(n=(l=n).handler,a=l.selector),n.guid||(n.guid=at.guid++),(r=g.events)||(r=g.events={}),(c=g.handle)||((c=g.handle=function(t){return typeof at===$t||t&&at.event.triggered===t.type?undefined:at.event.dispatch.apply(c.elem,arguments)}).elem=t),s=(e=(e||"").match(bt)||[""]).length;s--;)h=m=(o=Ot.exec(e[s])||[])[1],p=(o[2]||"").split(".").sort(),h&&(d=at.event.special[h]||{},h=(a?d.delegateType:d.bindType)||h,d=at.event.special[h]||{},u=at.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:a,needsContext:a&&at.expr.match.needsContext.test(a),namespace:p.join(".")},l),(f=r[h])||((f=r[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,p,c)||(t.addEventListener?t.addEventListener(h,c,!1):t.attachEvent&&t.attachEvent("on"+h,c))),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,u):f.push(u),at.event.global[h]=!0);t=null}},remove:function(t,e,n,i,a){var o,r,s,l,d,c,u,f,h,p,m,g=at.hasData(t)&&at._data(t);if(g&&(c=g.events)){for(d=(e=(e||"").match(bt)||[""]).length;d--;)if(h=m=(s=Ot.exec(e[d])||[])[1],p=(s[2]||"").split(".").sort(),h){for(u=at.event.special[h]||{},f=c[h=(i?u.delegateType:u.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)r=f[o],!a&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(f.splice(o,1),r.selector&&f.delegateCount--,u.remove&&u.remove.call(t,r));l&&!f.length&&(u.teardown&&!1!==u.teardown.call(t,p,g.handle)||at.removeEvent(t,h,g.handle),delete c[h])}else for(h in c)at.event.remove(t,h+e[d],n,i,!0);at.isEmptyObject(c)&&(delete g.handle,at._removeData(t,"events"))}},trigger:function(t,e,n,i){var a,o,r,s,l,d,c,u=[n||pt],f=et.call(t,"type")?t.type:t,h=et.call(t,"namespace")?t.namespace.split("."):[];if(r=d=n=n||pt,3!==n.nodeType&&8!==n.nodeType&&!Nt.test(f+at.event.triggered)&&(0<=f.indexOf(".")&&(f=(h=f.split(".")).shift(),h.sort()),o=f.indexOf(":")<0&&"on"+f,(t=t[at.expando]?t:new at.Event(f,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=n),e=null==e?[t]:at.makeArray(e,[t]),l=at.event.special[f]||{},i||!l.trigger||!1!==l.trigger.apply(n,e))){if(!i&&!l.noBubble&&!at.isWindow(n)){for(s=l.delegateType||f,Nt.test(s+f)||(r=r.parentNode);r;r=r.parentNode)u.push(r),d=r;d===(n.ownerDocument||pt)&&u.push(d.defaultView||d.parentWindow||m)}for(c=0;(r=u[c++])&&!t.isPropagationStopped();)t.type=1<c?s:l.bindType||f,(a=(at._data(r,"events")||{})[t.type]&&at._data(r,"handle"))&&a.apply(r,e),(a=o&&r[o])&&a.apply&&at.acceptData(r)&&(t.result=a.apply(r,e),!1===t.result&&t.preventDefault());if(t.type=f,!i&&!t.isDefaultPrevented()&&(!l._default||!1===l._default.apply(u.pop(),e))&&at.acceptData(n)&&o&&n[f]&&!at.isWindow(n)){(d=n[o])&&(n[o]=null),at.event.triggered=f;try{n[f]()}catch(p){}at.event.triggered=undefined,d&&(n[o]=d)}return t.result}},dispatch:function(t){t=at.event.fix(t);var e,n,i,a,o,r=[],s=Y.call(arguments),l=(at._data(this,"events")||{})[t.type]||[],d=at.event.special[t.type]||{};if((s[0]=t).delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,t)){for(r=at.event.handlers.call(this,t,l),e=0;(a=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,o=0;(i=a.handlers[o++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,(n=((at.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))!==undefined&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,a,o,r=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(a=[],o=0;o<s;o++)a[n=(i=e[o]).selector+" "]===undefined&&(a[n]=i.needsContext?0<=at(n,this).index(l):at.find(n,this,null,[l]).length),a[n]&&a.push(i);a.length&&r.push({elem:l,handlers:a})}return s<e.length&&r.push({elem:this,handlers:e.slice(s)}),r},fix:function(t){if(t[at.expando])return t;var e,n,i,a=t.type,o=t,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=Dt.test(a)?this.mouseHooks:Et.test(a)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,t=new at.Event(o),e=i.length;e--;)t[n=i[e]]=o[n];return t.target||(t.target=o.srcElement||pt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,a,o=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(a=(i=t.target.ownerDocument||pt).documentElement,n=i.body,t.pageX=e.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||o===undefined||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(at.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return at.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var a=at.extend(new at.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?at.event.trigger(a,null,e):at.event.dispatch.call(e,a),a.isDefaultPrevented()&&n.preventDefault()}},at.removeEvent=pt.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===$t&&(t[i]=null),t.detachEvent(i,n))},at.Event=function(t,e){if(!(this instanceof at.Event))return new at.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?c:u):this.type=t,e&&at.extend(this,e),this.timeStamp=t&&t.timeStamp||at.now(),this[at.expando]=!0},at.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){at.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,a=t.handleObj;return i&&(i===n||at.contains(n,i))||(t.type=a.origType,e=a.handler.apply(this,arguments),t.type=o),e}}}),nt.submitBubbles||(at.event.special.submit={setup:function(){if(at.nodeName(this,"form"))return!1;at.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=at.nodeName(e,"input")||at.nodeName(e,"button")?e.form:undefined;n&&!at._data(n,"submitBubbles")&&(at.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),at._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&at.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(at.nodeName(this,"form"))return!1;at.event.remove(this,"._submit")}}),nt.changeBubbles||(at.event.special.change={setup:function(){if(jt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(at.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),at.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),at.event.simulate("change",this,t,!0)})),!1;at.event.add(this,"beforeactivate._change",function(t){var e=t.target;jt.test(e.nodeName)&&!at._data(e,"changeBubbles")&&(at.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||at.event.simulate("change",this.parentNode,t,!0)}),at._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return at.event.remove(this,"._change"),!jt.test(this.nodeName)}}),nt.focusinBubbles||at.each({focus:"focusin",blur:"focusout"},function(n,i){var a=function(t){at.event.simulate(i,t.target,at.event.fix(t),!0)};at.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=at._data(t,i);e||t.addEventListener(n,a,!0),at._data(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=at._data(t,i)-1;e?at._data(t,i,e):(t.removeEventListener(n,a,!0),at._removeData(t,i))}}}),at.fn.extend({on:function(t,e,n,i,a){var o,r;if("object"==typeof t){for(o in"string"!=typeof e&&(n=n||e,e=undefined),t)this.on(o,e,n,t[o],a);return this}if(null==n&&null==i?(i=e,n=e=undefined):null==i&&("string"==typeof e?(i=n,n=undefined):(i=n,n=e,e=undefined)),!1===i)i=u;else if(!i)return this;return 1===a&&(r=i,(i=function(t){return at().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=at.guid++)),this.each(function(){at.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,a;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,at(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=u),this.each(function(){at.event.remove(this,t,n,e)});for(a in t)this.off(a,e,t[a]);return this},trigger:function(t,e){return this.each(function(){at.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return at.event.trigger(t,e,n,!0)}});var Pt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ft=/ jQuery\d+="(?:null|\d+)"/g,Lt=new RegExp("<(?:"+Pt+")[\\s/>]","i"),It=/^\s+/,Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,zt=/<tbody/i,Bt=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^$|\/(?:java|ecma)script/i,Ut=/^true\/(.*)/,Jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yt=g(pt).appendChild(pt.createElement("div"));Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,at.extend({clone:function(t,e,n){var i,a,o,r,s,l=at.contains(t.ownerDocument,t);if(nt.html5Clone||at.isXMLDoc(t)||!Lt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Yt.innerHTML=t.outerHTML,Yt.removeChild(o=Yt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||at.isXMLDoc(t)))for(i=v(o),s=v(t),r=0;null!=(a=s[r]);++r)i[r]&&k(a,i[r]);if(e)if(n)for(s=s||v(t),i=i||v(o),r=0;null!=(a=s[r]);r++)$(a,i[r]);else $(t,o);return 0<(i=v(o,"script")).length&&w(i,!l&&v(t,"script")),i=s=a=null,o},buildFragment:function(t,e,n,i){for(var a,o,r,s,l,d,c,u=t.length,f=g(e),h=[],p=0;p<u;p++)if((o=t[p])||0===o)if("object"===at.type(o))at.merge(h,o.nodeType?[o]:o);else if(Bt.test(o)){for(s=s||f.appendChild(e.createElement("div")),l=(Ht.exec(o)||["",""])[1].toLowerCase(),c=Xt[l]||Xt._default,s.innerHTML=c[1]+o.replace(Rt,"<$1></$2>")+c[2],a=c[0];a--;)s=s.lastChild;if(!nt.leadingWhitespace&&It.test(o)&&h.push(e.createTextNode(It.exec(o)[0])),!nt.tbody)for(a=(o="table"!==l||zt.test(o)?"<table>"!==c[1]||zt.test(o)?0:s:s.firstChild)&&o.childNodes.length;a--;)at.nodeName(d=o.childNodes[a],"tbody")&&!d.childNodes.length&&o.removeChild(d);for(at.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else h.push(e.createTextNode(o));for(s&&f.removeChild(s),nt.appendChecked||at.grep(v(h,"input"),y),p=0;o=h[p++];)if((!i||-1===at.inArray(o,i))&&(r=at.contains(o.ownerDocument,o),s=v(f.appendChild(o),"script"),r&&w(s),n))for(a=0;o=s[a++];)qt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(t,e){for(var n,i,a,o,r=0,s=at.expando,l=at.cache,d=nt.deleteExpando,c=at.event.special;null!=(n=t[r]);r++)if((e||at.acceptData(n))&&(o=(a=n[s])&&l[a])){if(o.events)for(i in o.events)c[i]?at.event.remove(n,i):at.removeEvent(n,i,o.handle);l[a]&&(delete l[a],d?delete n[s]:typeof n.removeAttribute!==$t?n.removeAttribute(s):n[s]=null,X.push(a))}}}),at.fn.extend({text:function(t){return At(this,function(t){return t===undefined?at.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||p(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?at.filter(t,this):this,a=0;null!=(n=i[a]);a++)e||1!==n.nodeType||at.cleanData(v(n)),n.parentNode&&(e&&at.contains(n.ownerDocument,n)&&w(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&at.cleanData(v(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&at.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return at.clone(this,t,e)})},html:function(t){return At(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined
)return 1===e.nodeType?e.innerHTML.replace(Ft,""):undefined;if("string"==typeof t&&!Wt.test(t)&&(nt.htmlSerialize||!Lt.test(t))&&(nt.leadingWhitespace||!It.test(t))&&!Xt[(Ht.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Rt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(at.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(a){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=t;return this.domManip(arguments,function(t){e=this.parentNode,at.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i){n=G.apply([],n);var t,e,a,o,r,s,l=0,d=this.length,c=this,u=d-1,f=n[0],h=at.isFunction(f);if(h||1<d&&"string"==typeof f&&!nt.checkClone&&Vt.test(f))return this.each(function(t){var e=c.eq(t);h&&(n[0]=f.call(this,t,e.html())),e.domManip(n,i)});if(d&&(t=(s=at.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===s.childNodes.length&&(s=t),t)){for(a=(o=at.map(v(s,"script"),b)).length;l<d;l++)e=s,l!==u&&(e=at.clone(e,!0,!0),a&&at.merge(o,v(e,"script"))),i.call(this[l],e,l);if(a)for(r=o[o.length-1].ownerDocument,at.map(o,x),l=0;l<a;l++)e=o[l],qt.test(e.type||"")&&!at._data(e,"globalEval")&&at.contains(r,e)&&(e.src?at._evalUrl&&at._evalUrl(e.src):at.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Jt,"")));s=t=null}return this}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,r){at.fn[t]=function(t){for(var e,n=0,i=[],a=at(t),o=a.length-1;n<=o;n++)e=n===o?this:this.clone(!0),at(a[n])[r](e),Q.apply(i,e.get());return this.pushStack(i)}});var Gt,Qt,Zt={};nt.shrinkWrapBlocks=function(){return null!=Qt?Qt:(Qt=!1,(e=pt.getElementsByTagName("body")[0])&&e.style?(t=pt.createElement("div"),(n=pt.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),typeof t.style.zoom!==$t&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",Qt=3!==t.offsetWidth),e.removeChild(n),Qt):void 0);var t,e,n};var Kt,te,ee=/^margin/,ne=new RegExp("^("+St+")(?!px)[a-z%]+$","i"),ie=/^(top|right|bottom|left)$/;m.getComputedStyle?(Kt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},te=function(t,e,n){var i,a,o,r,s=t.style;return r=(n=n||Kt(t))?n.getPropertyValue(e)||n[e]:undefined,n&&(""!==r||at.contains(t.ownerDocument,t)||(r=at.style(t,e)),ne.test(r)&&ee.test(e)&&(i=s.width,a=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=n.width,s.width=i,s.minWidth=a,s.maxWidth=o)),r===undefined?r:r+""}):pt.documentElement.currentStyle&&(Kt=function(t){return t.currentStyle},te=function(t,e,n){var i,a,o,r,s=t.style;return null==(r=(n=n||Kt(t))?n[e]:undefined)&&s&&s[e]&&(r=s[e]),ne.test(r)&&!ie.test(e)&&(i=s.left,(o=(a=t.runtimeStyle)&&a.left)&&(a.left=t.currentStyle.left),s.left="fontSize"===e?"1em":r,r=s.pixelLeft+"px",s.left=i,o&&(a.left=o)),r===undefined?r:r+""||"auto"}),function(){function t(){var t,e,n,i;(e=pt.getElementsByTagName("body")[0])&&e.style&&(t=pt.createElement("div"),(n=pt.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a=o=!1,s=!0,m.getComputedStyle&&(a="1%"!==(m.getComputedStyle(t,null)||{}).top,o="4px"===(m.getComputedStyle(t,null)||{width:"4px"}).width,(i=t.appendChild(pt.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",s=!parseFloat((m.getComputedStyle(i,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(i=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(r=0===i[0].offsetHeight)&&(i[0].style.display="",i[1].style.display="none",r=0===i[0].offsetHeight),e.removeChild(n))}var e,n,i,a,o,r,s;(e=pt.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(n=(i=e.getElementsByTagName("a")[0])&&i.style)&&(n.cssText="float:left;opacity:.5",nt.opacity="0.5"===n.opacity,nt.cssFloat=!!n.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===e.style.backgroundClip,nt.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,at.extend(nt,{reliableHiddenOffsets:function(){return null==r&&t(),r},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==a&&t(),a},reliableMarginRight:function(){return null==s&&t(),s}}))}(),at.swap=function(t,e,n,i){var a,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in a=n.apply(t,i||[]),e)t.style[o]=r[o];return a};var ae=/alpha\([^)]*\)/i,oe=/opacity\s*=\s*([^)]*)/,re=/^(none|table(?!-c[ea]).+)/,se=new RegExp("^("+St+")(.*)$","i"),le=new RegExp("^([+-])=("+St+")","i"),de={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"},ue=["Webkit","O","Moz","ms"];at.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=te(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,o,r,s=at.camelCase(e),l=t.style;if(e=at.cssProps[s]||(at.cssProps[s]=C(l,s)),r=at.cssHooks[e]||at.cssHooks[s],n===undefined)return r&&"get"in r&&(a=r.get(t,!1,i))!==undefined?a:l[e];if("string"===(o=typeof n)&&(a=le.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(at.css(t,e)),o="number"),null!=n&&n==n&&("number"!==o||at.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&(n=r.set(t,n,i))===undefined)))try{l[e]=n}catch(d){}}},css:function(t,e,n,i){var a,o,r,s=at.camelCase(e);return e=at.cssProps[s]||(at.cssProps[s]=C(t.style,s)),(r=at.cssHooks[e]||at.cssHooks[s])&&"get"in r&&(o=r.get(t,!0,n)),o===undefined&&(o=te(t,e,i)),"normal"===o&&e in ce&&(o=ce[e]),""===n||n?(a=parseFloat(o),!0===n||at.isNumeric(a)?a||0:o):o}}),at.each(["height","width"],function(t,a){at.cssHooks[a]={get:function(t,e,n){if(e)return re.test(at.css(t,"display"))&&0===t.offsetWidth?at.swap(t,de,function(){return E(t,a,n)}):E(t,a,n)},set:function(t,e,n){var i=n&&Kt(t);return M(t,e,n?j(t,a,n,nt.boxSizing&&"border-box"===at.css(t,"boxSizing",!1,i),i):0)}}}),nt.opacity||(at.cssHooks.opacity={get:function(t,e){return oe.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,a=at.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===at.trim(o.replace(ae,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=ae.test(o)?o.replace(ae,a):o+" "+a)}}),at.cssHooks.marginRight=T(nt.reliableMarginRight,function(t,e){if(e)return at.swap(t,{display:"inline-block"},te,[t,"marginRight"])}),at.each({margin:"",padding:"",border:"Width"},function(a,o){at.cssHooks[a+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[a+Tt[e]+o]=i[e]||i[e-2]||i[0];return n}},ee.test(a)||(at.cssHooks[a+o].set=M)}),at.fn.extend({css:function(t,e){return At(this,function(t,e,n){var i,a,o={},r=0;if(at.isArray(e)){for(i=Kt(t),a=e.length;r<a;r++)o[e[r]]=at.css(t,e[r],!1,i);return o}return n!==undefined?at.style(t,e,n):at.css(t,e)},t,e,1<arguments.length)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ct(this)?at(this).show():at(this).hide()})}}),(at.Tween=D).prototype={constructor:D,init:function(t,e,n,i,a,o){this.elem=t,this.prop=n,this.easing=a||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(at.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.options.duration?this.pos=e=at.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=at.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){at.fx.step[t.prop]?at.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[at.cssProps[t.prop]]||at.cssHooks[t.prop])?at.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},at.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},at.fx=D.prototype.init,at.fx.step={};var fe,he,pe,me,ge,ve,ye,be=/^(?:toggle|show|hide)$/,xe=new RegExp("^(?:([+-])=|)("+St+")([a-z%]*)$","i"),we=/queueHooks$/,$e=[F],ke={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),a=xe.exec(e),o=a&&a[3]||(at.cssNumber[t]?"":"px"),r=(at.cssNumber[t]||"px"!==o&&+i)&&xe.exec(at.css(n.elem,t)),s=1,l=20;if(r&&r[3]!==o)for(o=o||r[3],a=a||[],r=+i||1;r/=s=s||".5",at.style(n.elem,t,r+o),s!==(s=n.cur()/i)&&1!==s&&--l;);return a&&(r=n.start=+r||+i||0,n.unit=o,n.end=a[1]?r+(a[1]+1)*a[2]:+a[2]),n}]};at.Animation=at.extend(I,{tweener:function(t,e){at.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,a=t.length;i<a;i++)n=t[i],ke[n]=ke[n]||[],ke[n].unshift(e)},prefilter:function(t,e){e?$e.unshift(t):$e.push(t)}}),at.speed=function(t,e,n){var i=t&&"object"==typeof t?at.extend({},t):{complete:n||!n&&e||at.isFunction(t)&&t,duration:t,easing:n&&e||e&&!at.isFunction(e)&&e};return i.duration=at.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in at.fx.speeds?at.fx.speeds[i.duration]:at.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){at.isFunction(i.old)&&i.old.call(this),i.queue&&at.dequeue(this,i.queue)},i},at.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var a=at.isEmptyObject(e),o=at.speed(t,n,i),r=function(){var t=I(this,at.extend({},e),o);(a||at._data(this,"finish"))&&t.stop(!0)};return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(a,t,o){var r=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof a&&(o=t,t=a,a=undefined),t&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var t=!0,e=null!=a&&a+"queueHooks",n=at.timers,i=at._data(this);if(e)i[e]&&i[e].stop&&r(i[e]);else for(e in i)i[e]&&i[e].stop&&we.test(e)&&r(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=a&&n[e].queue!==a||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||at.dequeue(this,a)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var t,e=at._data(this),n=e[r+"queue"],i=e[r+"queueHooks"],a=at.timers,o=n?n.length:0;for(e.finish=!0,at.queue(this,r,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===r&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),at.each(["toggle","show","hide"],function(t,i){var a=at.fn[i];at.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(O(i,!0),t,e,n)}}),at.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){at.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),at.timers=[],at.fx.tick=function(){var t,e=at.timers,n=0;for(fe=at.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||at.fx.stop(),fe=undefined},at.fx.timer=function(t){at.timers.push(t),t()?at.fx.start():at.timers.pop()},at.fx.interval=13,at.fx.start=function(){he||(he=setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){clearInterval(he),he=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fn.delay=function(i,t){return i=at.fx&&at.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},(me=pt.createElement("div")).setAttribute("className","t"),me.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ve=me.getElementsByTagName("a")[0],ye=(ge=pt.createElement("select")).appendChild(pt.createElement("option")),pe=me.getElementsByTagName("input")[0],ve.style.cssText="top:1px",nt.getSetAttribute="t"!==me.className,nt.style=/top/.test(ve.getAttribute("style")),nt.hrefNormalized="/a"===ve.getAttribute("href"),nt.checkOn=!!pe.value,nt.optSelected=ye.selected,nt.enctype=!!pt.createElement("form").enctype,ge.disabled=!0,nt.optDisabled=!ye.disabled,(pe=pt.createElement("input")).setAttribute("value",""),nt.input=""===pe.getAttribute("value"),pe.value="t",pe.setAttribute("type","radio"),nt.radioValue="t"===pe.value;var _e=/\r/g;at.fn.extend({val:function(n){var i,t,a,e=this[0];return arguments.length?(a=at.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=a?n.call(this,t,at(this).val()):n)?e="":"number"==typeof e?e+="":at.isArray(e)&&(e=at.map(e,function(t){return null==t?"":t+""})),(i=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==undefined||(this.value=e))})):e?(i=at.valHooks[e.type]||at.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==undefined?t:"string"==typeof(t=e.value)?t.replace(_e,""):null==t?"":t:void 0}}),at.extend({valHooks:{option:{get:function(t){var e=at.find.attr(t,"value");return null!=e?e:at.trim(at.text(t))}},select:{get:function(t){for(var e,n,i=t.options,a=t.selectedIndex,o="select-one"===t.type||a<0,r=o?null:[],s=o?a+1:i.length,l=a<0?s:o?a:0;l<s;l++)if(((n=i[l]).selected||l===a)&&(nt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!at.nodeName(n.parentNode,"optgroup"))){if(e=at(n).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var n,i,a=t.options,o=at.makeArray(e),r=a.length;r--;)if(i=a[r],0<=at.inArray(at.valHooks.option.get(i),o))try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),a}}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(t,e){if(at.isArray(e))return t.checked=0<=at.inArray(at(t).val(),e)}},nt.checkOn||(at.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Se,Te,Ce=at.expr.attrHandle,Ae=/^(?:checked|selected)$/i,Me=nt.getSetAttribute,je=nt.input;at.fn.extend({attr:function(t,e){return At(this,at.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){at.removeAttr(this,t)})}}),at.extend({attr:function(t,e,n){var i,a,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===$t?at.prop(t,e,n):(1===o&&at.isXMLDoc(t)||(e=e.toLowerCase(),i=at.attrHooks[e]||(at.expr.match.bool.test(e)?Te:Se)),n===undefined?i&&"get"in i&&null!==(a=i.get(t,e))?a:null==(a=at.find.attr(t,e))?undefined:a:null!==n?i&&"set"in i&&(a=i.set(t,n,e))!==undefined?a:(t.setAttribute(e,n+""),n):void at.removeAttr(t,e))},removeAttr:function(t,e){var n,i,a=0,o=e&&e.match(bt);if(o&&1===t.nodeType)for(;n=o[a++];)i=at.propFix[n]||n,at.expr.match.bool.test(n)?je&&Me||!Ae.test(n)?t[i]=!1:t[at.camelCase("default-"+n)]=t[i]=!1:at.attr(t,n,""),t.removeAttribute(Me?n:i)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&at.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Te={set:function(t,e,n){return!1===e?at.removeAttr(t,n):je&&Me||!Ae.test(n)?t.setAttribute(!Me&&at.propFix[n]||n,n):t[at.camelCase("default-"+n)]=t[n]=!0,n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(t,e){var o=Ce[e]||at.find.attr;Ce[e]=je&&Me||!Ae.test(e)?function(t,e,n){var i,a;return n||(a=Ce[e],Ce[e]=i,i=null!=o(t,e,n)?e.toLowerCase():null,Ce[e]=a),i}:function(t,e,n){if(!n)return t[at.camelCase("default-"+e)]?e.toLowerCase():null}}),je&&Me||(at.attrHooks.value={set:function(t,e,n){if(!at.nodeName(t,"input"))return Se&&Se.set(t,e,n);t.defaultValue=e}}),Me||(Se={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},Ce.id=Ce.name=Ce.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},at.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:Se.set},at.attrHooks.contenteditable={set:function(t,e,n){Se.set(t,""!==e&&e,n)}},at.each(["width","height"],function(t,n){at.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),nt.style||(at.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var Ee=/^(?:input|select|textarea|button|object)$/i,De=/^(?:a|area)$/i;at.fn.extend({prop:function(t,e){return At(this,at.prop,t,e,1<arguments.length)},removeProp:function(e){return e=at.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),at.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,a,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!at.isXMLDoc(t))&&(e=at.propFix[e]||e,a=at.propHooks[e]),n!==undefined?a&&"set"in a&&(i=a.set(t,n,e))!==undefined?i:t[e]=n:a&&"get"in a&&null!==(i=a.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=at.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||De.test(t.nodeName)&&t.href?0:-1}}}}),nt.hrefNormalized||at.each(["href","src"],function(t,e){at.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),nt.optSelected||(at.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this}),nt.enctype||(at.propFix.enctype="encoding");var Ne=/[\t\r\n\f]/g;at.fn.extend({addClass:function(e){var t,n,i,a,o,r,s=0,l=this.length,d="string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).addClass(e.call(this,t,this.className))});if(d)for(t=(e||"").match(bt)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Ne," "):" ")){for(o=0;a=t[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r=at.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(e){var t,n,i,a,o,r,s=0,l=this.length,d=0===arguments.length||"string"==typeof e&&e;if(at.isFunction(e))return this.each(function(t){at(this).removeClass(e.call(this,t,this.className))});if(d)for(t=(e||"").match(bt)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(Ne," "):"")){for(o=0;a=t[o++];)for(;0<=i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");r=e?at.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(a,e){var o=typeof a;return"boolean"==typeof e&&"string"===o?e?this.addClass(a):this.removeClass(a):at.isFunction(a)?this.each(function(t){at(this).toggleClass(a.call(this,t,this.className,e),e)}):this.each(function(){if("string"===o)for(var t,e=0,n=at(this),i=a.match(bt)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else o!==$t&&"boolean"!==o||(this.className&&at._data(this,"__className__",this.className),this.className=this.className||!1===a?"":at._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(Ne," ").indexOf(e))return!0;return!1}}),at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){at.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),at.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Oe=at.now(),Pe=/\?/,Fe=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;at.parseJSON=function(t){if(m.JSON&&m.JSON.parse)return m.JSON.parse(t+"");var a,o=null,e=at.trim(t+"");return e&&!at.trim(e.replace(Fe,function(t,e,n,i){return a&&e&&(o=0),0===o?t:(a=n||e,o+=!i-!n,"")}))?Function("return "+e)():at.error("Invalid JSON: "+t)},at.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{m.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(n){e=undefined}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+t),e};var Le,Ie,Re=/#.*$/,He=/([?&])_=[^&]*/,ze=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Be=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,We=/^(?:GET|HEAD)$/,Ve=/^\/\//,qe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ue={},Je={},Xe="*/".concat("*");try{Ie=location.href}catch(cn){(Ie=pt.createElement("a")).href="",Ie=Ie.href}Le=qe.exec(Ie.toLowerCase())||[],at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie,type:"GET",isLocal:Be.test(Le[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?z(z(t,at.ajaxSettings),e):z(at.ajaxSettings,t)},ajaxPrefilter:R(Ue),ajaxTransport:R(Je),ajax:function(t,e){function n(t,e,n,i){var a,o,r,s,l,d=e;2!==w&&(w=2,f&&clearTimeout(f),p=undefined,u=i||"",$.readyState=0<t?4:0,a=200<=t&&t<300||304===t,n&&(s=B(m,$,n)),s=W(m,s,$,a),a?(m.ifModified&&((l=$.getResponseHeader("Last-Modified"))&&(at.lastModified[c]=l),(l=$.getResponseHeader("etag"))&&(at.etag[c]=l)),204===t||"HEAD"===m.type?d="nocontent":304===t?d="notmodified":(d=s.state,o=s.data,a=!(r=s.error))):(r=d,!t&&d||(d="error",t<0&&(t=0))),$.status=t,$.statusText=(e||d)+"",a?y.resolveWith(g,[o,d,$]):y.rejectWith(g,[$,d,r]),$.statusCode(x),x=undefined,h&&v.trigger(a?"ajaxSuccess":"ajaxError",[$,m,a?o:r]),b.fireWith(g,[$,d]),h&&(v.trigger("ajaxComplete",[$,m]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=undefined),e=e||{};var i,a,c,u,f,h,p,o,m=at.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?at(g):at.event,y=at.Deferred(),b=at.Callbacks("once memory"),x=m.statusCode||{},r={},s={},w=0,l="canceled",$={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!o)for(o={};e=ze.exec(u);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?u:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=s[n]=s[n]||t,r[t]=e),this},overrideMimeType:function(t){return w||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(w<2)for(e in t)x[e]=[x[e],t[e]];else $.always(t[$.status]);return this},abort:function(t){var e=t||l;return p&&p.abort(e),n(0,e),this}};if(y.promise($).complete=b.add,$.success=$.done,$.error=$.fail,m.url=((t||m.url||Ie)+"").replace(Re,"").replace(Ve,Le[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=at.trim(m.dataType||"*").toLowerCase().match(bt)||[""],null==m.crossDomain&&(i=qe.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===Le[1]&&i[2]===Le[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Le[3]||("http:"===Le[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=at.param(m.data,m.traditional)),H(Ue,m,e,$),2===w)return $;for(a in(h=m.global)&&0==at.active++&&at.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!We.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Pe.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=He.test(c)?c.replace(He,"$1_="+Oe++):c+(Pe.test(c)?"&":"?")+"_="+Oe++)),m.ifModified&&(at.lastModified[c]&&$.setRequestHeader("If-Modified-Since",at.lastModified[c]),at.etag[c]&&$.setRequestHeader("If-None-Match",at.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&$.setRequestHeader("Content-Type",m.contentType),$.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Xe+"; q=0.01":""):m.accepts["*"]),m.headers)$.setRequestHeader(a,m.headers[a]);if(m.beforeSend&&(!1===m.beforeSend.call(g,$,m)||2===w))return $.abort();for(a in l="abort",{success:1,error:1,complete:1})$[a](m[a]);if(p=H(Je,m,e,$)){$.readyState=1,h&&v.trigger("ajaxSend",[$,m]),m.async&&0<m.timeout&&(f=setTimeout(function(){$.abort("timeout")},m.timeout));try{w=1,p.send(r,n)}catch(cn){if(!(w<2))throw cn;n(-1,cn)}}else n(-1,"No Transport");return $},getJSON:function(t,e,n){return at.get(t,e,n,"json")},getScript:function(t,e){return at.get(t,undefined,e,"script")}}),at.each(["get","post"],function(t,a){at[a]=function(t,e,n,i){return at.isFunction(e)&&(i=i||n,n=e,e=undefined),at.ajax({url:t,type:a,dataType:i,data:e,success:n})}}),at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){at.fn[e]=function(t){return this.on(e,t)}}),at._evalUrl=function(t){return at.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},at.fn.extend({wrapAll:function(e){if(at.isFunction(e))return this.each(function(t){at(this).wrapAll(e.call(this,t))});if(this[0]){var t=at(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return at.isFunction(n)?this.each(function(t){at(this).wrapInner(n.call(this,t))}):this.each(function(){var t=at(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=at.isFunction(e);return this.each(function(t){at(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}}),at.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||at.css(t,"display"))},at.expr.filters.visible=function(t){return!at.expr.filters.hidden(t)};var Ye=/%20/g,Ge=/\[\]$/,Qe=/\r?\n/g,Ze=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;at.param=function(t,e){var n,i=[],a=function(t,e){e=at.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(t)||t.jquery&&!at.isPlainObject(t))at.each(t,function(){a(this.name,this.value)});else for(n in t)V(n,t[n],e,a);return i.join("&").replace(Ye,"+")},at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=at.prop(this,"elements");return t?at.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!at(this).is(":disabled")&&Ke.test(this.nodeName)&&!Ze.test(t)&&(this.checked||!Mt.test(t))}).map(function(t,e){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(t){return{name:e.name,value:t.replace(Qe,"\r\n")}}):{name:e.name,value:n.replace(Qe,"\r\n")}}).get()}}),at.ajaxSettings.xhr=m.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||U()}:q;var tn=0,en={},nn=at.ajaxSettings.xhr();m.ActiveXObject&&at(m).on("unload",function(){for(var t in en)en[t](undefined,!0)}),nt.cors=!!nn&&"withCredentials"in nn,(nn=nt.ajax=!!nn)&&at.ajaxTransport(function(l){var d;if(!l.crossDomain||nt.cors)return{send:function(t,o){var e,r=l.xhr(),s=++tn;if(r.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(e in l.xhrFields)r[e]=l.xhrFields[e];for(e in l.mimeType&&r.overrideMimeType&&r.overrideMimeType(l.mimeType),l.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)t[e]!==undefined&&r.setRequestHeader(e,t[e]+"");r.send(l.hasContent&&l.data||null),d=function(t,e){var n,i,a;if(d&&(e||4===r.readyState))if(delete en[s],d=undefined,r.onreadystatechange=at.noop,e)4!==r.readyState&&r.abort();else{a={},n=r.status,"string"==typeof r.responseText&&(a.text=r.responseText);try{i=r.statusText}catch(cn){i=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=a.text?200:404}a&&o(n,i,a,r.getAllResponseHeaders())},l.async?4===r.readyState?setTimeout(d):r.onreadystatechange=en[s]=d:d()},abort:function(){d&&d(undefined,!0)}}}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return at.globalEval(t),t}}}),at.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),at.ajaxTransport("script",function(e){if(e.crossDomain){var i,a=pt.head||at("head")[0]||pt.documentElement;return{send:function(t,n){(i=pt.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},a.insertBefore(i,a.firstChild)},abort:function(){i&&i.onload(undefined,!0)}}}});var an=[],on=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=an.pop()||at.expando+"_"+Oe++;return this[t]=!0,t}}),at.ajaxPrefilter("json jsonp",function(t,e,n){var i,a,o,r=!1!==t.jsonp&&(on.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(t.data)&&"data");if(r||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=at.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(on,"$1"+i):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||at.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=m[i],m[i]=function(){o=arguments},n.always(function(){m[i]=a,t[i]&&(t.jsonpCallback=e.jsonpCallback,an.push(i)),o&&at.isFunction(a)&&a(o[0]),o=a=undefined}),"script"}),at.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||pt;var i=ut.exec(t),a=!n&&[];return i?[e.createElement(i[1])]:(i=at.buildFragment([t],e,a),a&&a.length&&at(a).remove(),at.merge([],i.childNodes))};var rn=at.fn.load;at.fn.load=function(t,e,n){if("string"!=typeof t&&rn)return rn.apply(this,arguments);var i,a,o,r=this,s=t.indexOf(" ");return 0<=s&&(i=at.trim(t.slice(s,t.length)),t=t.slice(0,s)),at.isFunction(e)?(n=e,e=undefined):e&&"object"==typeof e&&(o="POST"),0<r.length&&at.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){a=arguments,r.html(i?at("<div>").append(at.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){r.each(n,a||[t.responseText,e,t])}),this},at.expr.filters.animated=function(e){return at.grep(at.timers,function(t){return e===t.elem}).length};var sn=m.document.documentElement;at.offset={setOffset:function(t,e,n){var i,a,o,r,s,l,d=at.css(t,"position"),c=at(t),u={};"static"===d&&(t.style.position="relative"),s=c.offset(),o=at.css(t,"top"),l=at.css(t,"left"),("absolute"===d||"fixed"===d)&&-1<at.inArray("auto",[o,l])?(r=(
i=c.position()).top,a=i.left):(r=parseFloat(o)||0,a=parseFloat(l)||0),at.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(u.top=e.top-s.top+r),null!=e.left&&(u.left=e.left-s.left+a),"using"in e?e.using.call(t,u):c.css(u)}},at.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){at.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},a=this[0],o=a&&a.ownerDocument;return o?(t=o.documentElement,at.contains(t,a)?(typeof a.getBoundingClientRect!==$t&&(i=a.getBoundingClientRect()),n=J(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===at.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),at.nodeName(t[0],"html")||(n=t.offset()),n.top+=at.css(t[0],"borderTopWidth",!0),n.left+=at.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-at.css(i,"marginTop",!0),left:e.left-n.left-at.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||sn;t&&!at.nodeName(t,"html")&&"static"===at.css(t,"position");)t=t.offsetParent;return t||sn})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,a){var o=/Y/.test(a);at.fn[e]=function(t){return At(this,function(t,e,n){var i=J(t);if(n===undefined)return i?a in i?i[a]:i.document.documentElement[e]:t[e];i?i.scrollTo(o?at(i).scrollLeft():n,o?n:at(i).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),at.each(["top","left"],function(t,n){at.cssHooks[n]=T(nt.pixelPosition,function(t,e){if(e)return e=te(t,n),ne.test(e)?at(t).position()[n]+"px":e})}),at.each({Height:"height",Width:"width"},function(o,r){at.each({padding:"inner"+o,content:r,"":"outer"+o},function(i,t){at.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),a=i||(!0===t||!0===e?"margin":"border");return At(this,function(t,e,n){var i;return at.isWindow(t)?t.document.documentElement["client"+o]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+o],i["scroll"+o],t.body["offset"+o],i["offset"+o],i["client"+o])):n===undefined?at.css(t,e,a):at.style(t,e,n,a)},r,n?t:undefined,n,null)}})}),at.fn.size=function(){return this.length},at.fn.andSelf=at.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return at});var ln=m.jQuery,dn=m.$;return at.noConflict=function(t){return m.$===at&&(m.$=dn),t&&m.jQuery===at&&(m.jQuery=ln),at},typeof t===$t&&(m.jQuery=m.$=at),at}),function(c,u){var f;c.rails!==u&&c.error("jquery-ujs has already been loaded!");var t=c(document);c.rails=f={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote], button[data-confirm]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var e=c('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){var t=c("meta[name=csrf-token]").attr("content"),e=c("meta[name=csrf-param]").attr("content");c('form input[name="'+e+'"]').val(t)},fire:function(t,e,n){var i=c.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return c.ajax(t)},href:function(t){return t.attr("href")},handleRemote:function(i){var t,e,n,a,o,r,s,l;if(f.fire(i,"ajax:before")){if(o=(a=i.data("cross-domain"))===u?null:a,r=i.data("with-credentials")||null,s=i.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType,i.is("form")){t=i.attr("method"),e=i.attr("action"),n=i.serializeArray();var d=i.data("ujs:submit-button");d&&(n.push(d),i.data("ujs:submit-button",null))}else i.is(f.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(f.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=f.href(i),n=i.data("params")||null);return l={type:t||"GET",data:n,dataType:s,beforeSend:function(t,e){if(e.dataType===u&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!f.fire(i,"ajax:beforeSend",[t,e]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:o},r&&(l.xhrFields={withCredentials:r}),e&&(l.url=e),f.ajax(l)}return!1},handleMethod:function(t){var e=f.href(t),n=t.data("method"),i=t.attr("target"),a=c("meta[name=csrf-token]").attr("content"),o=c("meta[name=csrf-param]").attr("content"),r=c('<form method="post" action="'+e+'"></form>'),s='<input name="_method" value="'+n+'" type="hidden" />';o!==u&&a!==u&&(s+='<input name="'+o+'" value="'+a+'" type="hidden" />'),i&&r.attr("target",i),r.hide().append(s).appendTo("body"),r.submit()},formElements:function(t,e){return t.is("form")?c(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){f.formElements(t,f.disableSelector).each(function(){f.disableFormElement(c(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[e]()),n!==u&&t[e](n),t.prop("disabled",!0)},enableFormElements:function(t){f.formElements(t,f.enableSelector).each(function(){f.enableFormElement(c(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),i=!1;return!n||(f.fire(t,"confirm")&&(i=f.confirm(n),e=f.fire(t,"confirm:complete",[i])),i&&e)},blankInputs:function(t,e,n){var i,a=c(),o=e||"input,textarea",r=t.find(o);return r.each(function(){if(i=c(this),!(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val())==!n){if(i.is("input[type=radio]")&&r.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;a=a.add(i)}}),!!a.length&&a},nonBlankInputs:function(t,e){return f.blankInputs(t,e,!0)},stopEverything:function(t){return c(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");t.data("ujs:enable-with",t.html()),e!==u&&t.html(e),t.bind("click.railsDisable",function(t){return f.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==u&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},f.fire(t,"rails:attachBindings")&&(c.ajaxPrefilter(function(t,e,n){t.crossDomain||f.CSRFProtection(n)}),t.delegate(f.linkDisableSelector,"ajax:complete",function(){f.enableElement(c(this))}),t.delegate(f.buttonDisableSelector,"ajax:complete",function(){f.enableFormElement(c(this))}),t.delegate(f.linkClickSelector,"click.rails",function(t){var e=c(this),n=e.data("method"),i=e.data("params"),a=t.metaKey||t.ctrlKey;if(!f.allowAction(e))return f.stopEverything(t);if(!a&&e.is(f.linkDisableSelector)&&f.disableElement(e),e.data("remote")===u)return e.data("method")?(f.handleMethod(e),!1):void 0;if(a&&(!n||"GET"===n)&&!i)return!0;var o=f.handleRemote(e);return!1===o?f.enableElement(e):o.error(function(){f.enableElement(e)}),!1}),t.delegate(f.buttonClickSelector,"click.rails",function(t){var e=c(this);if(!f.allowAction(e))return f.stopEverything(t);e.is(f.buttonDisableSelector)&&f.disableFormElement(e);var n=f.handleRemote(e);return!1===n?f.enableFormElement(e):n.error(function(){f.enableFormElement(e)}),!1}),t.delegate(f.inputChangeSelector,"change.rails",function(t){var e=c(this);return f.allowAction(e)?(f.handleRemote(e),!1):f.stopEverything(t)}),t.delegate(f.formSubmitSelector,"submit.rails",function(t){var e,n,i=c(this),a=i.data("remote")!==u;if(!f.allowAction(i))return f.stopEverything(t);if(i.attr("novalidate")==u&&(e=f.blankInputs(i,f.requiredInputSelector))&&f.fire(i,"ajax:aborted:required",[e]))return f.stopEverything(t);if(a){if(n=f.nonBlankInputs(i,f.fileInputSelector)){setTimeout(function(){f.disableFormElements(i)},13);var o=f.fire(i,"ajax:aborted:file",[n]);return o||setTimeout(function(){f.enableFormElements(i)},13),o}return f.handleRemote(i),!1}setTimeout(function(){f.disableFormElements(i)},13)}),t.delegate(f.formInputClickSelector,"click.rails",function(t){var e=c(this);if(!f.allowAction(e))return f.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null;e.closest("form").data("ujs:submit-button",i)}),t.delegate(f.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&f.disableFormElements(c(this))}),t.delegate(f.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&f.enableFormElements(c(this))}),c(function(){f.refreshCSRFTokens()}))}(jQuery),$(function(){if($("#admin-ads-panel").length){$(".interval-selector").change(function(){var t=$(this).val();if(""!=t){var e=function(t){var e=new Date;return e.setDate(e.getDate()-t),e.toISOString().slice(0,10)},n="",i="";"Today"==t?(n=e(0),i=e(0)):"Yesterday"==t?(n=e(1),i=e(0)):"Last Week"==t?(n=e(7),i=e(0)):"Last Month"==t&&(n=e(30),i=e(0)),$(".date-from").val(n),$(".date-to").val(i)}});var d=function(t){var e=$(".filter-country").val().trim().toLowerCase(),n=$(".filter-status").val().trim().toLowerCase(),i=$(".filter-device").val().trim().toLowerCase();return""!=e&&!e.includes(t.country.toLowerCase())||(""!=n&&!n.includes(t.status.toLowerCase())||""!=i&&!i.includes(t.device.toLowerCase()))},c=[],o=function(){var a=0,n=0,o=0,i=0,r=0;$(".entries tbody").empty();var s={};c.forEach(function(t){if(!d(t)){switch(s[t.country]||(s[t.country]={total:0,activated:0,country:t.country}),a+=1,s[t.country].total+=1,t.status){case"bounced":i+=1;break;case"converted":n+=1;break;case"activated":s[t.country].activated+=1,o+=1;break;case"stopped":r+=1;break;default:alert("unknown status: "+t.status)}var e=$("<tr class='"+t.status.toLowerCase()+"'></tr>");e.append("<td>"+t.device+"</td>"),e.append("<td>"+t.created_at+"</td>"),e.append("<td>"+t.updated_at+"</td>"),e.append("<td>"+t.country+"</td>"),e.append("<td>"+t.status+"</td>"),e.append("<td>"+t.ip+"</td>"),e.append("<td>"+(null==t.user_name?"-":t.user_name)+"</td>"),e.append("<td>"+t.count+"</td>"),e.append("<td><a target='_blank' href='/garden/ads/"+t.id+"'>details</a></td>"),$(".result .entries tbody").append(e)}}),$(".stats .total").text(a),$(".stats .existing").text(r),$(".stats .bounced").text(i),$(".stats .activated").text(o),$(".stats .converted").text(n);var l=function(t){return Math.round(100*t)/100},t=Object.values(s);t.sort(function(t,e){return t.total>e.total?-1:t.total<e.total?1:0}),$(".country-stats-row").remove(),t.forEach(function(t){var e=$(".country-stats-row-template").clone(),n=l(100*t.activated/o),i=l(100*t.total/a);isNaN(n)&&(n=0),e.find(".country-stats-name").text(t.country),e.find(".country-stats-value").text(t.activated+" / "+t.total),e.find(".country-stats-percentage").text(n+" / "+i),e.removeClass("hidden"),e.removeClass("country-stats-row-template"),e.addClass("country-stats-row"),$(".country-stats").append(e)})};$(".filter-ads").click(function(){o()}),$(".ads-search").click(function(){var t=function(t){var e=/^\d{4}-\d{2}-\d{2}$/;if(!t.match(e))return!1;var n=new Date(t),i=n.getTime();return!(!i&&0!==i)&&n.toISOString().slice(0,10)===t},e=$(".date-from").val(),n=$(".date-to").val(),i=$(".search-ad-date").prop("checked"),a=$(".activated").prop("checked");""!=e&&t(e)||alert("invalid from: "+e),""!=n&&t(n)||alert("invalid to: "+n),$.ajax({url:"/garden/ads/search",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({from:e,to:n,use_ad_date:i,activated:a})}).done(function(t){c=t.result,o()})})}}),$(function(){$("#admin-group-activation").length&&($(".email-list .btn.btn-default").click(function(t){t.preventDefault();var e=$(this);showAjaxSpinner(e);var n=[];$(".email-list textarea").val().split("\n").forEach(function(t){""!=(t=t.trim())&&n.push(t)}),$.ajax({url:"/garden/group-subscription/emails",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({emails:n})}).done(function(t){if(hideAjaxSpinner(e),t.success){var n=!1,i=function(t){var e=$(".users-create table .template").clone();e.removeClass("template"),e.removeClass("hidden"),e.addClass("new-user-row"),e.find(".email").text(t),$(".users-create table").append(e)};$(".new-user-row").remove(),$(".group-user-row").remove(),$.each(t.result,function(t,e){e||(n=!0,i(t))});var a=function(t){var e=$(".user-list-table table tr.template").clone();e.removeClass("template"),e.removeClass("hidden"),e.addClass("group-user-row"),e.find(".id").text(t.id),e.find(".email").text(t.email),e.find(".name").text(t.name),e.find(".subscription").text(null==t.subscription?"-":t.subscription),$(".user-list-table table").append(e)};n||function(t){$(".user-list-table").removeClass("hidden"),$.each(t,function(t,e){a(e)})}(t.result)}else alert(t.message)})}),$(document).on("click",".user-list-table a.btn-process-subscription",function(){var e=$(this),n=$(".paying-user").val().trim();if(""!=n){var t=[];$(".group-user-row").find(".id").each(function(){t.push($(this).text())}),confirm("We will start activation, which is a LONG process that takes time. You can monitor progress via sent emails. Are you sure?")&&(showAjaxSpinner(e),$.ajax({url:"/garden/group-subscription",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({ids:t,paying_user:n})}).done(function(t){if(!t.success)return alert(t.message),void hideAjaxSpinner(e);alert("SUCCESS: all accounts were activated successfully .. you can verify that via sent emails"),alert("No payment transaction was created for PAYING USER ("+n+"). This should be done MANUALLY and a receipt should be mailed to him."),$(".user-list-table").addClass("hidden")}))}else alert("missing paying username")}),$(document).on("click",".users-create table a.btn-user-add",function(){var e=$(this),n=$(this).closest("tr"),t=n.find(".email").text(),i=n.find(".name input").val().trim().toLowerCase();""!=i?(showAjaxSpinner(e),$.ajax({url:"/garden/group-subscription/user",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({name:i,email:t})}).done(function(t){if(!t.success)return alert(t.message),void hideAjaxSpinner(e);alert("user was added successfully!"),n.remove()})):alert("enter name")}))}),$(function(){if($("#admin-referer-panel").length){var a=function(t){return String(t).replace(/(.)(?=(\d{3})+$)/g,"$1,")};$(".add-referer-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".referer-username").val().trim(),n=t.find(".referer-name").val().trim(),i=t.find(".referer-address").val().trim(),a=t.find(".referer-country").val().trim(),o=t.find(".referral-rate").val().trim();if(e&&n&&i&&a&&o)if(isNaN(o))alert("rate is not a number");else{var r={referer_username:e,referer_name:n,referer_address:i,referer_country:a,referral_rate:o};$.ajax({url:"/referers",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(r)}).done(function(t){t.success?alert("SUCCESS: referer was added"):alert("ERROR: "+t.message)})}else alert("Some referer fields are missing")}),$(".list-referers-btn").click(function(){$.ajax({url:"/referers",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){$(".list-referers-result").removeClass("hidden"),$(".list-referers-result tbody").empty(),t.results.forEach(function(t){$tr=$("<tr></tr>"),$tr.append("<td>"+t.username+"</td>"),$tr.append("<td>"+t.name+"</td>"),$tr.append("<td>"+t.country+"</td>"),$tr.append("<td>"+a(t.stats_landed)+"</td>"),$tr.append("<td>"+a(t.stats_activated)+"</td>"),$tr.append("<td>"+a(t.stats_converted)+"</td>"),$tr.append("<td>"+t.referral_rate+"</td>"),$tr.append("<td>"+a(t.amount_earned)+"</td>"),$tr.append("<td>"+a(t.amount_paid)+"</td>"),$tr.append("<td>"+a(t.amount_earned-t.amount_paid)+"</td>"),$(".list-referers-result tbody").append($tr)})})}),$(".add-referer-payment-btn").click(function(t){t.preventDefault();var e,n=$(this),i=(e=$(this).closest(".form")).find(".referer-username").val().trim(),a=e.find(".referer-payment-amount").val().trim(),o=e.find(".referer-payment-channel").val();i&&a&&o?isNaN(a)?alert("amount is not a number"):(showAjaxSpinner(n),(e=n.closest("form")).attr("action","/referer_payments"),e.submit()):alert("Some referer payment fields are missing")}),$(".list-referer-payments-btn").click(function(){var i=$(this).closest(".form").find(".referrer-payments-username").val().trim();i?$.ajax({url:"/garden/referer/payments?username="+i,type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){var e=$(".list-referer-payments-result > pre");if(e.empty(),0!=t.results.length){var n="--------------------------------------\n";t.results.forEach(function(t){t.payment_details||(t.payment_details="-"),t.attachment?t.attachment='<a href="/referers/payments/'+t.attachment+'">Download</a>':t.attachment="-",n+="amount: "+a(t.amount)+"\n",n+="channel: "+t.payment_channel+"\n",n+="date: "+t.payment_date+"\n",n+="details: "+t.payment_details+"\n",n+="attachment: "+t.attachment+"\n",n+="--------------------------------------\n"}),e.html(n)}else e.html("No payments were made to user "+i)}):alert("Username is missing")})}}),$(function(){if($("#admin-schools").length){var g=function(t){$.ajax({url:"/users/"+t+"/delete-last-subscription",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(data)}).done(function(t){alert(t.message),location.reload()})};$(".create-school-form .school_abbr").change(function(){var t=$(this).closest(".form"),e=$(this).val().trim();t.find(".school_username").val(e+".school"),t.find(".school_password").val(generateRandomPassword()),t.find(".school_username").trigger("change")}),$(".add-school-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".school_name").val().trim(),n=t.find(".school_abbr").val().trim(),i=t.find(".school_email").val().trim(),a=t.find(".school_username").val().trim(),o=t.find(".school_password").val().trim(),r=t.find(".school_country").val().trim(),s=t.find(".school_duration").val().trim(),l=t.find(".school_add_students").is(":checked"),d=t.find(".school_create_teacher").is(":checked"),c=t.find(".school_teacher_account").val().trim(),u=t.find(".previous_username").val().trim(),f=t.find(".school_free_trial").is(":checked"),h=t.find(".students_count").val().trim(),p=t.find(".teachers_count").val().trim();if(""!==h.trim())if(""!==p.trim()){var m={school_name:e,school_abbr:n,school_email:i,school_username:a,school_password:o,school_country:r,school_duration:s,school_add_students:l,school_create_teacher:d,school_teacher_account:c,school_free_trial:f,students_count:h,teachers_count:p,_method:"PUT"};$.ajax({url:"/schools",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(m)}).done(function(t){t.success?u?g(u):(alert("done successfully, reloading ..."),location.reload()):alert(t.message)})}else alert("ERROR: must specify student count");else alert("ERROR: must specify student count")}),$(".rename-abbr-btn").click(function(){var t=$(this).closest(".form"),e={abbr1:t.find(".abbr1").val().trim(),abbr2:t.find(".abbr2").val().trim()};$.ajax({url:"/garden/schools/rename-abbr",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){t.success,alert(t.message)})}),$(".update-class-size-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".school_abbr").val().trim(),n=t.find(".students_count").val();e.endsWith(".school")&&(e=e.replace(".school",""));var i={school_abbr:e,students_count:n};$.ajax({url:"/garden/schools/update-class-size",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("SUCCESS: class size is updated"):alert(t.message)})}),$(".update-teachers-count-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".school_abbr").val().trim(),n=t.find(".teachers_count").val();e.endsWith(".school")&&(e=e.replace(".school",""));var i={school_abbr:e,teachers_count:n};$.ajax({url:"/garden/schools/update-teachers-count",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("SUCCESS: teachers count is updated"):alert(t.message)})}),$(".upgrade-classroom-btn").click(function(){var t=$(this).closest(".form").find(".school_abbr").val().trim();t.endsWith(".school")&&(t=t.replace(".school",""));var e={school_abbr:t};$.ajax({url:"/garden/schools/classroom-upgrade",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){t.success?(alert("done successfully, reloading ..."),location.reload()):alert(t.message)})}),$(".downgrade-classroom-btn").click(function(){var t=$(this).closest(".form").find(".school_abbr").val().trim();t.endsWith(".school")&&(t=t.replace(".school",""));var e={school_abbr:t};$.ajax({url:"/garden/schools/classroom-downgrade",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){t.success?(alert("done successfully, reloading ..."),location.reload()):alert(t.message)})}),$(".update-school-name-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".school_abbr").val().trim(),n=t.find(".school_name").val().trim();if(e.endsWith(".school")&&(e=e.replace(".school","")),""!=n){var i={school_abbr:e,school_name:n};$.ajax({url:"/garden/schools/update-name",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("SUCCESS: school name is updated"):alert(t.message)})}else alert("missing school name")})}}),$(function(){if($("#admin-user-panel").length){var s=function(t){var e=/^\d{4}-\d{2}-\d{2}$/;if(!t.match(e))return!1;var n=new Date(t),i=n.getTime();return!(!i&&0!==i)&&n.toISOString().slice(0,10)===t};$(".user-lookup-btn").click(function(){var t=$(this).closest(".form").find(".lookup_param").val().trim();if(t){var e={lookup:t};$.ajax({url:"/garden/user/lookup",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){if(t.success){var e="";t.users.forEach(function(t){t.shared&&(e+="** SHARED ACCOUNT **\n"),e+="user: "+t.name+"\n",e+="email: "+t.email+"\n",e+="country: "+t.country+"\n",e+="id: "+t.id+"\n",e+="active: "+t.active+"\n",e+="create at: "+t.created_at+"\n",e+="user type: "+t.user_type+"\n",e+="signup school: "+t.signup_school+"\n",e+="primary user id: "+t.primary_user_id+"\n",e+="remember token: "+t.remember_token+"\n",e+="tracked: "+t.tracked+"\n",e+="unsubscribe: "+t.unsubscribe+"\n",e+="signin: "+t.signin+"\n",e+="usage: <a href='/garden/report/usage/"+t.id+"' target='_blank'>report</a> - <a href='/garden/html5/usage/"+t.id+"' target='_blank'>html5</a>\n",t.school&&(e+="school name: "+t.school.name+"\n",e+="school abbr: "+t.school.abbr+"\n",e+="......................................\n",e+="school add students: "+(1==t.school.add_students?"YES":"NO")+"\n",e+="school students count: "+(0==t.school.students_count?"OPEN":t.school.students_count)+"\n",e+="school teachers count: "+(0==t.school.teachers_count?"OPEN":t.school.teachers_count)+"\n",e+="......................................\n",e+="created students count: "+t.school.created_students_count+"\n",e+="created teachers count: "+t.school.created_teachers_count+"\n"),t.teacher&&(e+="Teacher add students: "+(1==t.teacher.add_students?"YES":"NO")+"\n",e+="Teacher email: "+t.teacher.email+"\n"),t.subscriptions.forEach(function(t){e+="--------------------------------------\n",e+="id: "+t.id+"\n",e+="from: "+t.start+"\n",e+="end: "+t.end+"\n",e+="free: "+(t.free?"YES":"NO")+"\n"}),e+="****************************************\n"}),$(".lookup-result > pre").html(e)}else alert("fail to find user")})}else alert("\u0627\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0628\u062d\u062b")}),$(".btn-send-email").click(function(){var t=$(this).data("type"),e=$(this).closest(".form"),n=e.find(".username").val().trim(),i=e.find(".email").val().trim();if(n)if(i){if(confirm("Send email for "+t+"?")){var a={username:n,email:i,email_type:t};$.ajax({url:"/garden/user/send-email",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){t.success?alert("email was sent successfully"):alert(t.message)})}}else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-update-email").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".email").val().trim(),i=t.find(".force-email").prop("checked");if(e)if(n){var a={username:e,email:n,force_email:i};$.ajax({url:"/garden/user/update-email",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){t.success?alert("SUCCESS: number of users updated => "+t.count):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-create-user").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".email").val().trim(),i=t.find(".force-email").prop("checked"),a=t.find(".country").val().trim();if(e)if(n)if(a){var o={username:e,email:n,force_email:i,country:a};$.ajax({url:"/garden/user/create-user",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o)}).done(function(t){t.success?alert("SUCCESS: user was created successfully"):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u062f\u0648\u0644\u0629");else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-activate-user").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".active").is(":checked");if(e){var i={name:e,active:n};$.ajax({url:"/garden/user/activate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("SUCCESS: number of users updated => "+t.count):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-pause-subscription").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".pause").is(":checked");if(e){var i={name:e,pause:n};$.ajax({url:"/garden/subscription/pause",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?t.paused?alert("SUCCESS: subscription is PAUSED"):alert("SUCCESS: subscription is RESUMED"):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-change-country").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".country").val().trim();if(e)if(2==n.length){var i={name:e,country:n};$.ajax({url:"/garden/user/country",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("country was changed to "+t.country):alert(t.message)})}else alert("\u0631\u0645\u0632 \u0627\u0644\u062f\u0648\u0644\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-printable-limit").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=parseInt(t.find(".printable-limit").val().trim());if(e)if(isNaN(n))alert("Limit is not integer");else{var i={name:e,limit:parseInt(n)};$.ajax({url:"/garden/user/printable-limit",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-shared-user").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".shared").is(":checked");if(e){var i={name:e,shared:n};$.ajax({url:"/garden/user/shared",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("SUCCESS: account has been marked as shared"):alert("ERROR: "+t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-clear-session-tracks").click(function(){var t={};$.ajax({url:"/garden/user/clear-session-tracks",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){t.success?alert("SUCCESS: session cleared"):alert(t.message)})}),$(".btn-user-subscription").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".duration").val().trim();if(e)if(n){var i={username:e,duration:n};$.ajax({url:"/garden/user/subscription/add",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("subscription was added till date: "+t.end_date):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u0641\u062a\u0631\u0629 \u0628\u0627\u0644\u0627\u0634\u0647\u0631");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-rename-username").click(function(){var t=$(this).closest(".form"),e=t.find(".rename-old-username").val().trim(),n=t.find(".rename-new-username").val().trim();if(e&&n){var i={username:e,new_username:n};$.ajax({url:"/garden/user/rename",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("user was renamed successfully"):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-user-credentials").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".password").val().trim(),i=t.find(".reset_token").is(":checked");if(e)if(n){var a={username:e,password:n,"reset-token":i};$.ajax({url:"/garden/user/credentials/reset",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){t.success?alert("user credentials reset was successful!"):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-free-subscription").click(function(){var t=$(this).closest(".form"),e=t.find(".username").val().trim(),n=t.find(".duration").val().trim();if(e)if(n){var i={username:e,duration:n};$.ajax({url:"/garden/user/trial/add",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("Trial was added till date: "+t.end_date):alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0627\u0644\u0641\u062a\u0631\u0629 \u0628\u0627\u0644\u0623\u0633\u0627\u0628\u064a\u0639");else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".user-tracking-btn").click(function(){var t=$(this).closest(".form"),e=t.find(".tracking_param").val().trim(),n=t.find(".limit").val().trim();if(e){var i={tracking:e,limit:n};$(".tracking-result > pre").text("waiting for data ..."),$.ajax({url:"/garden/user/tracking",type:"POST",
dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){if(t.success){var e="",n=0;t.tracks.forEach(function(t){e+="row#    : "+n+"\n",e+="time    : "+t.created_at+"\n",e+="ip      : "+t.ip+"\n",e+="country : "+t.country+"\n",e+="browser : "+t.browser+"\n",e+="user    : "+t.username+"\n",e+="session : "+t.session_id+"\n",e+="url     : "+t.url+"\n",e+="method  : "+t.method+"\n",e+="query   : "+t.query+"\n",e+="****************************************\n",n+=1}),$(".tracking-result > pre").text(e)}else alert("fail to find treacking")})}else alert("\u0627\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0628\u062d\u062b")}),$(".btn-list-not-journaled-subscriptions").click(function(){$(this).closest(".form");$(".list-unpaid-subscriptions-result > pre").text("waiting for data ..."),$.ajax({url:"/garden/subscriptions/not-journaled",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){if(t.success){var e="",n=0;t.subscriptions.forEach(function(t){e+="row#       : "+n+"\n",e+="created at : "+t.created_at+"\n",e+="start      : "+t.start+"\n",e+="end        : "+t.end+"\n",e+="months     : "+t.months+"\n",e+="username   : "+t.username+"\n",e+="usertype   : "+t.usertype+"\n",e+="email      : "+t.email+"\n",e+="students   : "+t.students+"\n",e+="****************************************\n",n+=1}),$(".list-not-journaled-subscriptions-result > pre").text(e)}else alert("ERROR: fail to find not journaled subscriptions")})}),$(".btn-list-payment-transactions").click(function(){var t=$(this).closest(".form"),e=t.find(".payment-search-limit").val().trim(),n=t.find(".payment-search-username").val().trim(),i={limit:e};n&&(i.username=n);var a=function(t){return t.has_payment_details?"amount: "+t.payment_amount+" "+t.payment_currency+" - collected: "+t.payment_collected+" "+t.payment_collected_currency+" ("+t.payment_collected_exchange_rate+") - fees: "+t.payment_collector_fee+" - net: "+t.payment_net:"-"};$(".list-payment-transactions-result > pre").text("waiting for data ..."),$.ajax({url:"/garden/payment-transactions",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){if(t.success){var e="",n=0;t.transactions.forEach(function(t){e+="row#            : "+n+"\n",e+="id              : "+t.id+"\n",e+="date            : "+t.payment_date+"\n",e+="source          : "+t.source+"\n",e+="product_type    : "+t.product_type+"\n",e+="user            : "+t.user+"\n",e+="quantity        : "+t.quantity+"\n",e+="upgrade         : "+t.upgrade+"\n",e+="ip_address      : "+t.ip_address+"\n",e+="ip_country      : "+t.ip_country+"\n",e+="subscription    : "+t.subscription+"\n",e+="recurrence      : "+t.recurrence+"\n",e+="payment_details : "+a(t)+"\n",e+="****************************************\n",n+=1}),$(".list-payment-transactions-result > pre").text(e)}else alert("fail to find payment transactions")})}),$(".enter-payment-transaction-form .btn-enter-payment-transaction").click(function(){var e=$(this).closest(".form"),t=e.find(".username").val().trim(),n=e.find(".product-type").val().trim(),i=e.find(".payment-date").val().trim(),a=e.find(".quantity").val().trim(),o=e.find(".upgrade").is(":checked"),r=e.find(".source").val().trim(),s=e.find(".ip-address").val().trim(),l=e.find(".transaction-payment-amount").val().trim(),d=e.find(".transaction-payment-currency").val().trim(),c=e.find(".transaction-payment-collected").val().trim(),u=e.find(".transaction-payment-collected-currency").val().trim(),f=e.find(".transaction-payment-collected-exchange-rate").val().trim(),h=e.find(".transaction-payment-collector-fee").val().trim(),p=e.find(".transaction-payment-net").val().trim();if(t&&n&&i&&a&&r&&s){var m={username:t,product_type:n,payment_date:i,quantity:a,upgrade:o,source:r,ip:s,has_payment_details:!1};if("free"!=n){if(!(l&&d&&c&&u&&f&&h&&p))return void alert("error: not all fields are provided");if(isNaN(l)||isNaN(c)||isNaN(f)||isNaN(h)||isNaN(p))return void alert("error: some numeric fields contain invalid number");if(3!=d.length||3!=u.length)return void alert("error: invalid currency");if("aed"!=u&&"usd"!=u)return void alert("error: unexpected collected currency");var g={has_payment_details:!0,payment_amount:l,payment_currency:d,payment_collected:c,payment_collected_currency:u,payment_collected_exchange_rate:f,payment_collector_fee:h,payment_net:p};for(var v in g)m[v]=g[v]}$.ajax({url:"/garden/payment-transactions/add",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(m)}).done(function(t){t.success?(alert("SUCCESS: payment transation was added susccessfully"),e.find(".username").val(""),e.find(".product-type").val(""),e.find(".payment-date").val(""),e.find(".quantity").val("1"),e.find(".upgrade").prop("checked",!1),e.find(".source").val(""),e.find(".ip-address").val(""),e.find(".transaction-payment-amount").val(""),e.find(".transaction-payment-currency").val(""),e.find(".transaction-payment-collected").val(""),e.find(".transaction-payment-collected-currency").val(""),e.find(".transaction-payment-collected-exchange-rate").val(""),e.find(".transaction-payment-collector-fee").val(""),e.find(".transaction-payment-net").val("")):alert("ERROR: "+t.message)})}else alert("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a")});var n=function(t){$(".enter-invoice-form .invoice-contact-name").val(""),$(".enter-invoice-form .invoice-contact-address1").val(""),$(".enter-invoice-form .invoice-contact-address2").val(""),$(".enter-invoice-form .invoice-contact-address3").val(""),$.ajax({url:"/garden/user/contact?username="+t,type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){t.success?($(".enter-invoice-form .invoice-contact-name").val(t.result.name),$(".enter-invoice-form .invoice-contact-address1").val(t.result.address1),$(".enter-invoice-form .invoice-contact-address2").val(t.result.address2),$(".enter-invoice-form .invoice-contact-address3").val(t.result.address3)):alert("fail to lookup contact for username")})};$(".enter-invoice-form .invoice-username").change(function(){var t=$(".enter-invoice-form .invoice-username").val();n(t)}),$(".enter-invoice-form .btn-update-contact").click(function(){var e=$(".enter-invoice-form .invoice-username").val().trim(),t={username:e,contact_name:$(".enter-invoice-form .invoice-contact-name").val().trim(),contact_address1:$(".enter-invoice-form .invoice-contact-address1").val().trim(),contact_address2:$(".enter-invoice-form .invoice-contact-address2").val().trim(),contact_address3:$(".enter-invoice-form .invoice-contact-address3").val().trim()};$.ajax({url:"/garden/user/contact",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){t.success?(alert("SUCCESS: contact was udpated"),n(e)):alert(t.message)})});var i=function(){var t=parseInt($(".enter-invoice-form .invoice-quantity").val()),e=parseInt($(".enter-invoice-form .invoice-rate").val()),n=parseInt($(".enter-invoice-form .invoice-tax-percentage").val()),i=t*e,a=Math.round(i*n)/100,o=a+i;$(".enter-invoice-form .invoice-subtotal").val(i),$(".enter-invoice-form .invoice-tax-total").val(a),$(".enter-invoice-form .invoice-total").val(o)};if($(".enter-invoice-form .invoice-product-type").change(function(){var t=".enter-invoice-form .invoice-product-type option[value='"+$(".enter-invoice-form .invoice-product-type").val()+"']",e=$(t).data("price"),n=$(t).data("item");$(".enter-invoice-form .invoice-item").val(n),$(".enter-invoice-form .invoice-rate").val(e),i()}),$(".enter-invoice-form .invoice-rate, .enter-invoice-form .invoice-quantity, .enter-invoice-form .invoice-tax-percentage").change(function(){i()}),$(".enter-invoice-form .btn-create-invoice").click(function(){var t={username:$(".enter-invoice-form .invoice-username").val().trim(),contact_name:$(".enter-invoice-form .invoice-contact-name").val().trim(),contact_address1:$(".enter-invoice-form .invoice-contact-address1").val().trim(),contact_address2:$(".enter-invoice-form .invoice-contact-address2").val().trim(),contact_address3:$(".enter-invoice-form .invoice-contact-address3").val().trim(),item:$(".enter-invoice-form .invoice-item").val().trim(),product_type:$(".enter-invoice-form .invoice-product-type").val(),quantity:parseInt($(".enter-invoice-form .invoice-quantity").val().trim()),rate:parseFloat($(".enter-invoice-form .invoice-rate").val().trim()),subtotal:parseFloat($(".enter-invoice-form .invoice-subtotal").val().trim()),tax_percentage:parseFloat($(".enter-invoice-form .invoice-tax-percentage").val().trim()),tax_total:parseFloat($(".enter-invoice-form .invoice-tax-total").val().trim()),total:parseFloat($(".enter-invoice-form .invoice-total").val().trim()),payment_url:$(".enter-invoice-form .invoice-payment-url").val().trim(),currency:$(".enter-invoice-form .invoice-currency").val().trim()};$.ajax({url:"/invoices",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){t.success?window.open("/invoices/"+t.id+"/download","invoice"):alert("fail to create invoice: "+t.message)})}),$(".invoice-activate-details-form .activate-type").change(function(){""!==$(".invoice-activate-details-form .activate-teachers").val().trim()&&""!==$(".invoice-activate-details-form .activate-students").val().trim()&&""!==$(".invoice-activate-details-form .activate-duration").val().trim()||($(".invoice-activate-details-form .activate-teachers").val($(".invoice-activate-details-form .school").data("current-teachers-count")),$(".invoice-activate-details-form .activate-students").val($(".invoice-activate-details-form .school").data("current-students-count")),$(".invoice-activate-details-form .activate-duration").val(12))}),$(".invoice-activate-details-form .invoice-username").change(function(){var t=$(".invoice-activate-details-form .invoice-username").val().trim();$(".invoice-activate-details-form .invoice-id").val(""),$(".invoice-activate-details-form .invoice-product-type").val(""),$(".invoice-activate-details-form .invoice-item").val(""),$(".invoice-activate-details-form .invoice-quantity").val(""),$(".invoice-activate-details-form .invoice-total").val(""),$(".invoice-activate-details-form .school").val(""),$(".invoice-activate-details-form .activate-type").val(""),$(".invoice-activate-details-form .activate-teachers").val(""),$(".invoice-activate-details-form .activate-students").val(""),$(".invoice-activate-details-form .activate-duration").val(""),$(".invoice-activate-details-form .activate-upgrade").prop("checked",!1),$.ajax({url:"/garden/invoice/activate-details?username="+t,type:"GET",dataType:"json",contentType:"application/json",cache:!1}).done(function(t){if(t.success){var e=t.result;if($(".invoice-activate-details-form .invoice-id").val(e.id),$(".invoice-activate-details-form .invoice-product-type").val(e.product_type),$(".invoice-activate-details-form .invoice-item").val(e.item),$(".invoice-activate-details-form .invoice-quantity").val(e.quantity),$(".invoice-activate-details-form .invoice-total").val(e.total),e.school?($(".invoice-activate-details-form .school").val("Teachers ( "+e.school_teachers+" ) - Students ( "+e.school_students+" )"),$(".invoice-activate-details-form .school").data("current-teachers-count",e.school_teachers),$(".invoice-activate-details-form .school").data("current-students-count",e.school_students)):($(".invoice-activate-details-form .school").val(" - "),$(".invoice-activate-details-form .school").data("current-teachers-count",0),$(".invoice-activate-details-form .school").data("current-students-count",0)),e.has_activate_details){var n=e.activate_details;$(".invoice-activate-details-form .activate-type").val(n.type),$(".invoice-activate-details-form .activate-teachers").val(n.teachers),$(".invoice-activate-details-form .activate-students").val(n.students),$(".invoice-activate-details-form .activate-duration").val(n.duration),$(".invoice-activate-details-form .activate-upgrade").prop("checked",n.upgrade)}}else alert(t.message)})}),$(".invoice-activate-details-form .btn-update-activate-details").click(function(){$(this);var t=$(this).closest(".form"),e=t.find(".invoice-id").val(),n=t.find(".activate-type").val(),i=parseInt(t.find(".activate-students").val()),a=parseInt(t.find(".activate-teachers").val()),o=parseInt(t.find(".activate-duration").val()),r=t.find(".activate-upgrade").prop("checked");if(""==n||isNaN(i)||isNaN(a)||isNaN(o))alert("ERROR: missing fields");else{var s={type:n,students:i,teachers:a,duration:o,upgrade:r},l=$(".invoice-activate-details-form .school").data("current-students-count"),d=$(".invoice-activate-details-form .school").data("current-teachers-count");f("TEACHERS",d,a)&&f("STUDENTS",l,i)&&confirm("confirm: "+JSON.stringify(s,null,2))&&$.ajax({url:"/invoices/"+e+"/activate-details",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(s)}).done(function(t){t.success?(alert("SUCCESS: invoice details are updated"),$(".invoice-activate-details-form .invoice-username").trigger("change")):alert("ERROR: fail to update invoice details")})}}),$(".btn-list-invoices").click(function(){var t=$(this).closest(".form"),e=t.find(".invoice-search-limit").val().trim(),n=t.find(".invoice-search-username").val().trim(),i=t.find(".invoice-search-number").val().trim(),a=t.find(".invoice-search-paid").is(":checked"),o=t.find(".invoice-manual").is(":checked"),r={limit:e};n&&(r.username=n),i&&(r.number=i),a&&(r.paid=!a),o&&(r.manual=!0),$(".list-invoices-result > pre").text("waiting for data ..."),$.ajax({url:"/invoices/search",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(r)}).done(function(t){if(t.success)if(0!=t.invoices.length){var e="",n=0;t.invoices.forEach(function(t){e+="row#         : "+n+"\n",e+="id           : "+t.id+"\n",e+="username     : "+t.username+"\n",e+="item         : "+t.item+"\n",e+="quantity     : "+t.quantity+"\n",e+="rate         : "+t.rate+"\n",e+="total        : "+t.total+"\n",e+="currency     : "+t.currency+"\n",e+="invoice_date : "+t.invoice_date+"\n",e+="payment_id   : "+t.payment_transaction_id+"\n",e+="type         : "+(t.from_payment?"AUTOMATED":"MANUAL")+"\n",e+="action       : <a href='/invoices/"+t.id+"/download' target='_blank'>Download</a> - <a href='javascript:void(0)' class='delete-invoice' data-invoice-id='"+t.id+"'>Delete</a>\n",e+="****************************************\n",n+=1}),$(".list-invoices-result > pre").html(e)}else $(".list-invoices-result > pre").html("NO RESULTS FOUND");else alert("fail to find invoices")})}),$(document).on("click",".btn-soft-delete-restore",function(){var e=$(this),t=e.data("id"),n=e.data("type");e.addClass("hidden"),$.ajax({url:"/garden/soft-deletion/restore",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({id:t,type:n})}).done(function(t){t.success?e.closest("tr").remove():alert("fail to restore")})}),$(".btn-list-soft-deletion").click(function(){$.ajax({url:"/garden/soft-deletion/list",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){assert(t.success,"fail to get results");var n=$(".list-soft-deletion table tbody");n.empty(),t.result.forEach(function(t){var e=$("<tr></tr>");e.append("<td>"+t.type+"</td>"),e.append("<td>"+t.name+"</td>"),e.append("<td>"+t.belongs+"</td>"),e.append("<td>"+t.updated_at+"</td>"),e.append("<td><a class='btn btn-default btn-soft-delete-restore' data-id='"+t.id+"' data-type='"+t.type+"'>restore</a></td>"),n.append(e)})})}),$(".btn-invoice-report").click(function(){var t=$(this).closest(".form"),e=t.find(".invoice-report-from").val(),n=t.find(".invoice-report-to").val(),i=t.find(".invoice-report-country").val(),a=t.find(".invoice-report-product-type").val(),o=t.find(".invoice-report-source").val();if(!e||!s(e))return alert("invalid from date: "+e),!1;if(n&&!s(n))return alert("invalid to date: "+n),!1;if(i&&2!=i.length)return alert("invalid country: "+i),!1;var r="from="+e+"&to="+n;i&&(r+="&country="+i),a&&(r+="&product_type="+a),o&&(r+="&source="+o),$(this).attr("href","/garden/invoice/report?"+r)}),$(document).on("click",".invoice-from-payment",function(){var t=$(this).data("payment-transaction-id");$.ajax({url:"/invoices/from-payment",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({payment_transaction_id:t})}).done(function(t){t.success?(alert("SUCCESS: invoice was created"),window.open("/invoices/"+t.id+"/download","invoice")):alert(t.message)})}),$(document).on("click",".delete-invoice",function(){var t=$(this).data("invoice-id");t?confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629\u061f")&&$.ajax({url:"/invoices/"+t,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(t){t.success?alert("SUCCESS: invoice was deleted"):alert(t.message)}):alert("\u0627\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}),$(".btn-delete-subscription").click(function(){var t=$(this).closest(".form").find(".username").val().trim();if(t){if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0644\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: "+t+"\u061f")){var e={username:t};$.ajax({url:"/garden/user/subscriptions/delete",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){alert(t.message)})}}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-user-reset").click(function(){var t=$(this).closest(".form").find(".username").val().trim();if(t){if(confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0644\u062d\u0633\u0627\u0628: "+t+"\u061f")&&confirm("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0645\u0631\u0629 \u0623\u062e\u0631\u0649\u060c \u0641\u0647\u0630\u0647 \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0633\u0648\u0641 \u062a\u0624\u062f\u064a \u0625\u0644\u0649 \u0625\u0644\u063a\u0627\u0621 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645")){var e={username:t};$.ajax({url:"/garden/user/reset/defaults",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){alert(t.message)})}}else alert("\u0627\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-move-subscription").click(function(){var t=$(this).closest(".form"),e=t.find(".from_username").val().trim(),n=t.find(".to_username").val().trim();if(e)if(n){var i={from_username:e,to_username:n};$.ajax({url:"/garden/user/subscriptions/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){alert(t.message)})}else alert("\u0627\u062f\u062e\u0644 \u0625\u0644\u0649 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645");else alert("\u0627\u062f\u062e\u0644 \u0645\u0646 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}),$(".btn-change-end-date").click(function(){var t=$(this).closest(".form"),e=t.find(".end-date-username").val().trim(),n=t.find(".end-date-date").val().trim(),i=t.find(".end-date-free-trial").prop("checked");if(n&&!s(n))return alert("invalid date: "+n),!1;var a={username:e,date:n};$.ajax({url:i?"/garden/user/trial/date":"/garden/user/subscriptions/date",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){alert(t.message)})}),$(".pending-payments").length){var u=function(){$(".pending-payments-container").empty(),$.ajax({url:"/payments/pending",type:"GET",dataType:"json",contentType:"application/json",cache:!1}).done(function(t){if(t.success){var a=function(t,e,n){var i=$('<div class="pending-payment-row"></div>');i.append("<div>"+e+"</div>"),i.append("<div>"+n+"</div>");var a=$("<div></div>");return i.append(a),t.append(i),a},o=function(t){t.append('<input type="text" class="update-username">'),t.append('<a class="btn btn-primary btn-update-username">\u062a\u062d\u062f\u064a\u062b</a>')},r=function(t,e,n,i){t.addClass("pending-payment-invoice-update"),t.append("<div><b>"+i+"</b></div>"),t.append("<div> - \u0646\u0648\u0639</div>"),t.append('<select class="type"><option></option><option>school</option><option>family</option></select>'),t.append("<div> - \u0645\u0639\u0644\u0645\u064a\u0646</div>"),t.append('<input type="text" class="teachers">'),t.append("<div> - \u0637\u0644\u0627\u0628</div>"),t.append('<input type="text" class="students">'),t.append("<div> - \u0645\u062f\u0629</div>"),t.append('<input type="text" class="duration">'),t.append("<div> - \u062a\u0631\u0642\u064a\u0629</div>"),t.append('<input type="checkbox" class="upgrade">'),t.append('<a class="btn btn-primary btn-update-invoice-activate-details" data-invoice-id="'+n+'">\u062a\u062d\u062f\u064a\u062b</a>'),t.find(".type").val(e.type),t.find(".students").val(e.students),t.find(".teachers").val(e.teachers),t.find(".duration").val(e.duration),t.find(".upgrade").prop("checked",e.upgrade)};0<t.result.length?$(".pending-payments").removeClass("hidden"):$(".pending-payments").addClass("hidden"),t.result.forEach(function(t){var e=$('<div class="pending-payment" data-payment-id="'+t.id+'" data-pid="'+t.pid+'"><a class="btn btn-default btn-delete-payment">Delete Payment</a></div>');a(e,"PID",'<div class="pid">'+t.pid+"</div>"),a(e,"Description",t.description),a(e,"Buyer",t.buyer);var n=a(e,"User",t.username);o(n),t.school&&a(e,"School",'Teacher ( <span class="school-current-teachers">'+t.school_teachers+'</span> ) - Students ( <span class="school-current-students">'+t.school_students+"</span> )");var i=t.invoice_id?'<a href="/invoices/'+t.invoice_id+'/download" target="_blank">'+t.invoice_id+"</a>":"-";n=a(e,"Invoice",i);t.invoice_id&&r(n,t.invoice_details,t.invoice_id,t.invoice_product_type),a(e,"",'<a class="btn btn-primary btn-process-payment">process payment</a>'),$(".pending-payments-container").append(e)})}else alert("ERROR: fail to load pending payments")})};u(),$(document).on("change",".pending-payments .pending-payment-invoice-update",function(){var t=$(this).closest(".pending-payment-row");if(!(""!==t.find(".teachers").val().trim()&&""!==t.find(".students").val().trim()&&""!==t.find(".duration").val().trim())){var e=0,n=0;$(this).closest(".pending-payment").find(".school-current-students").length&&(n=parseInt($(this).closest(".pending-payment").find(".school-current-students").text()),e=parseInt($(this).closest(".pending-payment").find(".school-current-teachers").text())),t.find(".teachers").val(e),t.find(".students").val(n),t.find(".duration").val(12)}});var f=function(t,e,n){if(e!==n)if(e<n){if(!confirm(t+": INCREASE by "+(n-e)+" => from "+e+" to "+n))return!1}else if(!confirm(t+": DECREASE  by "+(e-n)+" => from "+e+" to "+n))return!1;return!0};$(document).on("click",".pending-payments .btn-update-invoice-activate-details",function(){var t=$(this),e=t.data("invoice-id"),n=t.closest(".pending-payment-row"),i=n.find(".type").val(),a=parseInt(n.find(".students").val()),o=parseInt(n.find(".teachers").val()),r=parseInt(n.find(".duration").val()),s=n.find(".upgrade").prop("checked");if(""==i||isNaN(a)||isNaN(o)||isNaN(r))alert("ERROR: missing fields");else{var l={type:i,students:a,teachers:o,duration:r,upgrade:s};if(t.closest(".pending-payment").find(".school-current-students").length){var d=parseInt(t.closest(".pending-payment").find(".school-current-students").text()),c=parseInt(t.closest(".pending-payment").find(".school-current-teachers").text());if(!f("TEACHERS",c,o))return;if(!f("STUDENTS",d,a))return}confirm("confirm: "+JSON.stringify(l,null,2))&&$.ajax({url:"/invoices/"+e+"/activate-details",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(l)}).done(function(t){t.success?u():alert("ERROR: fail to update invoice details")})}}),$(document).on("click",".pending-payments .btn-update-username",function(){var t=$(this),e=t.closest(".pending-payment").data("pid"),n=t.closest(".pending-payment-row").find(".update-username").val().trim();n?$.ajax({url:"/payments/"+e+"/user",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({username:n})}).done(function(t){t.success?u():alert(t.message)}):alert("ERROR: missing username")}),$(document).on("click",".pending-payments .btn-process-payment",function(){var e=$(this);e.addClass("hidden");var t=$(this).closest(".pending-payment").find(".pid").text();$.ajax({url:"/payments/"+t+"/process",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){if(!t.success)return e.removeClass("hidden"),void alert("ERROR: "+t.message);alert("SUCCESS: payment was processed successfully"),u()})}),$(document).on("click",".pending-payments .btn-delete-payment",function(){if(confirm("Do you want to delete this payment?")){var e=$(this);e.addClass("hidden");var t=$(this).closest(".pending-payment").data("payment-id");$.ajax({url:"/payments/"+t,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(t){if(!t.success)return e.removeClass("hidden"),void alert("ERROR: "+t.message);alert("SUCCESS: payment was deleted"),u()})}})}$(".btn-add-bank-payment").click(function(){var t=$(".bank-payment-form .username").val().trim(),e=$(".bank-payment-form .ip").val().trim(),n=$(".bank-payment-form .received-amount").val().trim();if(t&&e&&n){var i={username:t,ip:e,received_amount:n};$.ajax({url:"/garden/payment/bank-transfer",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert(JSON.stringify(t.details,null,2)):alert(t.message)})}else alert("missing details")}),$(".btn-fulfill-stripe").click(function(){var t=$(".stripe-fulfill-form .pid").val().trim();t?$.ajax({url:"/payments/"+t+"/fulfill",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){t.success?alert("SUCCESS: stripe request is fulfilled"):alert("ERROR: fail to fulfill stripe request")}):alert("missing details")}),$(".btn-add-pending-payment").click(function(){var t=$(this).closest(".form").find(".pending-payment-username").val().trim(),e=$(this).closest(".form").find(".pending-payment-emails").val().trim(),n=$(this).closest(".form").find(".pending-payment-due-date").val().trim();if(!t||!e||!n)return alert("missing fields"),!1;if(!s(n))return alert("invalid date: "+n),!1;var i={username:t,emails:e,due_date:n};$.ajax({url:"/pending_payments",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){t.success?alert("pending payment was added successfully"):alert(t.message)})}),$(".btn-list-pending-payments").click(function(){$(this).closest(".form");$(".list-pending-payments-result > pre").text("waiting for data ..."),$.ajax({url:"/pending_payments",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){if(t.success)if(0!=t.pending_payments.length){var e="",n=0;t.pending_payments.forEach(function(t){e+="row#         : "+n+"\n",e+="id           : "+t.id+"\n",e+="user_id      : "+t.user_id+"\n",e+="username     : "+t.username+"\n",e+="school       : "+t.school+"\n",e+="due date     : "+t.due_date+"\n",e+="emails       : "+t.emails+"\n",e+="action       : <a href='javascript:void(0)' class='delete-pending-payment' data-pending-payment-id='"+t.id+"'>Delete</a>\n",e+="****************************************\n",n+=1}),$(".list-pending-payments-result > pre").html(e)}else $(".list-pending-payments-result > pre").html("NO RESULTS FOUND");else alert("fail to list pending payments")})}),$(document).on("click",".delete-pending-payment",function(){var t=$(this).data("pending-payment-id");confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u062f\u0641\u0639\u0629 \u0627\u0644\u0645\u0646\u062a\u0638\u0631\u0629\u061f")&&$.ajax({url:"/pending_payments/"+t,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(t){t.success?alert("SUCCESS: pending payment was deleted"):alert(t.message)})})}$("#invoice-report").length&&$(".btn-print-invoice-report").click(function(){window.print()})}),$(function(){if($("#admin-report").length){var t=function(t){$(".report-table > table").empty();var e=$('<tr><td style="text-align:center">Loading Report ...</td></tr>');$(".report-table > table").append(e);var a=1;$.ajax({url:"/garden/report/get",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({report:t})}).done(function(t){$(".report-table > table").empty();var n=[];if(t.length){var i=$("<tr>");i.append("<th></th>"),Object.keys(t[0]).forEach(function(t){n.push(t),i.append("<th>"+t+"</th>")}),$(".report-table > table").append(i),t.forEach(function(e){(i=$("<tr>")).append("<td>"+a+"</td>"),n.forEach(function(t){"user_id"==t||"primary_user_id"==t&&e[t]?i.append('<td><a href="/garden/report/usage/'+e[t]+'" target="_blank">'+e[t]+"</a></td>"):i.append("<td>"+e[t]+"</td>")}),$(".report-table > table").append(i),a+=1})}})};$(".report-selector").change(function(){t($(this).val())})}}),$(function(){if($("#assigned-homeworks-index").length&&($(".homework").click(function(){window.location.href="/assigned_homeworks/"+$(this).data("id")}),$(".btn-view-previous-homeworks").click(function(){$(this).hide(),$(".previous-homeworks").show()})),$("#assigned-homework-show").length&&$(".lesson,.prize-section.enabled").click(function(){window.location.href=$(this).data("url")}),$("#assigned-homework-groups-report").length){$(".btn-delete-assigned-homework-group").click(function(){var t=$(this),e=t.closest("tr");confirm(_t("homework.confirm_deletion3"))&&(showAjaxSpinner(t),$.ajax({url:"/assigned_homework_groups/"+$(this).data("id"),type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){e.remove(),hideAjaxSpinner(t)}))});var e=function(){var a=parseInt($(".filter-date").val()),o=$(".filter-classroom").val(),r=$(".filter-status").val();localStorageHelper.writeGroupHomeworkSearchFilters({date:a,classroom:o,status:r}),$(".homework-groups-table .no-search-matches").removeClass("hidden");var i=function(t){var e=parseInt(t.find(".date-cell").data("date")),n=t.find(".classroom-cell").data("classroom").split(","),i=parseInt(t.find(".progress-cell").data("percentage"));return-1!=a&&a<e||("all"!=o&&-1==n.indexOf(o)||("in-progress"==r&&100==i||"completed"==r&&i<100))},s=!1;$(".homework-group-row").each(function(t,e){var n=$(e);n.removeClass("hidden"),i(n)?n.addClass("hidden"):s=!0}),s&&$(".homework-groups-table .no-search-matches").addClass("hidden")};$(".btn-filter-update").click(function(){var t=$(this);showAjaxSpinner(t),window.setTimeout(function(){hideAjaxSpinner(t)},500),e()}),function(){if($("#assigned-homework-groups-report").data("clear-filters"))localStorageHelper.deleteGroupHomeworkSearchFilters(),$(".homework-group-row").removeClass("hidden");else{var t=localStorageHelper.readGroupHomeworkSearchFilters();t?($(".filter-date").val(t.date),$(".filter-classroom").val(t.classroom),$(".filter-status").val(t.status),e()):$(".homework-group-row").removeClass("hidden")}}()}if($("#assigned-homework-group-report, #assigned-homework-student-report").length&&$(".btn-delete-assigned-homework").click(function(){var t=$(this),e=t.closest("tr");confirm(_t("homework.confirm_deletion4","student",$(this).data("student-name")))&&(showAjaxSpinner(t),$.ajax({url:"/assigned_homeworks/"+$(this).data("id"),type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){e.remove(),hideAjaxSpinner(t)}))}),$("#assigned-homework-students-report").length){e=function(){var n=$(".filter-classroom").val();localStorageHelper.writeStudentHomeworkSearchFilters({classroom:n});var i=function(t){var e=t.find(".classroom-cell").data("classroom");return"all"!=n&&e!=n};$(".homework-student-row").each(function(t,e){var n=$(e);n.removeClass("hidden"),i(n)&&n.addClass("hidden")})};$(".btn-filter-update").click(function(){var t=$(this);showAjaxSpinner(t),window.setTimeout(function(){hideAjaxSpinner(t)},500),e()}),function(){if($("#assigned-homework-students-report").data("clear-filters"))localStorageHelper.deleteStudentHomeworkSearchFilters(),$(".homework-student-row").removeClass(
"hidden");else{var t=localStorageHelper.readStudentHomeworkSearchFilters();t?($(".filter-classroom").val(t.classroom),e()):$(".homework-student-row").removeClass("hidden")}}()}}),$(function(){if($("#certificates-index").length){var a={},o={},r=$(".certificate-new-container"),n=$(".table-certificates > tbody"),t=function(){r.find(".classroom > option").each(function(){var t=$(this),e=t.attr("value");if(e){var n=t.text();a[e]={id:e,name:n,students:[]}}}),r.find(".student > option").each(function(){var t=$(this),e=t.attr("value");if(e){var n=t.data("classroom-id"),i=t.text();a[n].students.push({id:e,name:i}),o[e]={classroom:a[n].name,student:i}}}),r.find(".student").empty()};r.find(".classroom").change(function(){var t=$(this);r.find(".btn-create-certificate").removeClass("hidden"),t.find(".placeholder").remove();var e=t.find("option:selected").attr("value");r.find(".student").empty(),a[e].students.forEach(function(t){r.find(".student").append("<option value='"+t.id+"'>"+t.name+"</option>")}),r.find(".student").removeAttr("disabled"),r.find(".btn").removeAttr("disabled"),$(".goal-testing-container").removeClass("hidden")}),r.find(".btn-create-certificate").click(function(){var n=$(this);showAjaxSpinner(n);var i=r.find(".student").val(),a="recognition";$.ajax({url:"/certificates/populate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({username:i,goal:a})}).done(function(t){hideAjaxSpinner(n),assert(t.success,"fail to populate certificate");var e={id:null,username:i,goal:a,name:t.result.name,email:t.result.email,issuer_name:t.result.issuer_name,issuer_female:t.result.issuer_female,cc_email:t.result.cc_email,default_cc_email:t.result.default_cc_email,title:t.result.title,description:t.result.description,template:t.result.template};certificateModal.show(e,function(){s()})})}),$(".pending-goals-container").length&&($pendingGoalContainer=$(".pending-goals-container"),$pendingGoalContainer.find(".btn-create-certificate-for-goal").click(function(){var n=$(this),i=n.closest(".pending-goal");showAjaxSpinner(n);var a=$(this).data("student"),o=$(this).data("goal");$.ajax({url:"/certificates/populate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({username:a,goal:o})}).done(function(t){hideAjaxSpinner(n),assert(t.success,"fail to populate certificate");var e={id:null,username:a,goal:o,name:t.result.name,email:t.result.email,issuer_name:t.result.issuer_name,issuer_female:t.result.issuer_female,cc_email:t.result.cc_email,default_cc_email:t.result.default_cc_email,title:t.result.title,description:t.result.description,template:t.result.template};certificateModal.fromGoal(e,function(){i.remove(),s()})})}));var i=$(".goal-testing-container");i.find(".btn-goal-testing").click(function(){$(this);var t=r.find(".student").val();if(t){var e=i.find(".goal-testing").val();$.ajax({url:"/certificates/goal/testing",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({username:t,goal:e})}).done(function(t){assert(t.success,"fail to create goal for testing"),alert("SUCCESS: goal created")})}else alert("no student is selected")}),n.on("click",".btn-certificate-delete",function(){var t=$(this),e=$(this).closest("tr").data("data").id;confirm(_t("certificate.confirm_deletion"))&&(showAjaxSpinner(t),$.ajax({url:"/certificates/"+e,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){s()}))}),n.on("click",".btn-certificate-email",function(){$(this);var t=$(this).closest("tr").data("data");certificateEmailModal.show(t)}),n.on("click",".btn-certificate-edit",function(){$(this);var t=$(this).closest("tr").data("data");certificateModal.show(t,function(){s()})});var s=function(){n.find("tr").each(function(){var t=$(this);t.hasClass("template")||t.remove()}),$.ajax({url:"/certificates/all",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){if(t.result.forEach(function(t){var e=n.find("tr.template").clone();e.removeClass("template"),e.removeClass("hidden"),e.find(".classroom").text(o[t.username].classroom),e.find(".student").text(o[t.username].student),e.find(".name").text(t.name),e.find(".title").text(t.title),e.find(".description").text(t.description),e.find(".created-at").text(t.created_at),e.find(".btn-certificate-download").attr("href","/certificates/"+t.id+"/download"),e.data("data",t),n.append(e)}),$(".alert.alert-youtube-video").addClass("hidden"),!t.result.length){$(".alert.alert-youtube-video").removeClass("hidden");var e=n.find("tr.template > td").length;n.append("<tr><td class='no-certificates' colspan='"+e+"'>"+_t("certificate.no_certificates")+"</td></tr>")}})};t(),s()}}),$(function(){if($("#classroom").length){$("#classroom").data("school-code");$("#add-classroom").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e=$(".classroom-name").val().trim(),n="english"==$(".classroom-language").val(),i=[];if($(".name-value").each(function(t,e){i.push($(e).text().toLowerCase())}),-1!==i.indexOf(e.toLowerCase()))return $(".classroom-name").markInvalid(_t("classroom.name_used")),!1;var a=$(this);showAjaxSpinner(a),$(".classroom-name").val("");var o={classroom_name:e,english:n,_method:"PUT"};$.ajax({url:"/classrooms",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o)}).done(function(t){var e={id:t.id,name:t.name,english:n,size:0};r(e,!0),hideAjaxSpinner(a)})}),$(document).on("click",".btn-edit",function(){var t=$(this).closest("tr").data("id"),e=n(t);classroomEditModal.show(e,function(){r(e)})}),$(document).on("click",".btn-delete",function(){var e=$(this),n=e.closest("tr"),i=n.data("id"),t=n.data("name");deleteWarningModal.show(t,function(){showAjaxSpinner(e);var t={_method:"DELETE"};$.ajax({url:"/classrooms/"+i,type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(){n.remove()})})});var n=function(t){var e=$("#classroom-"+t);return{id:e.data("id"),name:e.data("name"),english:e.data("english"),size:e.data("size")}},r=function(e,t){$(".classrooms-table-container").show();var n=$("#row-template").clone();n.removeClass("hidden"),Object.keys(e).forEach(function(t){n.data(t,e[t])}),n.find(".name-value").html(e.name);var i=e.size+(0==e.size?'<span class="students">'+_t("classroom.no_students")+"</span>":'<span class="students">'+_t("classroom.students")+"</span>");n.find(".language-value").html(e.english?_t("language.english"):_t("language.arabic")),n.find(".size-value").html(i),n.find(".btn-add-students").attr("href","/classroom/"+e.id+"/students");var a="classroom-"+e.id;$("#"+a).length?($("#"+a).before(n),$("#"+a).remove()):t?$("#row-template").parent().prepend(n):$("#row-template").before(n),n.attr("id","classroom-"+e.id)};$("#classroom-data-container")&&($(".classroom-data").each(function(t,e){var n=$(e),i={id:n.data("id").toString(),name:n.data("name").toString(),english:n.data("english"),size:n.data("size")};r(i,!1)}),$("#classroom-data-container").remove()),$(".btn-bulk-create").click(function(){var i=$(this);showAjaxSpinner(i);var t=$("body").data("teacher-id"),a=i.data("teacher-name");$.ajax({url:"/teachers/"+t+"/all_students",type:"GET",dataType:"json",contentType:"application/json"}).done(function(e){hideAjaxSpinner(i),Object.keys(e).forEach(function(t){e[t]=Object.values(e[t])});var t={};t[a]=e;var n=$("#classroom").data("remaining-count");studentsBulkCreateModal.show(t,n,!1,function(){location.reload()})})})}}),$(function(){var n=[],i=function(e){e&&(n=jQuery.grep(n,function(t){return t!=$(e.currentTarget).attr("src")})),n.length<5&&$("img[data-src]").each(function(){if(!(5<n.length)){var t=$(this).attr("data-src");$(this).removeAttr("data-src"),n.push(t),$(this).one("load",i).attr("src",t)}})};i()}),$(function(){if($("#grammar-index").length){var a=[],o=function(e){e&&(a=jQuery.grep(a,function(t){return t!=$(e.currentTarget).attr("src")}),$(this).data("grammar-sprite")&&($("#grammar-index .sprite-"+$(this).data("grammar-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove())),a.length<=5&&$("[data-grammar-sprite],[data-interactive-image-src]").each(function(){if(!(5<a.length))if($(this).data("interactive-image-src")){var t=$(this).attr("data-interactive-image-src");$(this).removeAttr("data-interactive-image-src"),a.push(t),$(this).one("load",o).attr("src",t)}else if($(this).data("grammar-sprite")){var e=$(this).attr("data-grammar-sprite"),n=$(this).attr("data-grammar-sprite-url");$(this).removeAttr("data-grammar-sprite"),a.push(n);var i=$("<img/>");i.data("grammar-sprite",e),i.one("load",o).attr("src",n)}})};o(),$(".grammar-btns").click(function(t){if(!$(t.target).hasClass("btn"))return!$(this).is(":visible")||($(this).hide(),!1);if($(t.target).parent().hasClass("first-btn"),$(t.target).parent().hasClass("second-btn")){if(!notifyFreeWorksheets($("#grammar-index"),10))return!1;var e=$(this);return printableLimitModal.downloadPrintable($(t.target).attr("data-href"),function(){e.parent().find("downloaded-tick").length||e.parent().append('<div class="downloaded-tick downloaded"></div>')}),!1}t.stopPropagation()}),$(".cell-box").click(function(){var t=$(this).find(".grammar-btns");return t.is(":visible")?t.hide():($("body").find(".grammar-btns").hide(),t.data("loaded")||(t.append($("#grammar-btns-template").clone().children()),t.find(".first-btn a").attr("href",t.data("play-url")),t.find(".second-btn a").attr("data-href",t.data("print-url")),t.data("loaded",!0)),$(this).find(".grammar-btns").show()),!1}),$("body").click(function(){$("body").find(".grammar-btns").hide()})}}),document.getElementById("live"))var console={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}};var _errorCounter=0;window.onerror=function(t,e,n,i,a){if("Script error."!=t){var o={msg:t,url:e,line:n,pageUrl:window.location.href};return i&&(o.column=i),a&&a.stack&&(o.errorObj=a.stack),3<++_errorCounter?!1:(jQuery.ajax({type:"POST",url:"/report/error",dataType:"json",data:o}).done(function(){console&&console.log&&console.log("JS error report successful."),document.getElementById("live")&&alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0635\u0641\u062d\u0629. \u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0635\u0641\u062d\u0629 \u0648\u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 \u0641\u064a \u062d\u0627\u0644 \u062a\u0643\u0631\u0631 \u0647\u0630\u0627 \u0627\u0644\u062e\u0637\u0623.")}).fail(function(){console&&console.error&&console.error("JS error report submission failed!")}),!1)}},$(function(){$("input").attr("autocorrect","off"),$("input").attr("autocapitalize","none")}),function(t){function e(t){return localStorage.getItem(t)}function n(t,e){localStorage.setItem(t,e)}function i(t){localStorage.removeItem(t)}t.readWhatsNewId=function(){return e("whats-new-id")},t.writeWhatsNewId=function(t){n("whats-new-id",t)},t.readGroupHomeworkSearchFilters=function(){var t=e("group-search-filter");return t&&(t=JSON.parse(t)),t},t.writeGroupHomeworkSearchFilters=function(t){n("group-search-filter",JSON.stringify(t))},t.deleteGroupHomeworkSearchFilters=function(){i("group-search-filter")},t.readStudentHomeworkSearchFilters=function(){var t=e("student-search-filter");return t&&(t=JSON.parse(t)),t},t.writeStudentHomeworkSearchFilters=function(t){n("student-search-filter",JSON.stringify(t))},t.deleteStudentHomeworkSearchFilters=function(){i("student-search-filter")},t.readHomeworkSearchFilters=function(){var t=e("hw-search-filter");return t&&(t=JSON.parse(t)),t},t.writeHomeworkSearchFilters=function(t){n("hw-search-filter",JSON.stringify(t))},t.deleteHomeworkSearchFilters=function(){i("hw-search-filter")}}(window.localStorageHelper=window.localStorageHelper||{},jQuery);var hex_chr="0123456789abcdef".split("");pX("hello"),$(function(){$(".password-reveal-container").length&&($(".password-reveal").click(function(){var t=$(this),e=t.closest(".password-reveal-container").find("input");t.toggleClass("revealed"),t.hasClass("revealed")?e.attr("type","text"):e.attr("type","password"),e.focus()}),(isMobile()||isTablet())&&($(".password-reveal").click(),$(".password-reveal-container input").blur()))});var _g_k_="UlhfMDZfMDFfMTVfVEM=",_g_t_=(new Date).getTime(),titleCase=function(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")},generateRandomPassword=function(){return Math.random().toString().slice(2,7)};$(function(){if($("#stripe-success").length){var e=0,n=$("#stripe-success").data("pid"),i=function(){$.ajax({url:"/payments/"+n+"/fulfill",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){t.success?$.ajax({url:"/payments/"+n+"/process",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){window.location.href=t.url}):window.location.href=t.url})},a=function(){$.ajax({url:"/payments/"+n+"/ready",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){t.result?i():6==(e+=1)?i():window.setTimeout(function(){a()},1500)})};window.setTimeout(function(){a()},1e3)}$("#stripe-pay-invoice .pay-invoice-data").length&&window.setTimeout(function(){var t=$("#stripe-pay-invoice .pay-invoice-data").data("invoice");$.ajax({url:"/payments/invoices/"+t,type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){if(t.success){var e=t.result;Stripe($("#stripe-pay-invoice").data("key")).redirectToCheckout({sessionId:e})}else assert(!1,"fail to init invoice item")})},1e3),$("#stripe-add-students").length&&($(".number-of-licenses").change(function(){var t=$(".number-of-licenses").val(),e=parseFloat($(".fee-per-student").text());$(".add-students-form .add-student-fees").text(t*e)}),$(".purchase-btn").click(function(t){var e=$(this);t.preventDefault();var n=$(".number-of-licenses").val();return showAjaxSpinner(e),$.ajax({url:"/payments/items/student?quantity="+n,type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){if(t.success){var e=t.result;Stripe($("#stripe-add-students").data("key")).redirectToCheckout({sessionId:e})}else assert(!1,"fail to init purchase item")}),!1})),$("#stripe-vodafone").length&&($(".vodafone-form .vodafone-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var i=$(this),e=$(".vodafone-input").val().trim();showAjaxSpinner(i);var n={input:e};$.ajax({url:"/vodafone/validate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(t){if(!t.success)return $(".vodafone-input").markInvalid(_t("stripe.vodafone.validation")),void hideAjaxSpinner(i);var e=t.result.name,n=t.result.email;$(".vodafone-payment-options").find(".username").text(e),$(".vodafone-payment-options").find(".email").text(n),$(".vodafone-form").slideUp(400,function(){$(".vodafone-payment-options").slideDown(400)})})}),$(".vodafone-payment-options .btn-purchase").click(function(t){var e=$(this);t.preventDefault();var n=e.data("item"),i=$(".vodafone-payment-options .username").text();showAjaxSpinner(e);var a={reseller:!0,discount:"vodafone",username:i,cancel_url:"/vodafone"};return $.ajax({url:"/payments/items/"+n,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){if(t.success){var e=t.result;Stripe($("#stripe-vodafone").data("key")).redirectToCheckout({sessionId:e})}else assert(!1,"fail to init purchase item")}),!1}))}),$(function(){!$("body").hasClass("mobile")&&isTablet()&&$("body").addClass("tablet")});var _g_translationTable={"classroom.name_used":["\u0627\u0633\u0645 \u0627\u0644\u0635\u0641 \u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0646 \u0642\u0628\u0644","Classroom name is used before"],"classroom.no_students":["(\u0644\u0627 \u064a\u0648\u062c\u062f \u0637\u0644\u0627\u0628)","(has no students)"],"classroom.students":["(\u0637\u0627\u0644\u0628)","(students)"],"classroom.add_students":["\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0644\u0627\u0628","Add Students"],"classroom.delete_classroom":["\u062d\u0630\u0641 \u0627\u0644\u0635\u0641","Delete Classroom"],"student.update_success":["\u0644\u0642\u062f \u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a","Details were updated successfully"],"teacher.missing_email":["\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0644\u0644\u0645\u0639\u0644\u0645 \u0623\u0648\u0644\u0627\u060c \u062b\u0645 \u0625\u0639\u0627\u062f\u0629 \u0645\u062d\u0627\u0648\u0644\u0629 \u0625\u0631\u0633\u0627\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u062e\u0648\u0644.","Please enter the teacher's email, and then try later to email the login details."],"teacher.reset_password":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0644\u0644\u0645\u0639\u0644\u0645 %{name} \u061f","Are you sure you want to reset the password for the teacher %{name}?"],"teacher.reset_password_confirmation":["\u0644\u0642\u062f \u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u0636\u0628\u0637 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0644\u062a\u0635\u0628\u062d ","Password was reset successfully to "],"teacher.update_success":["\u0644\u0642\u062f \u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a","Details were updated successfully"],"users.new.email_mismatch":["\u0647\u0646\u0627\u0643 \u0627\u062e\u062a\u0644\u0627\u0641 \u0641\u064a \u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0639\u0627\u062f\u0629 \u0627\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.","There was a mismatch in confirming the email. Please re-enter your email and try again."],"homework.added":["\u062a\u0645\u062a \u0627\u0644\u0627\u0636\u0627\u0641\u0629","Added to Homework"],"homework.add":["\u0625\u0636\u0627\u0641\u0629 \u0625\u0644\u0649 \u0627\u0644\u0648\u0627\u062c\u0628","Add to Homework"],"homework.lesson_delete":["\u062d\u0630\u0641 \u0627\u0644\u062a\u0645\u0631\u064a\u0646","Delete Lesson"],"homework.show_lessons":["\u0627\u0638\u0647\u0627\u0631 \u0627\u0644\u062f\u0631\u0648\u0633","Show Lessons"],"homework.hide_lessons":["\u0627\u062e\u0641\u0627\u0621 \u0627\u0644\u062f\u0631\u0648\u0633","Hide Lessons"],"homework.confirm_deletion":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u063a\u0628 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0648\u0627\u062c\u0628\u061f","Are you sure you want to delete the homework?"],"homework.confirm_deletion2":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0648\u0627\u062c\u0628 \u0645\u0646 \u062d\u0633\u0627\u0628\u0643 \u0648\u062d\u0633\u0627\u0628 \u062c\u0645\u064a\u0639 \u0637\u0644\u0627\u0628\u0643\u061f","Are you sure you want to delete the homework from your account and your students accounts?"],"homework.students":["\u0637\u0644\u0627\u0628 \u0635\u0641","Students of"],"homework.all_students":["\u062c\u0645\u064a\u0639 \u0637\u0644\u0627\u0628 \u0627\u0644\u0635\u0641","All Students"],"homework.students_no_selection":["\u0644\u0645 \u064a\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0623\u064a \u0645\u0646 \u0627\u0644\u0637\u0644\u0627\u0628. \u064a\u0631\u062c\u0648 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0637\u0644\u0627\u0628 \u062b\u0645 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.","No students were selected. Please select the students and try again."],"homework.confirm_deletion3":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0648\u0627\u062c\u0628 \u0645\u0646 \u0639\u0646\u062f \u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0644\u0627\u0628\u061f","Are you sure you want to delete the homework from your students accounts?"],"homework.confirm_deletion4":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0648\u0627\u062c\u0628 \u0645\u0646 \u0639\u0646\u062f \u0627\u0644\u0637\u0627\u0644\u0628 %{student}\u061f","Are you sure you want to delete this homework from the student %{student}?"],"notifyjs.remaining":["\u0628\u0627\u0642\u064a %{remaining} \u0623\u0648\u0631\u0627\u0642  \u0644\u0644\u062a\u062c\u0631\u0628\u0629 \u0627\u0644\u0645\u062c\u0627\u0646\u064a\u0629.","You have %{remaining} free printables to download."],"notifyjs.end_trial":["\u0627\u0646\u062a\u0647\u062a \u0627\u0644\u062a\u062c\u0631\u0628\u0629 \u0627\u0644\u0645\u062c\u0627\u0646\u064a\u0629 \u0644\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644. \u0644\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0623\u0648\u0631\u0627\u0642\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643.","You downloaded all the free printables. Please subscribe to download more."],"sessions.joined_accounts":["\u0647\u0644 \u062a\u0631\u063a\u0628 \u0641\u064a \u0627\u0644\u0630\u0647\u0627\u0628 \u0625\u0644\u0649 \u062d\u0633\u0627\u0628 %{account} \u061f","Do you like to switch to %{account} ?"],"language.english":["\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629","English"],"language.arabic":["\u0627\u0644\u0639\u0631\u0628\u064a\u0629","Arabic"],"language.change":["\u0647\u0644 \u062a\u0631\u063a\u0628 \u0641\u064a \u062a\u063a\u064a\u064a\u0631 \u0644\u063a\u0629 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0637\u0644\u0627\u0628 \u0645\u0646 \u0627\u0644\u0644\u063a\u0629 %{first} \u0625\u0644\u0649 \u0627\u0644\u0644\u063a\u0629 %{second}\u061f","Do you want to change the platform default langauge for the classroom students from %{first} to %{second}?"],"reports.chart.hw_activities":["\u0639\u062f\u062f \u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0648\u0627\u062c\u0628\u0627\u062a","Homework Activities"],"reports.chart.activities":["\u0639\u062f\u062f \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0643\u0644\u064a","Total Activities"],"reports.chart.sections":["\u0639\u062f\u062f \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0644\u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0645\u0646\u0635\u0629","Number of Section Activities"],"reports.hw.complete":["\u062a\u0645 \u0625\u0646\u062c\u0627\u0632\u0647","completed"],"reports.hw.incomplete":["\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631","pending"],"reports.status.hw":["\u062a\u0627\u0628\u0639 \u0644\u0648\u0627\u062c\u0628","HW Activity"],"reports.status.free":["\u0646\u0634\u0627\u0637 \u062d\u0631","Free Activity"],"certificate.confirm_deletion":["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u063a\u0628 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0634\u0647\u0627\u062f\u0629\u061f","Are you sure you want to delete the certificate?"],"certificate.no_certificates":["\u0644\u0627 \u064a\u0648\u062c\u062f \u0634\u0647\u0627\u062f\u0627\u062a \u0645\u0635\u062f\u0631\u0629 \u0644\u0644\u0637\u0644\u0627\u0628","No certificates were issued"],"bulk_students.validation.single_teacher_line_invalid":["\u0639\u062f\u062f \u0627\u0644\u062e\u0627\u0646\u0627\u062a ( %{count} ) \u063a\u064a\u0631 \u0635\u062d\u064a\u062d. \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0633\u0637\u0631 \u0644\u064a\u0635\u0628\u062d: \u0627\u0644\u0635\u0641\u060c\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628\u060c\u0628\u0631\u064a\u062f \u0627\u0644\u0637\u0627\u0644\u0628","Number of fields ( %{count} ) is incorrect. Line should be: class name,student name,student email"],"bulk_students.validation.multiple_teachers_line_invalid":["\u0639\u062f\u062f \u0627\u0644\u062e\u0627\u0646\u0627\u062a ( %{count} ) \u063a\u064a\u0631 \u0635\u062d\u064a\u062d. \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0633\u0637\u0631 \u0644\u064a\u0635\u0628\u062d: \u0627\u0644\u0645\u0639\u0644\u0645\u060c\u0627\u0644\u0635\u0641\u060c\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628\u060c\u0628\u0631\u064a\u062f \u0627\u0644\u0637\u0627\u0644\u0628","Number of fields ( %{count} ) is incorrect. Line should be: teacher,class name,student name,student email"],"bulk_students.validation.teacher_unknown":["\u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0639\u0644\u0645 ( %{teacher} ) \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0645\u0646\u0635\u0629","Teacher account ( %{teacher} ) does not exist in the platform"],"bulk_students.validation.student_exists":["\u0627\u0644\u0637\u0627\u0644\u0628 ( %{student} ) \u0644\u062f\u064a\u0647 \u062d\u0633\u0627\u0628 \u0641\u064a \u0627\u0644\u0635\u0641 ( %{className} ) \u0648\u0644\u0627 \u064a\u0645\u0643\u0646 \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u062b\u0627\u0646 \u0644\u0647","Student ( %{student} ) already has an account in class ( %{className} )"],"bulk_students.validation.class_alphanumeric":["\u0627\u0633\u0645 \u0627\u0644\u0635\u0641 ( %{className} ) \u064a\u062c\u0628 \u0623\u0646 \u064a\u062a\u0643\u0648\u0646 \u0641\u0642\u0637 \u0645\u0646 \u0623\u062d\u0631\u0641 \u0648\u0623\u0631\u0642\u0627\u0645 \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0648\u0628\u062f\u0648\u0646 \u0641\u0631\u0627\u063a\u0627\u062a","Class name ( %{className} ) should only contain letters and numbers with no spaces"],"bulk_students.validation.name_alphanumeric":["\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628 ( %{studentName} ) \u064a\u062d\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0628\u0627\u0644\u0623\u062d\u0631\u0641 \u0627\u0644\u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629","Student name ( %{studentName} ) should only contain English letters"],"bulk_students.validation.email_invalid":["\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a ( %{email} ) \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","Email ( %{email} ) is invalid"],"bulk_students.validation.student_duplicate":["\u0647\u0630\u0627 \u0627\u0644\u0633\u0637\u0631 \u0645\u0643\u0631\u0631 \u0641\u064a \u0627\u0644\u0645\u0644\u0641","This line is duplicated in the file"],"bulk_students.language.arabic":["\u0627\u0644\u0639\u0631\u0628\u064a\u0629","Arabic"],"bulk_students.language.english":["\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629","English"],"bulk_students.student":["(\u0637\u0627\u0644\u0628)","(students)"],"bulk_students.create_request":["\u0637\u0644\u0628 \u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0627\u0628","request to add students"],"second_teacher.validation.line_invalid":["\u0639\u062f\u062f \u0627\u0644\u062e\u0627\u0646\u0627\u062a ( %{count} ) \u063a\u064a\u0631 \u0635\u062d\u064a\u062d. \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0633\u0637\u0631 \u0644\u064a\u0635\u0628\u062d: \u0645\u0639\u0644\u0645 \u0627\u0644\u0635\u0641,\u0627\u0633\u0645 \u0627\u0644\u0635\u0641,\u0627\u0644\u0645\u0639\u0644\u0645 \u0627\u0644\u062b\u0627\u0646\u064a","Number of fields ( %{count} ) is incorrect. Line should be: class teacher,class name,second teacher"],"second_teacher.validation.teacher_unknown":["\u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u0639\u0644\u0645 ( %{teacher} ) \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0645\u0646\u0635\u0629","Teacher account ( %{teacher} ) does not exist in the platform"],"second_teacher.validation.classroom_unknown":["\u0644\u0627 \u064a\u0648\u062c\u062f \u0635\u0641 ( %{class} ) \u0644\u062f\u0649 \u0627\u0644\u0645\u0639\u0644\u0645 ( %{teacher} )","No class ( %{class} ) exists for teacher ( %{teacher} )"],"second_teacher.validation.classroom_missing_email":["\u0628\u0639\u0636 \u0627\u0644\u0637\u0644\u0627\u0628 \u0644\u064a\u0633 \u0644\u062f\u064a\u0647\u0645 \u0628\u0631\u064a\u062f \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0641\u064a \u0627\u0644\u0635\u0641 ( %{class} ) \u0627\u0644\u062a\u0627\u0628\u0639 \u0644\u0644\u0645\u0639\u0644\u0645 ( %{teacher} )","Some students have no emails in class ( %{class} ) for teacher ( %{teacher} )"],"second_teacher.validation.classroom_exists":["\u0647\u0646\u0627\u0643 \u0635\u0641 ( %{class} ) \u0644\u062f\u0649 \u0627\u0644\u0645\u0639\u0644\u0645 \u0627\u0644\u062b\u0627\u0646\u064a ( %{teacher} ) \u0648\u0628\u0627\u0644\u062a\u0627\u0644\u064a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0635\u0641 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649","Class ( %{class} ) already exists for second teacher ( %{teacher} ) and cannot be recreated"],"second_teacher.validation.duplicate":["\u0647\u0630\u0627 \u0627\u0644\u0633\u0637\u0631 \u0645\u0643\u0631\u0631 \u0641\u064a \u0627\u0644\u0645\u0644\u0641","This line is duplicated in the file"],"second_teacher.create_request":["\u0637\u0644\u0628 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0639\u0644\u0645\u064a\u0646","request to add teachers"],"school_students_delete.student":["(\u0637\u0627\u0644\u0628)","(students)"],"school_students_delete.delete_request":["\u0637\u0644\u0628 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641","request to delete"],"school_students_delete.all_classes":["\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0644\u0645\u064a\u0646 - \u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0641\u0648\u0641 (%{counter} \u0637\u0627\u0644\u0628)","All Teachers - All Classes (%{counter} students)"],"school_students_delete.teacher_all_classes":["\u0627\u0644\u0645\u0639\u0644\u0645 %{teacher} - \u062c\u0645\u064a\u0639 \u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u0639\u0644\u0645 (%{counter} \u0637\u0627\u0644\u0628)","Teacher %{teacher} - All Teacher Classes (%{counter} students)"],"school_students_delete.teacher_class":["\u0627\u0644\u0645\u0639\u0644\u0645 %{teacher} - \u0627\u0644\u0635\u0641 %{class} (%{counter} \u0637\u0627\u0644\u0628)","Teacher %{teacher} - Class %{class} (%{counter} students)"],"students_move_modal.error.same_teacher":["\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0641\u0633 \u0627\u0644\u0645\u0639\u0644\u0645. \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0635\u062d\u064a\u062d \u0630\u0644\u0643 \u0648\u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.","You selected the same teacher. Please correct this and try again."],"students_move_modal.error.select_students":["\u0644\u0645 \u064a\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0637\u0644\u0627\u0628. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0637\u0644\u0627\u0628 \u0639\u0646 \u0637\u0631\u064a\u0642 \u0627\u0644\u0636\u063a\u0637 \u0639\u0644\u0649 \u0623\u0633\u0645\u0627\u0626\u0647\u0645.","No students were selected. Please select students by clicking on their names."],"students_move_modal.classroom.existing":["\u0627\u0644\u0635\u0641 %{classroomName} - \u0627\u0644\u0645\u0639\u0644\u0645 %{teacherName} ( &rlm;%{studentsCount} \u0637\u0627\u0644\u0628 )","Class %{classroomName} - Teacher %{teacherName} ( %{studentsCount} students )"],"students_move_modal.classroom.new":["\u0627\u0644\u0635\u0641 %{classroomName} - \u0627\u0644\u0645\u0639\u0644\u0645 %{teacherName} ( \u0635\u0641 \u062c\u062f\u064a\u062f )","Class %{classroomName} - Teacher %{teacherName} ( new class )"],"student_settings.language.arabic":["\u0627\u0644\u0639\u0631\u0628\u064a\u0629","Arabic"],"student_settings.language.english":["\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629","English"],"teacher_update_details.change_username":[
"\u0644\u0642\u062f \u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u0627\u0633\u0645 \u0627\u0644\u0645\u0639\u0644\u0645. \u0647\u0644 \u062a\u0631\u063a\u0628 \u0641\u064a \u062a\u063a\u064a\u064a\u0631 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0623\u064a\u0636\u0627\u061f","Teacher name was changed. Do you want to change the username as well?"],"add_teacher.validation.name_used":["\u0627\u0644\u0627\u0633\u0645 \u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0646 \u0642\u0628\u0644 \u0645\u0639\u0644\u0645 \u0622\u062e\u0631","Name is used by another teacher"],"delete_warning.invalid_password":['\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629. \u064a\u0645\u0643\u0646\u0643 \u0625\u0639\u0627\u062f\u0629 \u0636\u0628\u0637\u0647\u0627 \u0645\u0646 <a href="/users/account#change-password">\u0635\u0641\u062d\u0629 \u062d\u0633\u0627\u0628\u064a</a>.','Password is incorrect. You can reset it from <a href="/users/account#change-password">My Account</a>.'],"stripe.vodafone.validation":["\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u062a\u0635\u062d\u064a\u062d \u062b\u0645 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.","No user exists for the given details."],"texts-search.view":["\u0645\u0634\u0627\u0647\u062f\u0629","view"],"texts-search.level":["\u0627\u0644\u0645\u0633\u062a\u0648\u0649: ","Level: "],"texts-search.type":["\u0627\u0644\u0646\u0648\u0639: ","Type: "]},_t=function(t){_g_translationTable[t]||assert(!1,"fail to lookup translation key: "+t);var e=_isEnglish()?_g_translationTable[t][1]:_g_translationTable[t][0],n=Array.from(arguments);if(1<n.length)for(var i=1;i<n.length;){var a=n[i++],o=n[i++];a="%{"+a+"}",assert(-1!==e.indexOf(a),"translation key "+a+" is not found in "+e),e=e.replace(a,o)}return e},_isEnglish=function(){return $("body").hasClass("english")};$(function(){var e=$("body").hasClass("english"),n=function(t,e){e(""!=$.trim($(t).val()))},i=function(t,e){e($.trim($(t).val()).length<=$(t).data("max"))},a=function(t,e){e($(t).data("min")<=$.trim($(t).val()).length)},o=function(t,e){e(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test($(t).val()))},r=function(t,e){e($(t).val()==$("input[data-confirmed]").val())},s=function(t,e){e(/^[0-9A-Za-z]+$/.test($(t).val()))},l=function(t,e){e(/[A-Za-z]/.test($(t).val()))},d=function(t,e){e(/^[0-9A-Za-z_\-\.]+$/.test($(t).val()))},c=function(t,e){e(-1==$(t).val().indexOf(" "))},u=function(t,e){e(/^[0-9A-Za-z_\-\. ]+$/.test($(t).val()))},f=function(t,e){e($.trim($(t).val()).split(" ").length<=$(t).data("words-limit"))},h=function(t,e){var n=$(t).data("prefix"),i=$(t).val();n&&(i=n+i),w(t,i,"/users/exists",{name:i},e)},p=function(t,e){var n=$(t).val();w(t,n,"/abbr/exists",{abbr:n},e)},m=function(t,e){var n=$(t).val();w(t,n,"/users/exists",{email:n},e)},g=function(t,e){var n=$(t).val();w(t,n,"/users/exists",{email:n},e,!0)},v=function(t,e){e(/^\d{1,3}\.?\d{0,2}$/.test($(t).val()))},y=function(t,e){return!(!$(t).attr("ajax-value")||e!=$(t).attr("ajax-value"))},b=function(t,e){$(t).attr("in-ajax",!0),$(t).attr("ajax-value",e)},x=function(t,e,n){return e==$(t).attr("ajax-value")&&($(t).removeAttr("in-ajax"),$(t).attr("ajax-result",n),!0)},w=function(n,i,t,e,a,o){if(y(n,i)){var r="false"==$(n).attr("ajax-result");a(!r)}else b(n,i),$.ajax({url:t,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(t){var e=o?t.exists:!t.exists;x(n,i,e)&&a(e)})},k="[data-required],[data-max],[data-min],[data-positive],[data-letters-and-numbers],[data-contains-letter],[data-alphanumeric],[data-english-text],[data-confirmation],[data-username],[data-email],[data-liam],[data-unique-email],[data-existing-email],[data-number],[data-money],[data-select-max],[data-numbers-filter],[data-abbr]";$(document).on("change",k,function(){if(!$(this).is(":hidden")){$(this).is("input:text")&&$(this).val($(this).trimval());var t=!0;t&&$(this).hasData("required")&&(t=S(this,n,e?"required":"\u0627\u0644\u062e\u0627\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629")),""!=$(this).trimval()&&(t&&$(this).hasData("numbers-filter")&&$(this).val($(this).val().replace(/[^0-9]/g,"")),t&&$(this).hasData("max")&&(t=S(this,i,e?"maximum "+$(this).data("max")+" letters":"\u0623\u0643\u062b\u0631 \u0645\u0646 "+$(this).data("max")+" \u062d\u0631\u0648\u0641")),t&&$(this).hasData("min")&&(t=S(this,a,e?"minimum "+$(this).data("min")+" letters":"\u0623\u0642\u0644 \u0645\u0646 "+$(this).data("min")+" \u062d\u0631\u0648\u0641")),t&&($(this).hasData("email")||$(this).hasData("liam"))&&(t=S(this,o,e?"invalid email":"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")),t&&$(this).hasData("confirmation")&&(t=S(this,r,e?"Doesn't match":"\u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629")),t&&$(this).hasData("letters-and-numbers")&&(t=S(this,s,e?"Should be an English alphanumeric":"\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0623\u062d\u0631\u0641 \u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0648\u0623\u0631\u0642\u0627\u0645 \u0641\u0642\u0637")),t&&$(this).hasData("contains-letter")&&(t=S(this,l,e?"Should contain a letter":"\u0627\u0644\u0631\u062c\u0627\u0621 \u0623\u0646 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0623\u062d\u0631\u0641 \u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629")),t&&$(this).hasData("alphanumeric")&&(t=S(this,c,e?"Should not contain a space":"\u0627\u0644\u0631\u062c\u0627\u0621 \u0639\u062f\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0645\u0633\u0627\u0641\u0629 (space)"))&&(t=S(this,d,e?"Should be an English alphanumeric":"\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0623\u062d\u0631\u0641 \u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0648\u0623\u0631\u0642\u0627\u0645 \u0641\u0642\u0637")),t&&$(this).hasData("english-text")&&(t=S(this,u,e?"Should be an English alphanumeric":"\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0623\u062d\u0631\u0641 \u0623\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0648\u0623\u0631\u0642\u0627\u0645")),t&&$(this).hasData("number")&&(t=S(this,v,e?"Invalid number":"\u0631\u0642\u0645 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")),t&&$(this).hasData("username")&&(t=S(this,h,e?"Username is taken":"\u0627\u0644\u0627\u0633\u0645 \u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0646 \u0642\u0628\u0644 \u0645\u0634\u062a\u0631\u0643 \u0622\u062e\u0631\u060c \u064a\u0645\u0643\u0646\u0643 \u062a\u062c\u0631\u0628\u0629 <b style='font-family:arial;color:red;'>"+$(this).val()+Math.floor(100*Math.random()+1))+"</b>"),t&&$(this).hasData("abbr")&&(t=S(this,p,e?"This abbreviation is taken, please enter another one":"\u0631\u0645\u0632 \u0627\u0644\u0645\u062f\u0631\u0633\u0629 \u0645\u0633\u062a\u062e\u062f\u0645\u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0622\u062e\u0631")),t&&$(this).hasData("existing-email")&&(t=S(this,g,e?"Email is not used":"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0645\u0633\u062a\u062e\u062f\u0645")),t&&$(this).hasData("words-limit")&&(t=S(this,f,e?"maximum "+$(this).data("words-limit")+" words":"\u0623\u0643\u062b\u0631 \u0645\u0646 "+$(this).data("words-limit")+" \u0643\u0644\u0645\u0627\u062a")),t&&$(this).hasData("unique-email")&&(t=S(this,m,e?"Email is already used":"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0645\u0633\u062a\u062e\u062f\u0645\u060c \u0646\u0631\u062c\u0648 \u0625\u062f\u062e\u0627\u0644 \u0628\u0631\u064a\u062f \u0622\u062e\u0631<br><a class='retrieve-password-link' href='/signin/forgot?email="+$(this).val()+"'>** \u0627\u0630\u0627 \u0643\u0627\u0646 \u0647\u0630\u0627 \u0647\u0648 \u0628\u0631\u064a\u062f\u0643\u060c \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 \u0644\u0627\u0633\u062a\u0631\u062c\u0627\u0639 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u062e\u0648\u0644 \u0644\u0647\u0630\u0627 \u0627\u0644\u0628\u0631\u064a\u062f</a>")))}});var _=function(t){$(k,$(t)).change()},S=function(n,t,i){var a=!0;return $(n).removeFormValidation(),t(n,function(t){if(a=t)$(n).closest(".form-group").addClass("has-success");else{var e=$(n).closest(".form-group");e.hasClass("has-error")||(e.addClass("has-error"),e.errorDiv(i))}}),a};$.fn.markInvalid=function(t){var e=$(this).closest(".form-group");e.hasClass("has-error")||(e.removeClass("has-success"),e.addClass("has-error"),e.errorDiv(t))},$.fn.errorDiv=function(t){$(this).find(".error-msg").length||$(this).find("input,select,textarea").parent().append("<div class='error-msg'></div>"),$(this).find(".error-msg").html(t)},$.fn.hasData=function(t){return $(this).attr("data-"+t)!==undefined},$.fn.removeFormValidation=function(){$(this).closest(".form-group").removeClass("has-error"),$(this).closest(".form-group").removeClass("has-success"),$(this).closest(".form-group").find(".error-msg").text("")},$.fn.resetFormValidation=function(){$(this).find(".form-group").removeClass("has-error"),$(this).find(".form-group").removeClass("has-success"),$(this).find(".form-group").find(".error-msg").text("")},$.fn.valid=function(){return!($(this).hasClass("has-error")||0<$(this).find(".has-error").length)},$.fn.validate=function(){var t=$(this).closest("form");return _(t),t.valid()},$.fn.enforceNumbers=function(){$(this).val($(this).val().replace(/\D/g,""))},$("[data-enforce-numbers]").keyup(function(){$(this).enforceNumbers()})}),$.fn.trimval=function(){return $.trim($(this).val())},$(function(){if($(".whats-new").length&&!isMobile()&&$(".upper-section-message").length){var t=$(".whats-new").data("whats-new-id"),e=localStorageHelper.readWhatsNewId();t!=e?(window.setTimeout(function(){$(".whats-new").slideDown()},1e3),$(".whats-new .hide-on-click").click(function(){$(".whats-new").slideUp(),localStorageHelper.writeWhatsNewId(t)})):$(".whats-new").remove()}}),$(function(){if($(".edit-homework-container").length){var o=function(){if(!$("#edited-homework").length)return null;if(!$("#edited-homework").data("edited-homework-id"))return null;var t=$("#edited-homework");return{id:t.data("edited-homework-id"),title:t.data("edited-homework-title"),description:t.data("edited-homework-description")}},c=function(){if(!$(".edited-homework-lesson").length)return[];var i=[];return $(".edited-homework-lesson").each(function(t,e){var n={id:$(e).data("lesson-id"),lesson_type:$(e).data("lesson-type"),lesson_number:$(e).data("lesson-number")};i.push(n)}),i},a=function(t,e){var n=$(".add-homework[data-lesson-type='"+t+"'][data-lesson-number='"+e+"']");n.addClass("added"),n.text(_t("homework.added"))},r=function(t,e){var n=$(".add-homework[data-lesson-type='"+t+"'][data-lesson-number='"+e+"']");n.removeClass("added"),n.text(_t("homework.add"))},t=function(){$(".add-homework.added").text(_t("homework.add")),$(".add-homework.added").removeClass("added")},s=function(){var t=c(),e=0,n=0,i=0,a=0,o=0,r=0,s=0,l=0;t.forEach(function(t){"game"==t.lesson_type||"lesson"==t.lesson_type?e+=1:"interactive-worksheet"==t.lesson_type?n+=1:"grammar"==t.lesson_type?i+=1:"story"==t.lesson_type?a+=1:"storysheet"==t.lesson_type?o+=1:"text"==t.lesson_type?r+=1:"textsheet"==t.lesson_type?s+=1:"sightword"==t.lesson_type&&(l+=1)});var d=function(t,e){t.text(e),t.parent().removeClass("flash"),window.setTimeout(function(){t.parent().addClass("flash")},0)};$(".homework-games-count").text()!=e&&d($(".homework-games-count"),e),$(".homework-worksheets-count").text()!=n&&d($(".homework-worksheets-count"),n),$(".homework-grammar-count").text()!=i&&d($(".homework-grammar-count"),i),$(".homework-stories-count").text()!=a+o&&d($(".homework-stories-count"),a+o),$(".homework-texts-count").text()!=r+s&&d($(".homework-texts-count"),r+s),$(".homework-sightwords-count").text()!=l&&d($(".homework-sightwords-count"),l)},l=function(t){$(".edit-homework-container").append("<div id='edited-homework'></div>"),$("#edited-homework").attr("data-edited-homework-id",t),$("#edited-homework").attr("data-edited-homework-title",""),$("#edited-homework").attr("data-edited-homework-description","")},d=function(t,e,n,i){$("#edited-homework").append('<div class="edited-homework-lesson"></div>');var a=$("#edited-homework .edited-homework-lesson").last();if(a.attr("data-lesson-id",t),a.attr("data-lesson-type",e),a.attr("data-lesson-number",n),"game"==e)a.append('<img class="game-img" src="'+i+'">');else if("story"==e)a.append('<img class="story-img" src="'+i+'">');else if("interactive-worksheet"==e){var o=(l=n.split("-")).pop(),r=l.join("-"),s=1==o.length?"0"+o:o;a.append('<div class="worksheet-img sprite sprite-'+r+" sprite-"+s+'" style="background-image: url('+i+')"> </div>')}else if("grammar"==e){o=(l=n.split("-")).pop(),r=l.join("-"),s=1==o.length?"0"+o:o;a.append('<div class="grammar-img sprite sprite-'+r+" sprite-"+s+'" style="background-image: url('+i+')"> </div>')}else if("storysheet"==e)a.append('<img class="storysheet-img" src="'+i+'">');else if("lesson"==e)a.append('<img class="lesson-img" src="'+i+'">');else if("text"==e)a.append('<img class="text-img" src="'+i+'">');else if("textsheet"==e){t=(l=n.split("|"))[0],s=["multiple-choices","true-or-false","vocabularies"].indexOf(l[1])+1;a.append('<div class="textsheet-img sprite sprite-'+t+" sprite-"+s+'" style="background-image: url('+i+')"> </div>')}else if("sightword"==e){var l,d=(l=n.split("|"))[0],c=l[1];"review"==(e="sentence-search"==d||0===d.indexOf("assessment")?"review":"word")?0===d.indexOf("assessment")?spritesheetIndex=1:"sentence-search"==d&&(spritesheetIndex=2):"word"==e&&("lesson"==d?spritesheetIndex=1:0===d.indexOf("letters-")?spritesheetIndex=2:0===d.indexOf("words-")?spritesheetIndex=3:"sentence-in-frame"==d&&(spritesheetIndex=4)),assert(-1!=spritesheetIndex,"fail to find spritsheet index for #{lessonNumber}"),a.append('<div class="sightword-img sprite sprite-'+e+"-"+c+" number-"+spritesheetIndex+'" style="background-image: url('+i+')"> </div>')}a.append('<div class="edited-homework-lesson-remove"><a class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span>'+_t("homework.lesson_delete")+"</a></div>")},e=function(){o()&&c().forEach(function(t){a(t.lesson_type,t.lesson_number)}),s(),$("#edited-homework").length&&$(".edit-homework-container").slideDown()},n=function(){$("#edited-homework").remove(),$(".edit-homework-container").hide(),$(".show-homework-details").removeClass(".details-shown"),$(".show-homework-details").text(_t("homework.show_lessons")),t()};e(),$(".add-homework").click(function(){if(!$(this).hasClass("added")){var e=$(this).data("lesson-type"),n=$(this).data("lesson-number");a(e,n);var t=function(e){$.ajax({url:"/homeworks",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({title:"",description:"",editing:!0})}).done(function(t){l(t.id),$(".edit-homework-container").slideDown(),e&&e()})},i=function(){$.ajax({url:"/homeworks/"+o().id+"/homework_lessons",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({homework_id:o().id,lesson_type:e,lesson_number:n})}).done(function(t){d(t.id,e,n,t.thumb_url),s()})};o()?i():t(function(){i()})}}),$(document).on("click",".edited-homework-lesson-remove",function(){var t=o(),e=$(this).parent(),n=e.data("lesson-id"),i=e.data("lesson-type"),a=e.data("lesson-number");e.remove(),s(),r(i,a),$.ajax({url:"/homeworks/"+t.id+"/homework_lessons/"+n,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){})}),$(".show-homework-details").click(function(){$(".show-homework-details").hasClass(".details-shown")?($(".show-homework-details").removeClass(".details-shown"),$(".show-homework-details").text(_t("homework.show_lessons")),$("#edited-homework").slideUp()):($(".show-homework-details").addClass(".details-shown"),$(".show-homework-details").text(_t("homework.hide_lessons")),$("#edited-homework").slideDown())}),$(".finish-editing-homework").click(function(){var t=o(),e=$("body").data("teacher-id");createHomeworkModal.show(e,t.id,function(){n()})}),$(document).on("click",".delete-edited-homework",function(){if(confirm(_t("homework.confirm_deletion"))){var t=o();$.ajax({url:"/homeworks/"+t.id,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){n()})}});var i=function(e){$.ajax({url:"/homeworks/current/editable?t="+Date.now(),type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){t.id&&(l(t.id),t.lessons.forEach(function(t){d(t.id,t.lesson_type,t.lesson_number,t.thumb_url),s()}),e&&e())})},u=!1;document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?u&&(u=!1,n(),i(function(){e()})):u=!0})}}),$(document).ready(function(){$(".homework-lesson-image.clickable").click(function(){location.href=$(this).data("url")})}),$(function(){if($("#homeworks-index").length){$(".btn-homework-delete").click(function(){if(confirm(_t("homework.confirm_deletion2"))){var t=$(this).closest(".homework-cell").data("homework-id");$(this).closest(".homework-cell").remove(),$.ajax({url:"/homeworks/"+t,type:"DELETE",dataType:"json",contentType:"application/json"}).done(function(){})}return!1}),$(".btn-homework-assign").click(function(){var t=$(this);showAjaxSpinner(t);var e=$(this).closest(".homework-cell").data("homework-id"),n=$("body").data("teacher-id");return assignHomeworkStudentsModal.show(e,n,function(){hideAjaxSpinner(t)},function(){location.reload()}),!1}),$(".btn-homework-view, .homework-activities").click(function(){var t=$(this).closest(".homework-cell").data("homework-id");window.location.href="/homeworks/"+t}),$(".btn-homework-update").click(function(){var n=$(this).closest(".homework-cell");updateHomeworkModal.show(n.data("id"),n.find(".homework-title-text").text(),n.find(".homework-description-text").text(),function(t,e){n.find(".homework-title-text").text(t),n.find(".homework-description-text").text(e)},function(){})});var e=function(){var o=parseInt($(".filter-date").val()),r=$(".filter-section").val(),s=$(".filter-classroom").val(),l=$(".filter-status").val();localStorageHelper.writeHomeworkSearchFilters({date:o,section:r,classroom:s,status:l}),$(".no-search-matches").removeClass("hidden");var i=function(t){var e=t.data("classroom").split(","),n=t.data("section").split(","),i=parseInt(t.data("date")),a=t.data("status");return-1!=o&&o<i||("all"!=s&&-1==e.indexOf(s)||("all"!=l&&l!=a||"all"!=r&&-1==n.indexOf(r)))},a=!1;$(".homework-cell").each(function(t,e){var n=$(e);n.removeClass("hidden"),i(n)?n.addClass("hidden"):a=!0}),a&&$(".no-search-matches").addClass("hidden")};$(".btn-filter-update").click(function(){var t=$(this);showAjaxSpinner(t),window.setTimeout(function(){hideAjaxSpinner(t)},500),e()}),function(){if($("#homeworks-index").data("clear-filters"))localStorageHelper.deleteHomeworkSearchFilters(),$(".homework-cell").removeClass("hidden");else{var t=localStorageHelper.readHomeworkSearchFilters();t?($(".filter-date").val(t.date),$(".filter-classroom").val(t.classroom),$(".filter-status").val(t.status),$(".filter-section").val(t.section),e()):$(".homework-cell").removeClass("hidden")}}()}$("#homework-show").length&&($(".lesson").click(function(){window.location.href=$(this).data("url")}),$(".edit-homework").click(function(){var n=$("#homework-show");updateHomeworkModal.show(n.data("homework-id"),n.find(".homework-title-text").text(),n.find(".homework-description-text").text(),function(t,e){n.find(".homework-title-text").text(t),n.find(".homework-description-text").text(e),$(".homework-show-section-description").addClass("hidden"),""==e.trim()?$(".homework-show-section-description.no-description").removeClass("hidden"):$(".homework-show-section-description.has-description").removeClass("hidden")},function(){})}),$(".btn-assign-homework").click(function(){var t=$(this);showAjaxSpinner(t);var e=$("#homework-show").data("homework-id"),n=$("body").data("teacher-id");return assignHomeworkStudentsModal.show(e,n,function(){hideAjaxSpinner(t)}),!1}))}),$(document).ready(function(){if($("#lessons-index").length){var n=[],i=function(e){e&&(n=jQuery.grep(n,function(t){return t!=$(e.currentTarget).attr("src")}),$(this).data("lesson-sprite")&&$("#lessons-index .img-lesson.sprite-"+$(this).data("lesson-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove()),n.length<=5&&$("[data-lesson-sprite]").each(function(){if(!(5<n.length)){var t=$(this).attr("data-lesson-sprite");$(this).removeAttr("data-lesson-sprite");var e=$(this).attr("data-lesson-sprite-url");n.push(e),$img=$("<img/>"),$img.data("lesson-sprite",t),$img.one("load",i).attr("src",e)}})};i()}});var alertModal=function(){var e,n,t=function(){$("#alert-modal").length&&((n=$("#alert-modal")).find(".alert-btn2").click(function(){i()}),n.find(".alert-btn1").click(function(){showAjaxSpinner($(this)),e()}))},i=function(){n.find(".alert-btn1").each(function(){hideAjaxSpinner($(this))}),n.modal("hide")};return{init:t,show:function(t){e=t,n.modal({backdrop:"static"})}}}();$(function(){alertModal.init()});var assignHomeworkStudentsModal=function(){var o,a,r,s,l=function(r){var t="/teachers/"+a+"/all_students";$.ajax({url:t,type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){var e=s.find(".classes");for(var n in e.empty(),t){e.append('<div class="classroom"><div class="title">'+_t("homework.students")+" "+n+"</div></div>");var i=e.find(".classroom").last();for(var a in i.append('<div class="all-students selectable">'+_t("homework.all_students")+"</div>"),t[n]){var o=t[n][a];i.append('<div class="student selectable" data-student-id='+a+" data-classroom="+n+">"+o+"</div>")}}r()})},t=function(){$("#assign-homework-students-modal").length&&((s=$("#assign-homework-students-modal")).on("click",".classroom-container .selectable",function(){$(this).toggleClass("selected"),$(this).hasClass("all-students")&&($(this).hasClass("selected")?$(this).parent().find(".selectable").addClass("selected"):$(this).parent().find(".selectable").removeClass("selected"))}),s.find(".exit-students-selection").click(function(){e()}),s.find(".return-after-assignment").click(function(){e(),r&&r()}),s.find(".finish-students-selection").click(function(){var i=[],a=[];if(s.find(".classroom-container .student.selected").each(function(t,e){var n=$(e);a.push(n.data("student-id")),i.push(n.data("classroom")+"."+n.text())}),a.length){var t="/assigned_homeworks/students",e=$(this);showAjaxSpinner(e),$.ajax({url:t,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({student_ids:a,homework_id:o})}).done(function(){s.find(".confirmation-container .students").text(i.join(" , ")),s.find(".classroom-container").slideUp(400,function(){hideAjaxSpinner(e),s.find(".confirmation-container").slideDown()})})}else alert(_t("homework.students_no_selection"))}))},e=function(){removeNestedModalsFix(),s.modal("hide")};return{init:t,show:function(t,e,n,i){o=t,a=e,r=i,l(function(){n(),enforceNestedModalsFix(),s.find(".classroom-container").show(),s.find(".confirmation-container").hide(),s.modal({backdrop:"static"})})}}}();$(function(){assignHomeworkStudentsModal.init()});var certificateEmailModal=function(){var n,i,t=function(){$("#certificate-email-modal").length&&((i=$("#certificate-email-modal")).find(".certificate-close-btn").click(function(){e()}),i.find(".cc-teacher").change(function(){$(this).is(":checked")?(i.find(".cc-email-container").slideDown(),i.find(".cc-email").attr("data-required","1")):(i.find(".cc-email-container").slideUp(),i.find(".cc-email")("data-required"),i.find(".cc-email").removeFormValidation())}),i.find(".certificate-email-btn").click(function(){var e=$(this);if(showAjaxSpinner(e),i.find("form").validate()){var t={email:i.find(".email").val()};i.find(".cc-teacher").prop("checked")&&(t.cc_email=i.find(".cc-email").val()),$.ajax({url:"/certificates/"+n.id+"/email",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){assert(t.success,"fail to create a certificate"),hideAjaxSpinner(e),$(".modal-body").slideUp(function(){$(".modal-confirmation").slideDown(function(){})})})}else hideAjaxSpinner(e)}))},e=function(){i.modal("hide")};return{init:t,show:function(t){n=t,i.find(".certificate-name").text(t.name),i.find(".certificate-title").text(t.title),i.find(".certificate-issuer").val(t.issuer_name),i.find(".certificate-description").val(t.description),i.find(".email").val(t.email),t.cc_email?(i.find(".cc-teacher").prop("checked",!0),i.find(".cc-email").val(t.cc_email),i.find(".cc-email-container").css("display","block")):(i.find(".cc-teacher").prop("checked",!1),i.find(".cc-email").val(t.default_cc_email),i.find(".cc-email-container").css("display","none")),i.find(".modal-body").show(),i.find(".modal-confirmation").hide(),i.find("form").resetFormValidation(),i.modal({backdrop:"static"})}}}();$(function(){certificateEmailModal.init()});var certificateModal=function(){var a,o,r,s,t=function(){$("#certificate-modal").length&&((s=$("#certificate-modal")).find(".certificate-close-btn").click(function(){e()}),s.find(".certificate-email-btn").click(function(){e(),certificateEmailModal.show(o)}),s.find(".certificate-template").change(function(){var t=$(this).val();s.find(".view-template > div").removeClass(),s.find(".view-template > div").addClass(t)}),s.find(".certificate-from-goal-btn").click(function(){var e=s.find(".from-goal-modal-body"),n=$(this);if(showAjaxSpinner(n),e.find("form").validate()){var t={username:o.username,goal:o.goal,email:o.email,name:e.find(".certificate-name").val(),issuer_name:e.find(".certificate-issuer").val(),issuer_female:"1"==e.find(".certificate-issuer-female").val()};$.ajax({url:"/certificates",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){assert(t.success,"fail to create a certificate"),hideAjaxSpinner(n),a(),o.id=t.result,e.slideUp(function(){$(".modal-confirmation").slideDown(function(){$(".certificate-download").attr("href","/certificates/"+o.id+"/download")})})})}else hideAjaxSpinner(n)}),s.find(".certificate-save-btn").click(function(){var e=s.find(".certificate-modal-body"),n=$(this);if(showAjaxSpinner(n),e.find("form").validate()){var t={username:o.username,goal:o.goal,name:e.find(".certificate-name").val(),issuer_name:e.find(".certificate-issuer").val(),issuer_female:"1"==e.find(".certificate-issuer-female").val(),description:e.find(".certificate-description").val(),template:e.find(".certificate-template").val()};r||(t.email=o.email);var i=r?"/certificates/"+o.id:"/certificates";$.ajax({url:i,type:r?"PUT":"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){assert(t.success,"fail to create a certificate"),hideAjaxSpinner(n),a(),r?e.slideUp(function(){$(".edit-modal-confirmation").slideDown()}):(o.id=t.result,e.slideUp(function(){$(".modal-confirmation").slideDown(function(){$(".certificate-download").attr("href","/certificates/"+o.id+"/download")})}))})}else hideAjaxSpinner(n)}))},e=function(){s.modal("hide")};return{init:t,show:function(t,e){a=e,r=null!=(o=t).id;var n=s.find(".certificate-modal-body");n.find(".certificate-name").val(t.name),n.find(".certificate-issuer").val(t.issuer_name),n.find(".certificate-issuer-female").val(t.issuer_female?"1":"0"),n.find(".certificate-description").val(t.description),n.find(".certificate-description").prop("disabled",!1),n.find(".certificate-title").text(t.title),n.find(".certificate-template").val(t.template),n.find(".certificate-template").change(),n.show(),n.find("form").resetFormValidation(),n.find(".mode-edit,.mode-create").addClass("hidden"),r?(n.find(".mode-edit").removeClass("hidden"),"recognition"!=t.goal&&n.find(".certificate-description").prop("disabled",!0)):n.find(".mode-create").removeClass("hidden"),s.find(".from-goal-modal-body").hide(),s.find(".modal-confirmation").hide(),s.find(".edit-modal-confirmation").hide(),s.modal({backdrop:"static"})},fromGoal:function(t,e){o=t,a=e,r=!1;var n=s.find(".from-goal-modal-body");n.find(".certificate-name").val(t.name),n.find(".certificate-issuer").val(t.issuer_name),n.find(".certificate-issuer-female").val(t.issuer_female?"1":"0"),n.find(".certificate-description").text(t.description),n.find(".certificate-title").text(t.title),n.show(),n.find("form").resetFormValidation(),s.find(".certificate-modal-body").hide(),s.find(".modal-confirmation").hide(),s.find(".edit-modal-confirmation").hide(),s.modal({backdrop:"static"})}}}();$(function(){certificateModal.init()});var changeUsernameModal=function(){var n,i,t=function(){$("#change-username-modal").length&&((i=$("#change-username-modal")).find(".close-modal-btn").click(function(){a()}),i.find(".change-username-btn").click(function(){var e=$(this);showAjaxSpinner(e),i.find("form").validate()?window.setTimeout(function(){if(i.find("form").validate()){var t={username:i.find(".change-username-details > span").text(),new_username:i.find("form input").val()};$.ajax({url:"/users/rename",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(t){a(),t.success?n():assert(!1,"fail to generate username for teacher")})}else hideAjaxSpinner(e)},1e3):hideAjaxSpinner(e)}),i.on("shown.bs.modal",function(){i.find(".change-username-input input").focus()}))},a=function(){i.modal("hide")};return{init:t,show:function(t,e){i.find(".change-username-details > span").text(t),i.find(".change-username-input input").val(""),i.find("form").resetFormValidation(),i.find(".change-username-btn").each(function(){hideAjaxSpinner($(this))}),n=e,i.modal({backdrop:"static"})}}}();$(function(){changeUsernameModal.init()});var classroomEditModal=function(){var r,s,l,t=function(){$("#classroom-edit-modal").length&&(r=$("#classroom-edit-modal"),$("#classroom-edit-modal .update-details-close-btn").click(function(){e()}),$("#classroom-edit-modal .update-details-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e=r.find(".update-details-section .update-name").val().trim(),n="english"==r.find(".update-details-section .update-language").val();if(e.toLowerCase()!=s.name.toLowerCase()){var i=[];if($(".name-value").each(function(t,e){i.push($(e).text().toLowerCase())}),-1!==i.indexOf(e.toLowerCase()))return r.find(".update-details-section .update-name").markInvalid(_t("classroom.name_used")),!1}var a=$(this);showAjaxSpinner(a);var o={classroom_name:e,english:n};$.ajax({url:"/classrooms/"+s.id,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(o)}).done(function(t){t.success?(s.name=e,s.english=n,hideAjaxSpinner(a),l(s),r.find(".update-details-section").slideUp(500,function(){r.find(".update-details-confirmation").slideDown()})):assert(!1,"fail to update classroom")})}))},e=function(){r.modal("hide")};return{init:t,show:function(t,e){s=t,l=e,r.find("form").resetFormValidation(),r.modal({backdrop:"static"}),r.find(".update-details-section").show(),r.find(".update-details-section .update-name").val(s.name),r.find(".update-details-section .update-language").val(s.english?"english":"arabic"),r.find(".update-details-confirmation").hide()}}}();$(function(){classroomEditModal.init()});var createHomeworkModal=function(){var o,i,r,s,t=function(){$("#create-homework-modal").length&&((o=$("#create-homework-modal")).find(".finish-editing-homework-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e="/homeworks/"+r,n=$(this),i=o.find("#homework-title").val(),a=o.find("#homework-description").val();showAjaxSpinner(n),$.ajax({url:e,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({title:i,description:a,editing:!1})}).done(function(){hideAjaxSpinner(n),o.find(".enter-homework-title-section").slideUp(400,function(){o.find(".confirmation-section").slideDown()}),s()})}),o.find(".assign-homework-to-students").click(function(){var t=$(this);showAjaxSpinner(t),assignHomeworkStudentsModal.show(r,i,function(){hideAjaxSpinner(t),e()})}),o.find(".close-modal").click(function(){e()}))},e=function(){o.modal("hide")};return{init:t,show:function(t,e,n){i=t,r=e,s=n,o.find(".enter-homework-title-section input").val(""),o.find(".enter-homework-title-section textarea").val(""),o.find(
".enter-homework-title-section").show(),o.find(".confirmation-section").hide(),o.modal({backdrop:"static"})}}}();$(function(){createHomeworkModal.init()});var deleteWarningModal=function(){var i,a,o,r,t=function(){$("#delete-warning-modal").length&&(i=$("#delete-warning-modal"),a=i.find(".confirm-container"),o=i.find(".update-password-container"),a.find(".run-delete-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e=i.find("input.validation-password").val(),n=$(this);showAjaxSpinner(n),$.ajax({url:"/users/validate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({password:e})}).done(function(t){hideAjaxSpinner(n),t.result?(s(),r()):switchModalContainer(a,o)})}),o.find(".retry-btn").click(function(){i.find("input.validation-password").val(""),i.find("form").resetFormValidation(),window.setTimeout(function(){i.find("input.validation-password").focus()},500),switchModalContainer(o,a)}),i.find(".close-modal").click(function(){s()}))},s=function(){i.modal("hide"),removeNestedModalsFix()};return{init:t,show:function(t,e){enforceNestedModalsFix(),r=e,i.find("input.validation-password").val(""),i.find("form").resetFormValidation(),i.find(".warning-header .deletion-name").text(t),a.show(),o.hide(),i.modal({backdrop:"static"},"show"),window.setTimeout(function(){i.find("input.validation-password").focus()},500)}}}();$(function(){deleteWarningModal.init()});var updateHomeworkModal=function(){var o,r,s;return{init:function(){$("#homework-update-modal").length&&((s=$("#homework-update-modal")).find(".homework-update-close-btn").click(function(){s.modal("hide"),s.find(".modal-form").show(),s.find(".modal-confirmation").hide(),s.resetFormValidation(),o()}),s.find(".homework-update-save-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e=s.data("homework-id"),n=s.find(".homework-update-title").val(),i=s.find(".homework-update-description").val();$.ajax({url:"/homeworks/"+e,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({title:n,description:i,editing:!1})}).done(function(){}),r(n,i),s.find(".modal-form").slideUp(function(){s.find(".modal-confirmation").slideDown()})}))},show:function(t,e,n,i,a){r=i,o=a,s.data("homework-id",t),s.find(".homework-update-title").val(e),s.find(".homework-update-description").val(n),s.modal({backdrop:"static"})}}}();$(function(){updateHomeworkModal.init()});var maxStudentsModal=function(){var e,t=function(){$("#max-students-modal").length&&(e=$("#max-students-modal")).find(".close-modal").click(function(){n()})},n=function(){e.modal("hide")};return{init:t,show:function(t){e.find(".max-students-count").text(t),e.modal({backdrop:"static"},"show")}}}();$(function(){maxStudentsModal.init()});var maxTeachersModal=function(){var e,t=function(){$("#max-teachers-modal").length&&(e=$("#max-teachers-modal")).find(".close-modal").click(function(){n()})},n=function(){e.modal("hide")};return{init:t,show:function(t){e.find(".max-teachers-count").text(t),e.modal({backdrop:"static"},"show")}}}();$(function(){maxTeachersModal.init()});var switchModalContainer=function(t,e,n){t.slideUp(400,function(){e.slideDown(400,function(){n&&n()})})},enforceNestedModalsFix=function(){$("body").addClass("enforce-modal-open")},removeNestedModalsFix=function(){$("body").removeClass("enforce-modal-open")},notEnoughMoneyModal=function(){var t;return{init:function(){$("#not-enough-money-modal").length&&(t=$("#not-enough-money-modal"))},show:function(){t.modal("show")}}}();$(function(){notEnoughMoneyModal.init()});var printableLimitModal=function(){var n,i,a,o,r,e,s,l,t=function(){e=[],$("body").data("user-id")&&(n=!0),n&&$("#printable-limit-modal").length&&(o=$("#printable-limit-modal").data("counter"),s=$("#printable-limit-modal").data("limit"),l=s<=30?s-5:s-10,(r=$("#printable-limit-modal")).find(".btn-close").click(function(){d()}),r.find(".btn-download").click(function(){c(),d()}))},d=function(){r.modal("hide")},c=function(){if(e[i]&&Date.now()-e[i]<2e3)a();else{e[i]=Date.now(),o+=1;var t=document.createElement("a");$(t).attr("target","_blank"),t.href=i,document.body.appendChild(t),t.click(),document.body.removeChild(t),delete t,a()}};return{init:t,downloadPrintable:function(t,e){n?(i=t,a=e,o<l?c():(o<s?(r.find(".limit-approached").show(),r.find(".limit-approached .highlight").text(o),r.find(".limit-approached .limit").text(s),r.find(".limit-reached").hide()):(r.find(".limit-approached").hide(),r.find(".limit-reached .limit").text(s),r.find(".limit-reached").show()),r.modal())):window.location.href=t}}}();$(function(){printableLimitModal.init()});var purchaseModal=function(){var i,a,o,t=function(){$("#purchase-modal").length&&((i=$("#purchase-modal")).find(".yes-buy-game").click(function(){var t="/store/item/"+a+"/purchase",e=$(this);showAjaxSpinner(e),$.ajax({url:t,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({})}).done(function(t){hideAjaxSpinner(e),assert("success"==t.result,"fail to purchase"),i.find(".purchase-confirm-message").hide(),i.find(".purchase-done-message").show(),i.find(".modal-footer").hide(),o()})}),i.find(".close-modal").click(function(){e()}))},e=function(){i.modal("hide")};return{init:t,show:function(t,e,n){a=t,e,o=n,i.find(".purchase-confirm-message").show(),i.find(".purchase-done-message").hide(),i.find(".modal-footer").show(),i.modal("show")}}}();$(function(){purchaseModal.init()});var qrCodeModal=function(){var n,t=function(){$("#qr-code-modal").length&&(n=$("#qr-code-modal")).find(".btn-close").click(function(){e()})},e=function(){n.modal("hide")};return{init:t,show:function(t,e){n.find(".qr-code-container").removeClass("loaded"),n.find(".qr-code-container").addClass("loading"),n.find(".name").text(e),$.ajax({url:"/students/"+t+"/qr_code",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){n.find(".qr-code-container").removeClass("loading"),n.find(".qr-code-container").addClass("loaded");var e=t.data;n.find("img.qr-code").attr("src",e)}),n.modal()}}}();$(function(){qrCodeModal.init()});var refererAgreementModal=function(){var n,e;return{init:function(){$("#referer-agreement-modal").length&&((e=$("#referer-agreement-modal")).find("pre").text($(".referer-terms pre").text()),e.find(".referer-accept-agreement-btn").click(function(){var t=$(this),e=$("body").data("user-id");showAjaxSpinner(t),$.ajax({url:"/referers/"+e+"/agreement",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){assert(t.success,"fail to update referer agreement"),n()})}))},show:function(t){n=t,e.modal({backdrop:"static"})}}}();$(function(){refererAgreementModal.init()});var refererBankDetailsModal=function(){var e,n,i,a,t=function(){$("#referer-bank-details-modal").length&&(n=$("#referer-bank-details-modal"),i=n.find(".details-container"),a=n.find(".success-container"),i.find(".close-modal-btn").click(function(){o()}),a.find(".done-btn").click(function(){o(),e()}),i.find(".referer-bank-details-btn").click(function(){$(this);if(i.find("form").validate()){var t=i.find("textarea").val().trim(),e=$("body").data("user-id");$.ajax({url:"/referers/"+e+"/bank_details",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({details:t})}).done(function(t){assert(t.success,"fail to update bank details"),switchModalContainer(i,a)})}}))},o=function(){n.modal("hide")};return{init:t,show:function(t){i.find("textarea").val(""),i.find("form").resetFormValidation(),i.find(".referer-bank-details-btn").each(function(){hideAjaxSpinner($(this))}),e=t,n.modal({backdrop:"static"}),i.show(),a.hide()}}}();$(function(){refererBankDetailsModal.init()});var schoolStudentsDeleteModal=function(){var n,o,r,s,i,a,l,d,c=function(i){var a={};o.forEach(function(e){e.classes.forEach(function(t){a[t.id]={teacherId:e.id,teacherName:e.name,classId:t.id,className:t.name,counter:t.counter}})}),Object.keys(r).forEach(function(t){var e=a[t],n=$("<tr data-id='"+e.classId+"'>");n.append($("<td>"+e.teacherName+"</td>")),n.append($("<td>"+e.className+"</td>")),n.append($("<td>"+e.counter+" "+_t("school_students_delete.student")+"</td>")),n.append($("<td>"+_t("school_students_delete.delete_request")+"</td>")),i.append(n)})},u=function(){if(l.find(".deletion-table table tbody tr").length){var t=l.find(".deletion-table table tbody tr:first-child"),e=t.data("id"),n=$(".ajax-spinner").first().clone();n.show();var i=t.find("td:last-child");i.text(""),i.append(n);var a={_method:"DELETE"};$.ajax({url:"/classrooms/"+e,type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(){t.remove(),u()})}else switchModalContainer(s.find(".progress-container"),s.find(".success-container"))},t=function(){$("#school-students-delete-modal").length&&(s=$("#school-students-delete-modal"),i=s.find(".selection-container"),a=s.find(".confirmation-container"),l=s.find(".progress-container"),d=s.find(".success-container"),s.find(".delete-students-close-btn").click(function(){e()}),s.find(".delete-students-done-btn").click(function(){e(),n()}),s.find(".delete-students-process-btn").click(function(){r={};var e=i.find("select").val().split("-"),n=0;"all"==e[1]?"all"==e[0]?o.forEach(function(t){t.classes.forEach(function(t){r[t.id]=t.name,n+=t.counter})}):o.find(function(t){return t.id==e[0]}).classes.forEach(function(t){r[t.id]=t.name,n+=t.counter}):o.find(function(t){return t.id==e[0]}).classes.forEach(function(t){t.id==e[1]&&(r[t.id]=t.name,n+=t.counter)}),a.find(".selected-classrooms table tbody").empty(),a.find(".total-count").text(n),c(a.find(".selected-classrooms table tbody")),switchModalContainer(i,a)}),s.find(".delete-students-delete-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var e=a.find("input.validation-password").val(),n=$(this);showAjaxSpinner(n),$.ajax({url:"/users/validate",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({password:e})}).done(function(t){hideAjaxSpinner(n),t.result?(c(l.find(".deletion-table table tbody")),switchModalContainer(a,l,function(){u()})):a.find("input.validation-password").markInvalid(_t("delete_warning.invalid_password"))})}))},f=function(t){i.find("select").empty();var e=t.reduce(function(t,e){return t+e.counter},0),n=function(t,e){var n=$("<option value="+t+">"+e+"</option>");i.find("select").append(n)};n("all-all",_t("school_students_delete.all_classes","counter",e)),t.forEach(function(e){n(e.id+"-all",_t("school_students_delete.teacher_all_classes","teacher",e.name,"counter",e.counter)),e.classes.forEach(function(t){n(e.id+"-"+t.id,_t("school_students_delete.teacher_class","teacher",e.name,"class",t.name,"counter",t.counter))})})},e=function(){s.modal("hide")};return{init:t,show:function(t,e){n=e,f(o=t),i.show(),a.hide(),l.hide(),d.hide(),a.find("input").val(""),a.find("form").resetFormValidation(),s.find("tbody").empty(),s.modal({backdrop:"static"})}}}();$(function(){schoolStudentsDeleteModal.init()});var schoolTrialConfirmDetailsModal=function(){var e,n,t=function(){$("#school-trial-confirm-details-modal").length&&((e=$("#school-trial-confirm-details-modal")).find(".btn-edit-details").click(function(){i()}),e.find(".btn-submit-details").click(function(){i(),n()}))},i=function(){e.modal("hide")};return{init:t,show:function(t){n=t,e.modal({backdrop:"static"},"show")}}}();$(function(){schoolTrialConfirmDetailsModal.init()});var secondTeacherModal=function(){var r,s,l,d,c,u,f,h,n,p=function(e,n,t,i){var a=function(t){i.push({"line-number":n+1,line:e,error:t})},o=e.split(",");if(3==o.length){var r=o[0].trim().toLowerCase(),s=o[1].trim().toLowerCase(),l=o[2].trim().toLowerCase();if(h[r])if(h[l])if(s in h[r])if(s in h[l])a(_t("second_teacher.validation.classroom_exists","class",s,"teacher",l));else if(h[r][s]){var d={fromTeacher:r,className:s,toTeacher:l};t.find(function(t){return t.teacher==d.teacher&&t.className==d.className&&t.studentName==d.studentName})?a(_t("second_teacher.validation.duplicate")):t.push(d)}else a(_t("second_teacher.validation.classroom_missing_email","class",s,"teacher",r));else a(_t("second_teacher.validation.classroom_unknown","class",s,"teacher",r));else a(_t("second_teacher.validation.teacher_unknown","teacher",l));else a(_t("second_teacher.validation.teacher_unknown","teacher",r))}else a(_t("second_teacher.validation.line_invalid","count",o.length))},m=function(t){return/^[\x00-\x7F\u0600-\u06FF\u0750-\u077F]*$/.test(t)},e=function(t,e){var n=Math.min(t.length,200);if(m(t.substring(0,n))){var i=t.split("\n"),a=[],o=[];i=(i=i.map(function(t){return t.trim()})).filter(function(t){return""!=t});for(var r=0;r<i.length;++r)p(i[r],r,o,a);if(a.length)return a.forEach(function(t){var e=f.find(".line-error-template").clone();e.removeClass("line-error-template"),e.removeClass("hidden"),e.addClass("line-error"),e.find(".line-number").text(t["line-number"]),e.find(".line").text(t.line),e.find(".error").text(t.error),f.find(".line-errors").append(e)}),void switchModalContainer(s,f);o.forEach(function(t){var e=l.find(".summary-row-template").clone();e.removeClass("hidden"),e.removeClass("summary-row-template"),e.addClass("summary-row"),e.find(".col-teacher").text(t.fromTeacher),e.find(".col-class").text(t.className),e.find(".col-second-teacher").text(titleCase(t.toTeacher)),l.find("tbody").append(e)}),e()}else switchModalContainer(s,u)},g=function(){if(r.find(".progress-table table tbody tr").length){var t=r.find(".progress-table table tbody tr:first-child"),e=t.data("from-teacher"),n=t.data("classroom"),i=t.data("to-teacher"),a=$(".ajax-spinner").first().clone();a.show();var o=t.find("td:last-child");o.text(""),o.append(a),$.ajax({url:"/students/second_teacher",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({from_teacher:e,classroom:n,to_teacher:i})}).done(function(){t.remove(),g()})}else switchModalContainer(d,c)},t=function(){$("#second-teacher-modal").length&&(r=$("#second-teacher-modal"),s=r.find(".file-selection-container"),l=r.find(".review-container"),d=r.find(".progress-container"),c=r.find(".confirmation-container"),u=r.find(".file-invalid-error-container"),f=r.find(".validation-errors-container"),r.find(".btn-upload-file").click(function(){i(function(t){e(t,function(){switchModalContainer(s,l)})})}),r.find(".btn-create-accounts").click(function(){var a=d.find(".progress-table tbody");l.find(".review-table-container .summary-row").each(function(){var t,e=(t=$(this)).find(".col-teacher").text(),n=t.find(".col-class").text(),i=t.find(".col-second-teacher").text();(t=$("<tr data-from-teacher='"+e+"' data-classroom='"+n+"' data-to-teacher='"+i+"'>")).append($("<td>"+e+"</td>")),t.append($("<td>"+n+"</td>")),t.append($("<td>"+i+"</td>")),t.append($("<td>"+_t("second_teacher.create_request")+"</td>")),a.append(t)}),switchModalContainer(l,d,function(){g()})}),r.find(".btn-close").click(function(){o()}),r.find(".btn-done").click(function(){o(),n()}))},i=function(i){var t=document.createElement("input");t.type="file",t.onchange=function(t){var e=t.target.files[0],n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){var e=t.target.result;i(e)}},t.click()},a=function(n){var i={};return Object.keys(n).forEach(function(t){var e=n[t];e.constructor==Object&&(e=a(e)),i[t.toLowerCase()]=e}),i},o=function(){r.modal("hide")};return{init:t,show:function(t,e){h=a(t),n=e,s.show(),l.hide(),d.hide(),c.hide(),u.hide(),f.hide(),l.find("table .summary-row").remove(),d.find(".progress-table table tbody").empty(),r.find(".validation-errors-container .line-error").remove(),r.modal({backdrop:"static"})}}}();$(function(){secondTeacherModal.init()});var sightwordsRewardModal=function(){var e,t=function(){$("#sightwords-reward-modal").length&&($sightwordsRewardModal=$("#sightwords-reward-modal"),$sightwordsRewardModal.find(".close-modal-btn").click(function(){e(),n()}))},n=function(){$sightwordsRewardModal.modal("hide")};return{init:t,showGetReward:function(t){$sightwordsRewardModal.find(".reward-section").hide(),$sightwordsRewardModal.find(".get-reward-section").show(),e=t,$sightwordsRewardModal.modal()},showWaitReward:function(t){$sightwordsRewardModal.find(".reward-section").hide(),$sightwordsRewardModal.find(".wait-reward-section").show(),e=t,$sightwordsRewardModal.modal()}}}();$(function(){sightwordsRewardModal.init()});var signupEmailConfirmationModal=function(){var e,n,t=function(){$("#email-confirmation-modal").length&&(e=$("#email-confirmation-modal")).find(".confirm-action > a").click(function(){var t=e.find("#email-confirmation-txt").trimval();n(t),i()})},i=function(){e.modal("hide")};return{init:t,show:function(t){n=t,e.find("#email-confirmation-txt").val(""),e.modal({backdrop:"static"}),window.setTimeout(function(){e.find("#email-confirmation-txt").focus()},500)}}}();$(function(){signupEmailConfirmationModal.init()});var studentEmailCredentialsModal=function(){var o,r,s,l,d,c,t=function(){$("#student-email-credentials-modal").length&&((r=$("#student-email-credentials-modal")).find(".email-credentials-save-email-btn").click(function(t){var e=$(this);if(t.preventDefault(),!$(this).validate())return!1;d=$(".email-credentials-enter-email").val().trim();var n={name:l,email:d,english:c};showAjaxSpinner(e),$.ajax({url:"/students/"+s,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(){$.ajax({url:"/students/"+s+"/email_credentials",type:"POST",dataType:"json",contentType:"application/json"}).done(function(){hideAjaxSpinner(e),i(".student-email-credentials-confirmation")})})}),r.find(".email-credentials-send-btn").click(function(t){var e=$(this);t.preventDefault();var n="/students/"+s+"/email_credentials";showAjaxSpinner(e),$.ajax({url:n,type:"POST",dataType:"json",contentType:"application/json"}).done(function(){hideAjaxSpinner(e),i(".student-email-credentials-confirmation")})}),r.find(".email-credentials-close-btn").click(function(){e()}),r.find(".email-credentials-done-btn").click(function(){e(),o(d)}))},u=function(t){r.find(".student-email-credentials-section").hide(),r.find(t).show(),r.data("visible-section",t)},i=function(t){var e=$("#student-email-credentials-modal").data("visible-section");r.find(e).slideUp(500,function(){r.find(t).slideDown(),r.data("visible-section",t)})},e=function(){r.modal("hide"),removeNestedModalsFix()};return{init:t,show:function(t,e,n,i,a){enforceNestedModalsFix(),s=t,l=e,d=n,c=i,o=a,r.find(".email-credentials-name-value").text(e),n?(r.find(".email-credentials-email-value").text(n),u(".student-email-credentials-request")):(r.find(".email-credentials-enter-email").val(""),u(".student-email-credentials-enter-email")),r.resetFormValidation(),r.modal({backdrop:"static"},"show")}}}();$(function(){studentEmailCredentialsModal.init()});var studentSettingsModal=function(){var a,o,r,s,l,d,t=function(){$("#student-settings-modal").length&&(o=$("#student-settings-modal"),r=o.find(".settings-container"),o.find(".close-btn").click(function(){e()}),o.find(".student-email-login-btn").click(function(){e(),s()}),o.find(".student-update-btn").click(function(){e(),l()}),o.find(".student-delete-btn").click(function(){e(),d()}))},c=function(){r.find(".student-name").text(a.name),r.find(".teacher-name").text(a.teacher),r.find(".classroom").text(a.classroom),r.find(".username").text(a.username),r.find(".password").text(a.password),r.find(".email").text(a.email),r.find(".language").text(a.english?_t("student_settings.language.english"):_t("student_settings.language.arabic"))},e=function(){o.modal("hide")};return{init:t,show:function(t,e,n,i){(a=t).teacher?r.find(".student-details-teacher").show():r.find(".student-details-teacher").hide(),s=e,l=n,d=i,c(),o.modal({backdrop:"static"})}}}();$(function(){studentSettingsModal.init()});var studentUpdateDetailsModal=function(){var l,d,c,u,f,h,p,m,g,v,y,t=function(){$("#student-update-details-modal").length&&(l=$("#student-update-details-modal"),d=l.find(".update-container"),c=l.find(".done-container"),l.find(".update-details-close-btn").click(function(){e()}),l.find(".update-details-done-btn").click(function(){e(),v(y)}),d.find(".update-details-btn").click(function(t){var e=$(this);if(t.preventDefault(),!$(this).validate())return!1;y={password:d.find(".update-password").val().trim(),name:titleCase(d.find(".update-name").val().trim()),email:d.find(".update-email").val().trim(),english:"english"==d.find(".update-language").val()},showAjaxSpinner(e),$.ajax({url:"/students/"+u,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(y)}).done(function(){hideAjaxSpinner(e),switchModalContainer(d,c)}),c.find(".success-message").html(_t("student.update_success"))}))},e=function(){l.modal("hide"),removeNestedModalsFix()};return{init:t,show:function(t,e,n,i,a,o,r,s){enforceNestedModalsFix(),u=t,f=e,h=n,p=a,m=o,g=i,v=s,y=null,d.show(),c.hide(),d.find(".update-username").html(p),d.find(".update-password").val(m),d.find(".update-name").val(f),d.find(".update-email").val(h),d.find(".update-language").val(g?"english":"arabic"),l.modal({backdrop:"static"},"show"),l.resetFormValidation(),r&&window.setTimeout(function(){d.find(".update-email").focus()},500)}}}();$(function(){studentUpdateDetailsModal.init()});var studentsBulkCreateModal=function(){var o,a,s,r,l,d,c,u,f,h,g,p,m,v,y,b,x=function(e,n,t,i){var a=function(t){i.push({"line-number":n+1,line:e,error:t})},o=e.split(",");if(y){if(3==o.length&&o.push(""),4!=o.length)return void a(_t("bulk_students.validation.multiple_teachers_line_invalid","count",o.length));var r=o[0].trim(),s=o[1].trim(),l=o[2].trim(),d=o[3].trim()}else{if(2==o.length&&o.push(""),3!=o.length)return void a(_t("bulk_students.validation.single_teacher_line_invalid","count",o.length));r=Object.keys(g)[0],s=o[0].trim(),l=o[1].trim(),d=o[2].trim()}var c=r.toLowerCase(),u=s.toLowerCase(),f={teacher:r,className:s,studentName:l,studentEmail:d};if(g[c]){var h=g[r.toLowerCase()];if(h[u]&&-1!=h[u].indexOf(l.toLowerCase()))a(_t("bulk_students.validation.student_exists","student",l,"className",s));else{var p=/^[0-9A-Za-z_\-\. ]+$/,m=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(/^[0-9A-Za-z_\-\.]+$/.test(s))if(p.test(l))if(!d||m.test(d))t.find(function(t){return t.teacher.toLowerCase()==f.teacher.toLowerCase()&&t.className.toLowerCase()==f.className.toLowerCase()&&t.studentName.toLowerCase()==f.studentName.toLowerCase()})?a(_t("bulk_students.validation.student_duplicate")):t.push(f);else a(_t("bulk_students.validation.email_invalid","email",d));else a(_t("bulk_students.validation.name_alphanumeric","studentName",l));else a(_t("bulk_students.validation.class_alphanumeric","className",s))}}else a(_t("bulk_students.validation.teacher_unknown","teacher",r))},w=function(t){return/^[\x00-\x7F\u0600-\u06FF\u0750-\u077F]*$/.test(t)},e=function(t,e){var n=Math.min(t.length,200);if(w(t.substring(0,n))){var i=t.split("\n"),a=[],o=[];if(i=(i=i.map(function(t){return t.trim()})).filter(function(t){return""!=t}),v<i.length)return f.find(".file-students-count").text(i.length),f.find(".remaining-students-count").text(v),void switchModalContainer(s,f);for(var r=0;r<i.length;++r)x(i[r],r,o,a);if(a.length)return a.forEach(function(t){var e=h.find(".line-error-template").clone();e.removeClass("line-error-template"),e.removeClass("hidden"),e.addClass("line-error"),e.find(".line-number").text(t["line-number"]),e.find(".line").text(t.line),e.find(".error").text(t.error),h.find(".line-errors").append(e)}),void switchModalContainer(s,h);o.forEach(function(t){var e=l.find(".summary-row-template").clone();e.removeClass("hidden"),e.removeClass("summary-row-template"),e.addClass("summary-row"),e.find(".col-teacher").text(t.teacher),e.find(".col-class").text(t.className),e.find(".col-student-name").text(titleCase(t.studentName)),e.find(".col-student-email").text(t.studentEmail),l.find("tbody").append(e)}),y||l.find(".col-teacher").hide(),e()}else switchModalContainer(s,u)},k=function(){if(o.find(".progress-table table tbody tr").length){var t=o.find(".progress-table table tbody tr:first-child"),e=t.data("teacher"),n=t.data("classroom"),i=$(".ajax-spinner").first().clone();i.show();var a=t.find("td:last-child");a.text(""),a.append(i),$.ajax({url:"/students/bulk",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({students:p[e][n],english:b})}).done(function(){t.remove(),k()})}else switchModalContainer(d,c)},t=function(){$("#students-bulk-create-modal").length&&(o=$("#students-bulk-create-modal"),a=o.find(".tip-container"),s=o.find(".file-selection-container"),r=o.find(".language-container"),l=o.find(".review-container"),d=o.find(".progress-container"),c=o.find(".confirmation-container"),u=o.find(".file-invalid-error-container"),f=o.find(".students-count-error-container"),h=o.find(".validation-errors-container"),a.find(".btn-continue").click(function(){switchModalContainer(a,s)}),o.find(".btn-upload-file").click(function(){n(function(t){e(t,function(){switchModalContainer(s,r)})})}),o.find(".btn-select-language").click(function(){b="english"==r.find("select").val(),l.find(".summary-row .col-language").text(_t(b?"bulk_students.language.english":"bulk_students.language.arabic")),switchModalContainer(r,l)}),o.find(".btn-create-accounts").click(function(){p={},l.find(".review-table-container .summary-row").each(function(){var t=$(this),e=t.find(".col-teacher").text(),n=t.find(".col-class").text();p[e]||(p[e]={}),p[e][n]||(p[e][n]=[]),p[e][n].push([e,n,t.find(".col-student-name").text(),t.find(".col-student-email").text()])});var i=d.find(".progress-table tbody");Object.keys(p).forEach(function(n){Object.keys(p[n]).forEach(function(t){var e=$("<tr data-teacher='"+n+"' data-classroom='"+t+"'>");e.append($("<td>"+n+"</td>")),e.append($("<td>"+t+"</td>")),e.append($("<td>"+p[n][t].length+" "+_t("bulk_students.student")+"</td>")),e.append($("<td>"+_t("bulk_students.create_request")+"</td>")),i.append(e)})}),switchModalContainer(l,d,function(){k()})}),o.find(".btn-close").click(function(){i()}),o.find(".btn-done").click(function(){i(),m()}))},n=function(i){var t=document.createElement("input");t.type="file",t.onchange=function(t){var e=t.target.files[0],n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(t){var e=t.target.result;i(e)}},t.click()},_=function(n){var i={};return Object.keys(n).forEach(function(t){var e=n[t];e.constructor==Object&&(e=_(e)),i[t.toLowerCase()]=e}),i},i=function(){o.modal("hide")};return{init:t,show:function(t,e,n,i){g=_(t),Object.keys(g).forEach(function(e){Object.keys(g[e]).forEach(function(t){g[e][t]=g[e][t].map(function(t){return t.toLowerCase()})})}),v=e,m=i,y=n,a.show(),s.hide(),r.hide(),l.hide(),d.hide(),c.hide(),u.hide(),f.hide(),h.hide(),r.find("select").val("arabic"),l.find("table .summary-row").remove(),d.find(".progress-table table tbody").empty(),o.find(".validation-errors-container .line-error").remove(),o.find(".file-structure-guide").hide(),y?o.find(".file-structure-guide.multiple-teachers-import").show():(assert(1==Object.keys(t).length,"must have a single teacher"),o.find(".file-structure-guide.single-teacher-import").show()),o.modal({backdrop:"static"})}}}();$(function(){studentsBulkCreateModal.init()});var studentsBulkLoginModal=function(){var i,n,a,o,r,s,l,d,e=function(){var t=i.length-n.length,e=Math.round(100*t/i.length);l.find(".sent-percentage").text(e+" %"),l.find(".sent-count").text(t)},c=function(){var t=n.splice(0,Math.min(5,n.length)).map(function(t){return t.id});$.ajax({url:"/schools/"+a+"/send_login",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({students:t})}).done(function(){e(),0==n.length?window.setTimeout(function(){switchModalContainer(l,d),d.find(".total-count").text(i.length)},500):c()})},t=function(){$("#students-bulk-login-modal").length&&(o=$("#students-bulk-login-modal"),r=o.find(".all-sent-container"),s=o.find(".confirm-container"),l=o.find(".sending-container"),d=o.find(".sending-done-container"),o.find(".close-btn").click(function(){u()}),o.find(".done-btn").click(function(){u(),onChangeCb()}),o.find(".send-email-btn").click(function(){n=i.slice(),e(),l.find(".total-count").text(i.length),l.find(".ajax-spinner").show(),switchModalContainer(s,l),c()}))},u=function(){o.modal("hide")};return{init:t,show:function(t,e,n){r.hide(),s.hide(),l.hide(),d.hide(),a=t,0==e.length?r.show():(i=e,onChangeCb=n,s.find(".students-count").text(i.length),s.find("tbody").empty(),i.forEach(function(t){$tr=$("<tr><td>"+t.name+"</td><td>"+t.email+"</td></tr>"),s.find("tbody").append($tr)}),s.show()),o.modal({backdrop:"static"})}}}();$(function(){studentsBulkLoginModal.init()});var studentsChangeClassModal=function(){var o,r,s,t=function(){if($("#students-change-class-modal").length){s=$("#students-change-class-modal");var t=function(){var n=[];s.find(".classroom-container").find(".student.selected").each(function(t,e){n.push($(e).text())}),0==n.length?s.find("textarea.selected-students").val(""):s.find("textarea.selected-students").val(n.join(" , "))};$(document).on("click",".classroom-container .selectable",function(){$(this).toggleClass("selected"),$(this).hasClass("all-students")&&($(this).hasClass("selected")?$(this).parent().find(".selectable").addClass("selected"):$(this).parent().find(".selectable").removeClass("selected")),t()}),s.find(".students-change-class-close-btn").click(function(){e()}),s.find(".students-change-class-done-btn").click(function(){e(),r()}),s.find(".students-change-class-btn").click(function(t){if(t.preventDefault(),!$(this).validate())return!1;var n=[];s.find(".classroom-container").find(".student.selected").each(function(t,e){n.push($(e).data("student-id"))});var e=s.find(".from-classroom").val(),i=s.find(".to-classroom").val(),a={student_ids:n,from_class:e,to_class:i},o=$(this);$("body").data("teacher-id");showAjaxSpinner(o),$.ajax({url:"/teacher/students/change-class",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a)}).done(function(t){t.success?(s.find(".confirmation-container .students").text(s.find(".selected-students").val()),s.find(".confirmation-container .line .class-name").text(i),s.find(".classroom-container").slideUp(400,function(){hideAjaxSpinner(o),s.find(".confirmation-container").slideDown()})):assert(!1,"fail to generate username")})})}},e=function(){s.modal("hide")};return{init:t,show:function(i,t,e){o=t,r=e,s.find(".classroom-container").show(),s.find(".confirmation-container").hide(),s.find(".from-classroom").val(i),s.find("textarea.selected-students").val(""),s.find("form").resetFormValidation();var n=s.find(".classes");n.empty(),n.append('<div class="classroom"></div>');var a=n.find(".classroom").last();o.forEach(function(t){var e=t.id,n=t.name;a.append('<div class="student selectable" data-student-id='+e+" data-classroom="+i+">"+n+"</div>")}),s.modal({backdrop:"static"})}}}();$(function(){studentsChangeClassModal.init()});var studentsMoveModal=function(){var a,g,v,r,o,y,s,b,l,t=function(){$("#students-move-modal").length&&(o=$("#students-move-modal"),y=o.find(".selection-container"),s=o.find(".classroom-success-container"),b=o.find(".student-selection-container"),l=o.find(".student-success-container"),o.find(".close-btn").click(function(){n()}),o.find(".done-btn").click(function(){n(),a()}),o.find(".move-classroom-btn").click(function(){var t=$(this),e=y.find(".from-teacher").val(),n=y.find(".to-teacher").val(),i=y.find(".from-classroom").val();e!=n?(showAjaxSpinner(t),$.ajax({url:"/schools/"+r+"/move_class",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({from_teacher:e,to_teacher:n,classroom_id:i})}).done(function(){hideAjaxSpinner(t),s.find(".class-name").text(y.find(".from-classroom option:selected").data("name").toString()),s.find(".from-teacher").text(y.find(".from-teacher option:selected").data("name").toString()),s.find(".to-teacher").text(y.find(".to-teacher option:selected").data("name").toString()),switchModalContainer(y,s)})):alert(_t("students_move_modal.error.same_teacher"))}),$(document).on("click",".student-selection-container .selectable",function(){$(this).toggleClass("selected")}),o.find(".request-move-students-btn").click(function(){$(this);var t=y.find(".from-teacher").val(),e=y.find(".to-teacher").val(),n=y.find(".from-classroom").val(),i=y.find(".from-classroom option:selected").data("name").toString();if(t!=e){var a=g(n),o=b.find(".classes");o.empty(),o.append('<div class="classroom"></div>');var r=o.find(".classroom").last();for(var s in a){var l=a[s];r.append('<div class="student selectable" data-student-id='+s+">"+l+"</div>")}var d=v.find(function(t){return t.id==e}),c={},u={};for(
var f in d.classes){(h=d.classes[f].name).toLowerCase()==i.toLowerCase()?u[f]=h:c[f]=h}for(var f in 0==Object.keys(u).length&&(u[-1]=i),b.find(".to-classroom").empty(),u){var h=u[f];if(-1==f)var p=_t("students_move_modal.classroom.new","classroomName",h,"teacherName",d.name);else p=_t("students_move_modal.classroom.existing","classroomName",h,"teacherName",d.name,"studentsCount",d.classes[f].counter);var m=$("<option value='"+f+"' data-name='"+h+"'>"+p+"</option>");b.find(".to-classroom").append(m)}for(var f in c){h=c[f],p=_t("students_move_modal.classroom.existing","classroomName",h,"teacherName",d.name,"studentsCount",d.classes[f].counter),m=$("<option value='"+f+"' data-name='"+h+"'>"+p+"</option>");b.find(".to-classroom").append(m)}b.find(".to-classroom").data("to-teacher",e),b.find(".to-classroom").data("from-teacher",t),b.find("span.from-class").text(i),b.find("span.to-teacher").text(d.name),switchModalContainer(y,b)}else alert(_t("students_move_modal.error.same_teacher"))}),o.find(".move-students-btn").click(function(){var e=$(this),n=[],i=[];b.find(".student.selected").each(function(t,e){n.push($(e).data("student-id")),i.push($(e).text())});var a=b.find(".to-classroom").data("to-teacher"),t=b.find(".to-classroom").data("from-teacher"),o=b.find(".to-classroom option:selected").data("name").toString();b.find(".to-classroom").val();0!=n.length?(showAjaxSpinner(e),$.ajax({url:"/schools/"+r+"/move_students",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({from_teacher:t,to_teacher:a,to_classroom:o,students:n})}).done(function(){hideAjaxSpinner(e);var t=v.find(function(t){return t.id==a});l.find(".moved-students").text(i.join(" , ")),l.find(".to-classroom").text(o),l.find(".to-teacher").text(t.name),switchModalContainer(b,l)})):alert(_t("students_move_modal.error.select_students"))}),y.find("select.from-teacher").change(function(){e($(this).val())}))},e=function(e){y.find("select.from-classroom").empty(),teacherEntry=v.find(function(t){return t.id==e}),teacherEntry.classes.forEach(function(t){var e=_t("students_move_modal.classroom.existing","classroomName",t.name,"teacherName",teacherEntry.name,"studentsCount",t.counter),n=$("<option value='"+t.id+"' data-name='"+t.name+"'>"+e+"</option>");y.find("select.from-classroom").append(n)})},d=function(){y.find("select").empty(),v.forEach(function(t){var e=$("<option value='"+t.id+"' data-name='"+t.name+"'>"+t.name+"</option>");t.classes.length&&y.find("select.from-teacher").append(e.clone()),y.find("select.to-teacher").append(e)}),e(y.find("select.from-teacher").val())},n=function(){o.modal("hide")};return{init:t,show:function(t,e,n,i){r=t,g=n,a=i,d(v=e),y.show(),s.hide(),b.hide(),l.hide(),o.modal({backdrop:"static"})}}}();$(function(){studentsMoveModal.init()});var tagsAssignModal=function(){var i,a,o,t=function(){$("#tags-assign-modal").length&&($tagsAssignModal=$("#tags-assign-modal"),(o=$tagsAssignModal.find(".assign-container")).find(".btn-add-article-tag").click(function(){s()}),o.on("click",".btn-remove-article-tag",function(){l($(this).closest(".tag").data("id"))}),o.on("change",".article-fields select, .article-fields input",function(){n()}),$tagsAssignModal.find(".close-btn").click(function(){e(),f()}),d())},e=function(){var t=a.find(function(t){return t.id==i}),e=[];o.find(".tags .tag-text").each(function(){e.push($(this).text())});var n=$(".data-"+i);n.find(".level").text(t.level),n.find(".type").text(t.type),n.find(".tags").text(e.join(" - "))},n=function(){var t=a.find(function(t){return t.id==i}),e=o.find(".article-fields");t.english=e.find(".english").val(),t.level=e.find(".level").val(),t.type=e.find(".type").val(),c()},r=function(){o.find(".tags").empty(),tagsEditorModal.getTags().forEach(function(n){n.sub_tags.forEach(function(t){if(-1!=t.articles.indexOf(i)){var e=o.find(".tag-template").clone();e.removeClass(),e.addClass("tag"),e.find(".tag-text").text(n.arabic+" \u060c "+t.arabic),e.data("id",n.english+"|"+t.english),o.find(".tags").append(e)}})})},s=function(){var t=o.find(".tags-list").val().split("|");tagsEditorModal.addArticleToTag(t[0],t[1],i),r()},l=function(t){var e=t.split("|");tagsEditorModal.removeArticleFromTag(e[0],e[1],i),r()},d=function(e){$.ajax({url:"/texts/config/all",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){a=t.result,e&&e()})},c=function(e){$.ajax({url:"/texts/config/all",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({config:a})}).done(function(t){assert(t.success,"fail to save config"),e&&e()})},u=function(){var t=tagsEditorModal.getTags();o.find(".tags-list").empty(),t.forEach(function(i){i.sub_tags.forEach(function(t){var e=i.arabic+" \u060c "+t.arabic,n=i.english+"|"+t.english;o.find(".tags-list").append('<option value="'+n+'">'+e+"</option>")})});var e=a.find(function(t){return t.id==i});assert(e,"fail to find article config"),o.find(".arabic").val(e.arabic),o.find(".length").val(e.length),o.find(".english").val(e.english),e.level?o.find(".level").val(e.level):o.find(".level").val(""),e.type?o.find(".type").val(e.type):o.find(".type").val(""),r()},f=function(){$tagsAssignModal.modal("hide")};return{init:t,show:function(t){u(i=t),$tagsAssignModal.modal({backdrop:"static"},"show")}}}();$(function(){tagsAssignModal.init()});var tagsEditorModal=function(){var r,o,t=function(){$("#tags-editor-modal").length&&($tagsEditorModal=$("#tags-editor-modal"),o=$tagsEditorModal.find(".topics-container"),$tagsEditorModal.find(".close-btn").click(function(){g()}),o.find(".main-topic-add").click(function(){l()}),o.on("click",".main-topic-up",function(){e($(this).closest(".main-topic"))}),o.on("click",".main-topic-down",function(){n($(this).closest(".main-topic"))}),o.on("click",".main-topic-edit",function(){i($(this).closest(".main-topic"))}),o.on("click",".main-topic-delete",function(){a($(this).closest(".main-topic"))}),o.on("click",".sub-topic-add",function(){h($(this).closest(".main-topic"))}),o.on("click",".sub-topic-up",function(){d($(this).closest(".sub-topic"))}),o.on("click",".sub-topic-down",function(){c($(this).closest(".sub-topic"))}),o.on("click",".sub-topic-edit",function(){u($(this).closest(".sub-topic"))}),o.on("click",".sub-topic-delete",function(){f($(this).closest(".sub-topic"))}),p(function(){s()}))},s=function(){var t=function(t,e,n){var i=o.find(".sub-topic-template").clone();i.removeClass(),i.addClass("sub-topic"),i.find(".sub-topic-arabic").val(e.arabic),i.find(".sub-topic-english").val(e.english),i.find(".articles-count").text("("+e.articles.length+")"),i.data("index",n),t.append(i)};o.find(".main-topics").text(JSON.stringify(r)),o.find(".main-topics").empty();for(var e=0;e<r.length;++e){var n=r[e],i=o.find(".main-topic-template").clone();i.removeClass(),i.addClass("main-topic"),i.find(".main-topic-arabic").val(n.arabic),i.find(".main-topic-english").val(n.english),i.data("index",e);for(var a=0;a<n.sub_tags.length;++a)t(i.find(".sub-topics"),n.sub_tags[a],a);o.find(".main-topics").append(i)}},e=function(t){var e=t.data("index");if(0!=e){var n=r.splice(e,1)[0];r.splice(e-1,0,n),m(),s()}},n=function(t){var e=t.data("index");if(e!=r.length-1){var n=r.splice(e,1)[0];r.splice(e+1,0,n),m(),s()}},i=function(t){var e=t.data("index");r[e].english=t.find(".main-topic-english").val(),r[e].arabic=t.find(".main-topic-arabic").val(),m(),s()},a=function(t){var e=t.data("index");r.splice(e,1),m(),s()},l=function(){var t=o.find(".main-topic-new-arabic").val(),e=o.find(".main-topic-new-english").val();t&&e?(r.push({english:e,arabic:t,sub_tags:[]}),o.find(".main-topic-new-arabic").val(""),o.find(".main-topic-new-english").val(""),m(),s()):alert("missing fields")},d=function(t){var e=t.data("index"),n=t.closest(".main-topic").data("index");if(0!=e){var i=r[n].sub_tags.splice(e,1)[0];r[n].sub_tags.splice(e-1,0,i),m(),s()}},c=function(t){var e=t.data("index"),n=t.closest(".main-topic").data("index");if(e!=r[n].sub_tags.length-1){var i=r[n].sub_tags.splice(e,1)[0];r[n].sub_tags.splice(e+1,0,i),m(),s()}},u=function(t){var e=t.data("index"),n=t.closest(".main-topic").data("index");r[n].sub_tags[e].english=t.find(".sub-topic-english").val(),r[n].sub_tags[e].arabic=t.find(".sub-topic-arabic").val(),m(),s()},f=function(t){var e=t.data("index"),n=t.closest(".main-topic").data("index");r[n].sub_tags.splice(e,1),m(),s()},h=function(t){var e=t.data("index"),n=t.find(".sub-topic-new-arabic").val(),i=t.find(".sub-topic-new-english").val();n&&i?(r[e].sub_tags.push({english:i,arabic:n,articles:[]}),m(),s()):alert("missing fields")},p=function(e){$.ajax({url:"/texts/tags/all",type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){r=t.result,e&&e()})},m=function(e){$.ajax({url:"/texts/tags/all",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({tags:r})}).done(function(t){assert(t.success,"fail to save tags"),e&&e()})},g=function(){$tagsEditorModal.modal("hide")};return{init:t,show:function(){$tagsEditorModal.modal({backdrop:"static"},"show")},getTags:function(){return r},addArticleToTag:function(e,n,t){var i=r.find(function(t){return t.english==e});assert(i,"fail to find main tag");var a=i.sub_tags.find(function(t){return t.english==n});assert(a,"fail to find sub tag"),-1==a.articles.indexOf(t)&&a.articles.push(t),m(),s()},removeArticleFromTag:function(e,n,t){var i=r.find(function(t){return t.english==e});assert(i,"fail to find main tag");var a=i.sub_tags.find(function(t){return t.english==n});assert(a,"fail to find sub tag");var o=a.articles.indexOf(t);assert(-1!=o,"fail to find articleIndex"),a.articles.splice(o,1),m(),s()}}}();$(function(){tagsEditorModal.init()});var teacherEmailCredentialsModal=function(){var i,a,o,r,t=function(){$("#teacher-email-credentials-modal").length&&((i=$("#teacher-email-credentials-modal")).find(".email-credentials-send-btn").click(function(t){var e=$(this);t.preventDefault();var n="/teachers/"+a+"/email_credentials";showAjaxSpinner(e),$.ajax({url:n,type:"POST",dataType:"json",contentType:"application/json"}).done(function(){hideAjaxSpinner(e),l(".teacher-email-credentials-confirmation")})}),i.find(".email-credentials-close-btn").click(function(){e()}))},s=function(t){i.find(".teacher-email-credentials-section").hide(),i.find(t).show(),i.data("visible-section",t)},l=function(t){var e=$("#teacher-email-credentials-modal").data("visible-section");i.find(e).slideUp(500,function(){i.find(t).slideDown(),i.data("visible-section",t)})},e=function(){i.modal("hide")};return{init:t,show:function(t,e,n){a=t,o=e,r=n,i.find(".email-credentials-name-value").text(o),i.find(".email-credentials-email-value").text(r),s(".teacher-email-credentials-request"),i.modal({backdrop:"static"},"show")}}}();$(function(){teacherEmailCredentialsModal.init()});var teacherUpdateDetailsModal=function(){var l,d,c,u,f,h,p,m,g,v,y,b,t=function(){$("#teacher-update-details-modal").length&&(l=$("#teacher-update-details-modal"),d=l.find(".update-container"),c=l.find(".done-container"),l.find(".update-details-close-btn").click(function(){e(),y(b)}),d.find(".update-reset-password-btn").click(function(t){var e=$(this);if(t.preventDefault(),confirm(_t("teacher.reset_password","name",f))){var n={password:generateRandomPassword()};showAjaxSpinner(e),$.ajax({url:"/teachers/"+u+"/reset-password",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(){hideAjaxSpinner(e),b.password=n.password,c.find(".success-message").html(_t("teacher.reset_password_confirmation")+n.password),switchModalContainer(d,c)})}}),d.find(".update-details-btn").click(function(t){var e=$(this);if(t.preventDefault(),!$(this).validate())return!1;var n=titleCase(d.find(".update-name").val().trim());if(n.toLowerCase()!=f.toLowerCase()&&v.find(function(t){return t.toLowerCase()==n.toLowerCase()}))return d.find(".update-name").markInvalid(_t("add_teacher.validation.name_used")),!1;var i={name:n,email:d.find(".update-email").val().trim()},a=!1;i.name!=f&&confirm(_t("teacher_update_details.change_username"))&&(a=!0);var o=function(){showAjaxSpinner(e),$.ajax({url:"/teachers/"+u,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(){hideAjaxSpinner(e),b.name=i.name,b.email=i.email,c.find(".success-message").html(_t("teacher.update_success")),switchModalContainer(d,c)})};(function(e){a?$.ajax({url:"/users/generate-username",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({prefix:g,name:i.name})}).done(function(t){t.success?(i.username=t.username,b.username=t.username,e()):assert(!1,"fail to generate username for teacher")}):e()})(function(){o()})}))},e=function(){l.modal("hide")};return{init:t,show:function(t,e,n,i,a,o,r,s){u=t,g=o,v=r,y=s,b={name:f=e,email:h=n,username:p=i,password:m=a},d.show(),c.hide(),d.find(".update-username").html(p),d.find(".update-password").val(m),d.find(".update-name").val(f),d.find(".update-email").val(h),l.modal({backdrop:"static"},"show"),l.resetFormValidation()}}}();$(function(){teacherUpdateDetailsModal.init()});var textsAuthorsModal=function(){var o,i,a,e,r,s=[],l=function(t){return t.replace(/[\u064e\u064b\u064f\u064c\u0650\u064d\u0652\u0651]/g,"")},t=function(){$("#texts-authors-modal").length&&($textsAuthorsModal=$("#texts-authors-modal"),o=$textsAuthorsModal.find(".search-container"),i=$textsAuthorsModal.find(".contact-container"),a=$textsAuthorsModal.find(".contact-confirmation-container"),e=$(".text-section"),$textsAuthorsModal.find(".close-btn").click(function(){f()}),o.find(".text-search-authors select").change(function(){u($(this).val())}),o.on("click","table a",function(){var t=$(this).data("id");f(),window.setTimeout(function(){window.location.href="#"+t},500)}),o.find(".btn-contact").click(function(){switchModalContainer(o,i,function(){})}),i.find(".btn-send-contact-author").click(function(){n($(this))}),d())},n=function(t){var e=i.find("textarea").val();if(e){showAjaxSpinner(t);var n={author:r,message:e};$.ajax({url:"/texts/authors/contact",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(){hideAjaxSpinner(t),switchModalContainer(i,a,function(){})})}},d=function(){var i={},a={};e.each(function(){var t=$(this),e=l(t.data("category"));s.push({id:t.attr("id"),title:t.data("title"),level:t.data("level"),type:t.data("type"),author:t.data("author"),author_id:t.data("author-id"),topic:t.data("topic"),category:e});var n=t.data("author");i[n]||(i[n]=0),i[n]+=1,a[n]=t.data("author-id")});var t=Object.keys(i);t.sort(),t.forEach(function(t){var e=a[t];o.find(".text-search-authors select").append("<option value='"+e+"'>"+t+" ("+i[t]+")</option>")})},c=function(t){var e="<tr><td>"+t.category+"</td><td>"+t.topic+"</td><td>"+t.title+"</td><td>"+t.author+"</td><td>"+t.level+"</td><td>"+t.type+"</td><td><a href='javascript:void(0)' data-id='"+t.id+"'>"+_t("texts-search.view")+"</a></td></tr>";o.find("table .results").append(e)},u=function(n){""!=n&&(r=n,o.find(".loading").removeClass("hidden"),o.find("table .results").empty(),o.find("table .no-results").addClass("hidden"),$.ajax({url:"/texts/authors/bio?author="+n,type:"GET",dataType:"json",contentType:"application/json"}).done(function(t){assert(t.success,"fail to load bio");var e=$("<img/>");e.one("load",function(){e.remove(),o.find(".loading").addClass("hidden"),o.find(".author-profile").removeClass("hidden"),o.find(".author-profile .photo").empty(),o.find(".author-profile .photo").append("<img src='"+t.result.image+"'>"),o.find(".author-profile .bio pre").text(t.result.bio),s.forEach(function(t){t.author_id==n&&c(t)}),o.find("table .results tr").length||o.find("table .no-results").removeClass("hidden")}).attr("src",t.result.image)}))},f=function(){$textsAuthorsModal.modal("hide")};return{init:t,show:function(t){o.find("select").val(""),o.find("table .results").empty(),o.find("table .no-results").removeClass("hidden"),o.find(".loading").addClass("hidden"),o.find(".loading").addClass("hidden"),o.find(".author-profile").addClass("hidden"),o.show(),i.hide(),a.hide(),i.find("textarea").val(""),hideAjaxSpinner(i.find(".btn")),r=null,t&&(o.find(".text-search-authors select").val(t),o.find(".text-search-authors select").change()),$textsAuthorsModal.modal({backdrop:!0},"show"),$textsAuthorsModal.on("shown.bs.modal",function(){$textsAuthorsModal.scrollTop(0)})}}}();$(function(){textsAuthorsModal.init()});var textsSearchModal=function(){var i,a,l=[],d=function(t){return t.replace(/[\u064e\u064b\u064f\u064c\u0650\u064d\u0652\u0651]/g,"")},t=function(){$("#texts-search-modal").length&&($textsSearchModal=$("#texts-search-modal"),i=$textsSearchModal.find(".search-container"),a=$(".text-section"),$textsSearchModal.find(".close-btn").click(function(){s()}),i.find(".text-search-topics select").change(function(){n($(this).val())}),i.find(".text-search-fields select").change(function(){r($(this).val())}),i.on("click","table a",function(){var t=$(this).data("id");s(),window.setTimeout(function(){window.location.href="#"+t},500)}),e())},e=function(){var o={},r={},s={};for(var t in a.each(function(){var t=$(this),e=d(t.data("category"));l.push({id:t.attr("id"),title:t.data("title"),level:t.data("level"),type:t.data("type"),author:t.data("author"),topic:t.data("topic"),category:e});var n=e+" - "+t.data("topic");o[n]||(o[n]=0),o[n]+=1;var i=t.data("level"),a=t.data("type");i&&(r[i]||(r[i]=0),r[i]+=1),a&&(s[a]||(s[a]=0),s[a]+=1)}),o)assert(2==t.split(" - ").length,"fail to validate search topic"),i.find(".text-search-topics select").append("<option value='"+t+"'>"+t+" ("+o[t]+")</option>");for(var e in r)i.find(".text-search-fields select").append("<option value='level - "+e+"'>"+_t("texts-search.level")+e+" ("+r[e]+")</option>");for(var n in s)i.find(".text-search-fields select").append("<option value='type - "+n+"'>"+_t("texts-search.type")+n+" ("+s[n]+")</option>")},o=function(t){var e="<tr><td>"+t.category+"</td><td>"+t.topic+"</td><td>"+t.title+"</td><td>"+t.author+"</td><td>"+t.level+"</td><td>"+t.type+"</td><td><a href='javascript:void(0)' data-id='"+t.id+"'>"+_t("texts-search.view")+"</a></td></tr>";i.find("table .results").append(e)},n=function(e){var n=e.split(" - ")[0];e=e.split(" - ")[1];i.find("table .results").empty(),i.find("table .no-results").addClass("hidden"),l.forEach(function(t){t.category==n&&t.topic==e&&o(t)}),i.find("table .results tr").length||i.find("table .no-results").removeClass("hidden")},r=function(t){var e=t.split(" - ")[0],n=t.split(" - ")[1];i.find("table .results").empty(),i.find("table .no-results").addClass("hidden"),l.forEach(function(t){("level"==e&&n==t.level||"type"==e&&n==t.type)&&o(t)}),i.find("table .results tr").length||i.find("table .no-results").removeClass("hidden")},s=function(){$textsSearchModal.modal("hide")};return{init:t,show:function(t){assert("topic"==t||"field"==t,"invalid searchBy"),i.find(".text-search-container").addClass("hidden"),"topic"==t?i.find(".text-search-topics").removeClass("hidden"):i.find(".text-search-fields").removeClass("hidden"),i.find("select").val(""),i.find("table .results").empty(),i.find("table .no-results").removeClass("hidden"),$textsSearchModal.modal({backdrop:!0},"show")}}}();if($(function(){textsSearchModal.init()}),$(function(){if($("#payments-process-waiting").length){var t=$("#payments-process-waiting").data("pid");$.ajax({url:"/payments/"+t+"/process",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){window.location.href=t.url})}$("#payments-process-new-school").length&&$(".btn-submit-details").click(function(t){var e=$(this);if(t.preventDefault(),!e.validate())return!1;var n=$(this).closest("form"),i=$("#payments-process-new-school").data("pid"),a=n.find(".school-name").val().trim(),o=n.find(".school-abbr").val().toLowerCase().trim(),r=n.find(".email").val().trim(),s=n.find(".teacher-name").val().trim(),l={school_name:a,school_abbr:o,school_email:r,school_username:o+".school",school_password:generateRandomPassword(),school_country:$("#payments-process-new-school").data("country"),students_count:$("#payments-process-new-school").data("students"),teachers_count:1,school_add_students:!0,school_create_teacher:!0,school_teacher_account:s,notify:!0,english:$("body").hasClass("english"),_method:"PUT"};return showAjaxSpinner(e),$.ajax({url:"/schools",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(l)}).done(function(t){assert(t.success,"fail to create school during payment activation"),$.ajax({url:"/payments/"+i+"/user",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({user_id:t.id})}).done(function(){window.location.href="/payments/"+i+"/process"})}),!1})}),$(function(){if($("#referer").length){var t=function(t){$target=$("."+t.data("target")),$(".show-section").removeClass("active"),t.addClass("active"),$(".referer-section").addClass("hidden"),$target.removeClass("hidden")},e=function(){if(!$(".table-referer-stats").hasClass("loaded")){$(".table-referer-stats").addClass("loaded");var t=$("body").data("user-id");$.ajax({url:"/referers/"+t+"/stats",type:"GET",dataType:"json",contentType:"application/json",cache:!1}).done(function(t){if(assert(t.success,"fail to load referer stats"),$(".table-referer-stats .loading-row").hide(),Object.keys(t.results).length){var e=t.results;for(var n in e){var i=$("<tr></tr>");i.append("<td>"+n+"</td>"),i.append("<td>"+e[n][0]+"</td>"),i.append("<td>"+e[n][1]+"</td>"),i.append("<td>"+e[n][2]+"</td>"),$(".table-referer-stats").append(i)}}else $(".table-referer-stats .no-results").removeClass("hidden")})}};$(".show-section").click(function(){"referer-stats"==$(this).data("target")&&e(),t($(this))}),$(".btn-update-bank-details").click(function(t){t.preventDefault(),refererBankDetailsModal.show(function(){location.reload()})}),$(".btn-payment-request").click(function(){var e=$(this),t=function(){showAjaxSpinner(e);var t=$("body").data("user-id");$.ajax({url:"/referers/"+t+"/payment_request",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){assert(t.success,"fail to send referer payment request"),hideAjaxSpinner(e),alertModal.show(function(){location.reload()})})};$(".bank-details-entry").data("provided")?t():refererBankDetailsModal.show(function(){t()})}),window.setTimeout(function(){$("#referer").data("active")||refererAgreementModal.show(function(){location.reload()})},500)}}),$(function(){var e=function(t){return t.toFixed(2).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")},s=function(t){return t.toFixed(0).replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")},l=function(t){return t=Math.round(t/6e4),e(t/60)},d=function(t){return t=Math.round(t/1e3),e(t/60)},c=function(t){return"%"+e(t)},u=function(t){t.lesson&&($(".games-duration").html(l(t.lesson.duration)),$(".games-activities").html(s(t.lesson.activities)),$(".games-percentage").html(c(t.lesson.percentage))),t.sightword&&($(".sightwords-duration").html(l(t.sightword.duration)),$(".sightwords-activities").html(s(t.sightword.activities)),$(".sightwords-percentage").html(c(t.sightword.percentage))),t["interactive-worksheet"]&&($(".worksheets-duration").html(l(t["interactive-worksheet"].duration)),$(".worksheets-activities").html(s(t["interactive-worksheet"].activities)),$(".worksheets-percentage").html(c(t["interactive-worksheet"].percentage))),t.grammar&&($(".grammar-duration").html(l(t.grammar.duration)),$(".grammar-activities").html(s(t.grammar.activities)),$(".grammar-percentage").html(c(t.grammar.percentage))),t.story&&($(".stories-duration").html(l(t.story.duration)),$(".stories-activities").html(s(t.story.activities)),$(".stories-percentage").html(c(t.story.percentage))),t.storysheet&&($(".storysheets-duration").html(l(t.storysheet.duration)),$(".storysheets-activities").html(s(t.storysheet.activities)),$(".storysheets-percentage").html(c(t.storysheet.percentage))),t.text&&($(".texts-duration").html(l(t.text.duration)),$(".texts-activities").html(s(t.text.activities)),$(".texts-percentage").html(c(t.text.percentage))),t.textsheet&&($(".textsheets-duration").html(l(t.textsheet.duration)),$(".textsheets-activities").html(s(t.textsheet.activities)),$(".textsheets-percentage").html(c(t.textsheet.percentage))),t.treasure&&($(".treasure-duration").html(l(t.treasure.duration)),$(".treasure-activities").html(s(t.treasure.activities)),$(".treasure-percentage").html(c(t.treasure.percentage)))},f=function(e){var t=Chart.helpers.color,n=Object.keys(e.dates);n.sort();var i=n.map(function(t){return e.dates[t].all}),a=n.map(function(t){return e.dates[t].hw}),o={labels:n,datasets:[{label:_t("reports.chart.hw_activities"),backgroundColor:t("#36a2eb").rgbString(),borderColor:t("#36a2eb").rgbString(),borderWidth:1,data:a},{label:_t("reports.chart.activities"),backgroundColor:t("#999999").rgbString(),borderColor:t("#999999").rgbString(),borderWidth:1,data:i}]},r=document.getElementById("chart-daily").getContext("2d");window.myBar=new Chart(r,{type:"bar",data:o,options:{responsive:!0,legend:{position:"top",labels:{fontSize:21,fontColor:"#000",fontFamily:"nice-font"}},title:{display:!1},tooltips:{mode:"index",intersect:!1,titleFontSize:12,bodyFontSize:13,bodyFontFamily:"nice-font",rtl:!0},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!1}]}}})},h=function(t){var e={type:"doughnut",data:{datasets:[{data:[t.lesson?t.lesson.activities:0,t.sightword?t.sightword.activities:0,t["interactive-worksheet"]?t["interactive-worksheet"].activities:0,t.grammar?t.grammar.activities:0,t.story?t.story.activities:0,t.storysheet?t.storysheet.activities:0,t.text?t.text.activities:0,t.textsheet?t.textsheet.activities:0,t.treasure?t.treasure.activities:0],backgroundColor:["#ff6384","#36a2eb","#f58231","#ffce56","#999999","#ba55d3","#32cd32","#d2b48c"],label:_t("reports.chart.sections")}],labels:[$(".games-text").text(),$(".sightwords-text").text(),$(".worksheets-text").text(),$(".grammar-text").text(),$(".stories-text").text(),$(".storysheets-text").text(),$(".texts-text").text(),$(".textsheets-text").text(),$(".treasure-text").text()]},options:{responsive:!0,legend:{position:"top",labels:{fontColor:"#000",fontFamily:"nice-font",fontSize:14}},title:{display:!1},tooltips:{titleFontFamily:"nice-font",bodyFontFamily:"nice-font",titleFontSize:12,bodyFontSize:13,rtl:!0},animation:{animateScale:!0,animateRotate:!0}}};$("#chart-sections").css("display","block");var n=document.getElementById("chart-sections").getContext("2d");window.myDoughnut=new Chart(n,e)};if($("#student-report .btn-report-view, #teacher-report .btn-report-view").click(function(){var t=$(".report-filter-student").val(),e=$(".report-filter-duration").val();if("-1"==t){var n=$("#student-report,#teacher-report").data("teacher-id");window.location="/reports/teachers/"+n+"?duration="+e}else window.location="/reports/students/"+t+"?duration="+e}),$("#school-report .btn-report-view").click(function(){var t=$(".report-filter-teacher").val(),e=$(".report-filter-duration").val();window.location="-1"==t?"/reports/school?duration="+e:"/reports/teachers/"+t+"?duration="+e}),$("#school-report").length){var t=$("#student-report").data("student-id"),o=$(".report-filter .report-filter-duration").val(),a=$(".report-filter .report-filter-duration option[value='"+o+"']").text();$.ajax({url:"/reports/school/data",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({duration:o})}).done(function(t){$(".report-loading-section").addClass("hidden"),$(".report-data-section").removeClass("hidden");t.result.header;var e=t.result.general,n=(t.result.average,t.result.sections),i=t.result.teachers;$(".duration-text").html(a),$(".general-dates-count").html(e.dates_count),$(".general-views").html(s(e.views)),$(".general-activities").html(s(e.activities)),$(".general-duration").html(l(e.duration)),$(".general-hws-count").html(s(e.hws_count)),$(".general-hw-activities").html(s(e.hw_activities)),$(".general-hw-duration").html(l(e.hw_duration)),$(".general-hw-percentage").html(c(e.hw_percentage)),f(e),u(n),h(n),i.length&&$(".table-teachers").find(".no-records").remove(),i.forEach(function(t){var e=$(".template-teacher").clone();e.removeClass("template template-teacher"),e.find(".name").html(t.name),e.find(".classrooms").html(t.classrooms_count),e.find(".students").html(t.students_count),e.find(".hws").html(t.hws_count),e.find(".activities").html(s(t.activities)),e.find(".duration").html(l(t.duration)),e.find(".report-link").attr("href","/reports/teachers/"+t.id+"?duration="+o),$(".table-teachers").append(e)})})}if($("#teacher-report").length){var n=$("#teacher-report").data("teacher-id");o=$(".report-filter .report-filter-duration").val(),a=$(".report-filter .report-filter-duration option[value='"+o+"']").text();$.ajax({url:"/reports/teachers/"+n+"/data",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({duration:o})}).done(function(t){$(".report-loading-section").addClass("hidden"),$(".report-data-section").removeClass("hidden");t.result.header;var e=t.result.average,n=t.result.general,i=t.result.sections,a=t.result.students;$(".general-dates-count").html(n.dates_count),$(".general-views").html(s(n.views)),$(".general-activities").html(s(n.activities)),$(".general-duration").html(l(n.duration)),$(".general-total-students").html(n.students_total),$(".general-students").html(n.students),$(".general-students-percentage").html(c(n.students_percentage)),$(".general-average-views").html(s(e.views)),$(".general-average-activities").html(s(e.activities)),$(".general-hws-count").html(s(n.hws_count)),$(".general-hw-activities").html(s(n.hw_activities)),$(".general-hw-duration").html(l(n.hw_duration)),$(".general-hw-percentage").html(c(n.hw_percentage)),$(".general-hw-students").html(n.hw_students_count),$(".general-hw-average-activities").html(s(e.hw_activities)),$(".general-hw-average-duration").html(l(e.hw_duration)),f(n),u(i),h(i),a.length&&$(".table-students").find(".no-records").remove(),a.forEach(function(t){var e=$(".template-student").clone();e.removeClass("template template-student"),e.data("id",t.id),e.find(".classroom").html(t.classroom),e.find(".name").html(t.name),e.find(".duration").html(l(t.duration)),e.find(".hws").html(t.hws_count),e.find(".activities").html(s(t.activities)),e.find(".report-link").attr("href","/reports/students/"+t.id+"?duration="+o),$(".table-students").append(e)})})}if($("#student-report").length){t=$("#student-report").data("student-id"),o=$(".report-filter .report-filter-duration").val(),a=$(".report-filter .report-filter-duration option[value='"+o+"']").text();$.ajax({url:"/reports/students/"+t+"/data",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({duration:o})}).done(function(t){$(".report-loading-section").addClass("hidden"),$(".report-data-section").removeClass("hidden");t.result.header;var e=t.result.general,n=t.result.sections,i=t.result.homeworks,a=t.result.activities,o=t.result.sightwords;if($(".general-dates-count").html(e.dates_count),$(".general-views").html(s(e.views)),$(".general-activities").html(s(e.activities)),$(".general-duration").html(l(e.duration)),$(".general-hws-count").html(s(e.hws_count)),$(".general-hw-activities").html(s(e.hw_activities)),$(".general-hw-duration").html(l(e.hw_duration)),$(".general-hw-percentage").html(c(e.hw_percentage)),f(e),u(n),h(n),i.length&&$(".table-homework").find(".no-records").remove(),i.forEach(function(t){var e=$(".template-homework").clone();e.removeClass("template template-homework"),e.find(".homework-date").html(t.created_at),e.find(".homework-title").html(t.title),e.find(".homework-activities").html(t.total_lessons),e.find(".homework-completion-percentage").html(c(t.completion_percentage)),e.find(".homework-duration").html(d(t.duration)),e.find(".homework-mistakes").html(t.mistakes),$(".table-homework").append(e);var n=$("<tr><td colspan='7' class='homework-details-cell-container'><div class='homework-details-cell'></div></td></tr>"),i=$(".table-homework-lessons.template").clone();i.removeClass("template"),t.lessons.forEach(function(t){var e=i.find(".template-homework-lesson").clone();e.removeClass("template-homework-lesson template"),e.find(".homework-lesson-type").html(t.lesson_type),e.find(".homework-lesson-title").html(t.lesson_title),e.find(".homework-lesson-status").html(t.completed?_t("reports.hw.complete"):_t("reports.hw.incomplete")),e.find(".homework-lesson-duration").html(d(t.duration)),e.find(".homework-lesson-mistakes").html(t.mistakes),i.append(e)}),i.find(".template-homework-lesson").remove(),n.find(".homework-details-cell").append(i),$(".table-homework").append(n),n.find(".homework-details-cell").css("display","none")}),a.length&&$(".table-activities").find(".no-records").remove(),o&&o.length){var r=o.join(
' <span class="separator">\u060c</span> ');$(".report-fields-sightwords .report-fields-content .summary.no-progress").remove(),$(".report-fields-sightwords .report-fields-content .hidden").removeClass("hidden"),$(".report-fields-sightwords .details .words").html(r),$(".report-fields-sightwords .summary .words-count").text(o.length)}a.forEach(function(t){var e=$(".template-activity").clone();e.removeClass("template template-activity"),e.find(".activity-time").html(t.created_at),e.find(".activity-type").html(t.lesson_type),e.find(".activity-title").html(t.lesson_title),e.find(".activity-homework").html(t.homework?_t("reports.status.hw"):_t("reports.status.free")),e.find(".activity-duration").html(d(t.duration)),e.find(".activity-mistakes").html(t.mistakes),$(".table-activities").append(e)})}),$(document).on("click",".btn.homework-lessons",function(t){t.preventDefault();var e=$(this),n=e.closest("tr").next().find(".homework-details-cell");n.is(":hidden")?(n.slideDown(),e.removeClass("btn-primary"),e.addClass("btn-default"),e.text(e.data("hide-text"))):(n.slideUp(),e.removeClass("btn-default"),e.addClass("btn-primary"),e.text(e.data("show-text")))})}}),$(function(){if($("#school-students").length){$(".btn-create-students").click(function(){var a={},t=[];$("#school-students .school-teachers > div").each(function(){t.push($(this).text())}),t.forEach(function(t){a[t]={}}),$(".school-students-table-container .school-students-table tbody").find("tr").each(function(){var t=$(this),e=t.find(".t").text(),n=t.find(".c").text(),i=t.find(".s").text();assert(a[e],"unknown teacher "+e),a[e][n]||(a[e][n]=[]),a[e][n].push(i)});var e=$("#school-students").data("remaining-count");studentsBulkCreateModal.show(a,e,!0,function(){location.reload()})}),$(".btn-second-teacher").length&&$(".btn-second-teacher").click(function(){var a={},t=[];$("#school-students .school-teachers > div").each(function(){t.push($(this).text())}),t.forEach(function(t){a[t]={}}),$(".school-students-table-container .school-students-table tbody").find("tr").each(function(){var t=$(this),e=t.find(".t").text(),n=t.find(".c").text(),i=t.find(".e").text();assert(a[e],"unknown teacher "+e),n in a[e]||(a[e][n]=!0),""==i&&(a[e][n]=!1)}),secondTeacherModal.show(a,function(){location.reload()})});var t=function(t){var o={},r={};return $(".school-students-table tbody").find("tr").each(function(){var t=$(this),e=t.find(".t").data("id"),n=t.find(".t").text(),i=t.find(".c").data("id"),a=t.find(".c").text();o[e]||(o[e]={id:e,name:n,counter:0,classes:[]}),r[i]||(r[i]={id:i,name:a,counter:0},o[e].classes.push(r[i])),o[e].counter+=1,r[i].counter+=1}),t&&$("#school-students .school-teachers > div").each(function(){var t=$(this),e=t.data("id"),n=t.text();o[e]||(o[e]={id:e,name:n,counter:0,classes:[]})}),Object.values(o)};$(".btn-delete-students").click(function(){schoolStudentsDeleteModal.show(t(!1),function(){location.reload()})}),$(".btn-move-students").click(function(){studentsMoveModal.show($("#school-students").data("school-id"),t(!0),function(a){var o={};return $(".school-students-table tbody").find("tr").each(function(){var t=$(this),e=t.find(".c").data("id"),n=t.find(".s").data("id"),i=t.find(".s").text();e==a&&(o[n]=i)}),o},function(){location.reload()})}),$(".btn-bulk-login").click(function(){var r=[];$(".school-students-table tbody").find("tr").each(function(){var t=$(this),e=t.find(".s").text(),n=t.find(".s").data("id"),i=t.find(".e").text(),a=""!=t.find(".e").text().trim(),o=""==t.find(".tracked-entry").text().trim();a&&o&&r.push({id:n,name:e,email:i})}),studentsBulkLoginModal.show($("#school-students").data("school-id"),r,function(){location.reload()})}),$(document).on("click",".btn-student-settings",function(){var i=$(this),a=i.closest("tr"),t=a.find(".s").data("id"),e=a.find(".s").text(),n=a.find(".e").text(),o=a.find(".c").text(),r=a.find(".t").text(),s=a.find(".u").text(),l=a.find(".p").text(),d=a.find(".s").data("english"),c={id:t,name:e,email:n,classroom:o,teacher:r,username:s,password:l,english:d};studentSettingsModal.show(c,function(){studentEmailCredentialsModal.show(t,e,n,d,function(){location.reload()})},function(){studentUpdateDetailsModal.show(t,e,n,d,s,l,!1,function(){location.reload()})},function(){var n=c.id,t=c.name;deleteWarningModal.show(t,function(){var t=$(".ajax-spinner").first().clone();t.show(),i.hide(),i.parent().append(t);var e={_method:"DELETE"};$.ajax({url:"/students/"+n,type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(){a.remove()})})})})}}),$(function(){$(".joined-accounts-dropdown").length&&$(".joined-accounts-dropdown").change(function(){var t=$(".joined-accounts-dropdown option:selected").text();confirm(_t("sessions.joined_accounts","account",t))&&(window.location="/sessions/"+this.value+"/signin")}),$("#signin, #forgot-password").length&&($(".signin-btn").click(function(t){t.preventDefault();var e=$(this);e.validate()&&($(".signin-btn").closest("form").find("#t").val(_g_t_),$(".signin-btn").closest("form").find("#k").val(_g_k($("#inputName").trimval().substring(0,4),$(".signin-btn").closest("form").find("#t").val().substr(0,5))),showAjaxSpinner(e),e.closest("form").submit())}),$(".forgot-btn").click(function(t){t.preventDefault();var e=$(this);e.validate()&&($(".forgot-btn").closest("form").find("#t").val(_g_t_),$(".forgot-btn").closest("form").find("#k").val(_g_k($("#inputEmail").trimval().substring(0,4),$(".forgot-btn").closest("form").find("#t").val().substr(0,5))),showAjaxSpinner(e),e.closest("form").submit())}))}),$(document).ready(function(){if($("#sightwords-index").length){var n=[],i=function(e){e&&(n=jQuery.grep(n,function(t){return t!=$(e.currentTarget).attr("src")}),$("#sightwords-index .img-sightword.sprite-"+$(this).data("sightword-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove()),n.length<=5&&$("[data-sightword-sprite]").each(function(){if(!(5<n.length)){var t=$(this).attr("data-sightword-sprite");$(this).removeAttr("data-sightword-sprite");var e=$(this).attr("data-sightword-sprite-url");n.push(e),$img=$("<img/>"),$img.data("sightword-sprite",t),$img.one("load",i).attr("src",e)}})};i(),$(".get-reward").click(function(){var t=$(this);sightwordsRewardModal.showGetReward(function(){window.location=t.data("url")})}),$(".wait-reward").click(function(){sightwordsRewardModal.showWaitReward(function(){})}),$(".printing-btn").click(function(){var t=$(this);return printableLimitModal.downloadPrintable(t.attr("data-href"),function(){}),!1})}}),$(function(){$("#multi-login").length&&$(".switch-link").click(function(){$.ajax({url:"/device/switch",type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){t.success?window.location=t.url:assert(!1,"failure in device switch")})}),$("#subscription").length&&$(".stripe .btn-purchase").click(function(t){var e=$(this);if(t.preventDefault(),$("body").data("user-id"))return showAjaxSpinner(e),$.ajax({url:e.attr("href"),type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){if(t.success){var e=t.result;Stripe($("#subscription").data("key")).redirectToCheckout({sessionId:e})}else assert(!1,"fail to init purchase item")}),!1;alertModal.show(function(){window.location="/signin"})})}),$(function(){$("#store-index").length&&$(".game-click").click(function(){var t=$(this).closest(".game-cell"),e=t.data("id");if(t.hasClass("purchased"))window.location.href="/store/"+e;else{var n=parseInt($(".score-amount").text());600<=n?purchaseModal.show(e,n,function(){$(".score-amount").text(parseInt($(".score-amount").text())-600),$(".game-cell[data-id='"+e+"']").addClass("purchased"),$(".view-purchased-game").attr("href","/store/"+e)}):notEnoughMoneyModal.show()}})}),$(document).ready(function(){if($("#stories-index").length){var i=[],a=function(e){e&&(i=jQuery.grep(i,function(t){return t!=$(e.currentTarget).attr("src")}),$(this).data("worksheet-sprite")&&$("#stories-index .img-story-worksheet.sprite-"+$(this).data("worksheet-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).data("storysheet-sprite")&&$("#stories-index .img-storysheet.sprite-"+$(this).data("storysheet-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove()),i.length<=5&&$("[data-worksheet-sprite]").each(function(){if(!(5<i.length)){var t=$(this).attr("data-worksheet-sprite");$(this).removeAttr("data-worksheet-sprite");var e=$(this).attr("data-worksheet-sprite-url");if(i.push(e),$img=$("<img/>"),$img.data("worksheet-sprite",t),$img.one("load",a).attr("src",e),$(".storysheets-"+t).length){var n=$(".storysheets-"+t).attr("data-storysheets-sprite-url");i.push(n),$img=$("<img/>"),$img.data("storysheet-sprite",t),$img.one("load",a).attr("src",n)}}})};a(),$(".story-worksheet-box > a").click(function(){if(!notifyFreeWorksheets($("#stories-index"),5))return!1;var t=$(this);return printableLimitModal.downloadPrintable(t.attr("data-href"),function(){t.find("downloaded-tick").length||t.append('<div class="downloaded-tick downloaded"></div>')}),!1})}}),$(function(){if($("#student").length){$("#student").data("school-code");var n=parseInt($("#student").data("size")),l=$("#student").data("classroom"),d=$("#student").data("classroom-name"),c=$("#student").data("others-size"),a=function(t){var e=$("#student-"+t);return{id:e.data("id"),password:e.data("password"),email:e.data("email"),classroom:e.data("classroom"),name:e.data("name"),username:e.data("username"),tracked:e.data("tracked"),emailed:e.data("emailed"),english:e.data("english")}},u=function(e,t){$(".students-table-container").show();var n=$("#row-template").clone();n.removeClass("hidden"),Object.keys(e).forEach(function(t){n.data(t,e[t])}),n.find(".classroom-value").html(e.classroom),n.find(".name-value").html(e.name),n.find(".language-value").html(e.english?_t("language.english"):_t("language.arabic")),n.find(".username-value").html(e.username),n.find(".password-value").html(e.password),n.find(".email-value").html(e.email),e.email&&n.find(".btn-add-email").remove(),e.tracked?n.find(".tracked-entry .emailed").remove():e.emailed?n.find(".tracked-entry .tracked").remove():n.find(".tracked-entry > div").remove();var i="student-"+e.id;$("#"+i).length?($("#"+i).before(n),$("#"+i).remove()):t?$("#row-template").parent().prepend(n):$("#row-template").before(n),n.attr("id","student-"+e.id)};$("#add-student").click(function(t){var i=parseInt($("#student").attr("data-students"));if(t.preventDefault(),!$(this).validate())return!1;if(0!==n&&n-c<=i)return maxStudentsModal.show(n),!1;var a=titleCase($(".student-name").val().trim()),o=$(".student-email").val().trim(),r=($(".student-name").data("prefix"),generateRandomPassword()),e=$("#student").data("school-code"),s=$(this);showAjaxSpinner(s),$.ajax({url:"/students/generate-username",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({prefix:e,name:a})}).done(function(t){if(t.success){var e=t.username;$(".student-name").val(""),$(".student-email").val("");var n={student_name:a,student_password:r,email:o,username:e,classroom_id:l+""};$.ajax({url:"/students",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(t){var e={id:t.id,password:t.password,email:o,classroom:d,name:t.name,username:t.username,tracked:!1,emailed:!1,english:t.english};u(e,!0),$("#student").attr("data-students",i+1),hideAjaxSpinner(s)})}else assert(!1,"fail to generate username")})}),$(document).on("click",".btn-settings",function(){var t=$(this).closest("tr"),e={id:t.data("id"),name:t.data("name"),email:t.data("email"),classroom:t.data("classroom"),teacher:null,username:t.data("username"),password:t.data("password"),english:t.data("english")};studentSettingsModal.show(e,function(){t.find(".btn-email-credentials").click()},function(){t.find(".btn-update").click()},function(){t.find(".btn-delete").click()})}),$(document).on("click",".btn-delete",function(){var n=$(this),i=n.closest("tr"),a=i.data("id"),t=i.data("name");deleteWarningModal.show(t,function(){showAjaxSpinner(n);var t=parseInt($("#student").attr("data-students")),e={_method:"DELETE"};$.ajax({url:"/students/"+a,type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(function(){i.remove(),$("#student").attr("data-students",t-1)})})}),$(document).on("click",".btn-qr",function(){var t=$(this).closest("tr"),e=t.data("id"),n=t.data("name");qrCodeModal.show(e,n)}),$(document).on("click",".btn-email-credentials",function(){var n=$(this).closest("tr");studentEmailCredentialsModal.show(n.data("id"),n.data("name"),n.data("email"),n.data("english"),function(t){var e=a(n.data("id"));e.email=t,e.emailed=!0,u(e)})}),$(document).on("click",".btn-update,.btn-add-email",function(){var n=$(this).closest("tr");studentUpdateDetailsModal.show(n.data("id"),n.data("name"),n.data("email"),n.data("english"),n.data("username"),n.data("password"),$(this).hasClass("btn-add-email"),function(t){var e=a(n.data("id"));e.name=t.name,e.email=t.email,e.password=t.password,e.english=t.english,u(e)})}),$("#student-data-container")&&($(".student-data").each(function(t,e){var n=$(e),i={id:n.data("id").toString(),password:n.data("password").toString(),email:n.data("email"),classroom:n.data("classroom").toString(),name:n.data("name").toString(),username:n.data("username").toString(),tracked:n.data("tracked"),emailed:n.data("emailed"),english:n.data("english")};u(i,!1)}),$("#student-data-container").remove(),window.setTimeout(function(){1250<$("table.students-table").width()&&$(".students-table-container").addClass("compact-details")},500)),$(".btn-students-change-class").click(function(){var t=$("#student").data("classroom-name"),n=[];$("tr").each(function(){var t=$(this);if(t.attr("id")&&t.attr("id").startsWith("student-")){var e=t.attr("id").replace("student-","");n.push(a(e))}}),studentsChangeClassModal.show(t,n,function(){location.reload()})}),$(document).on("click",".cell-language .btn-toggle",function(){var t=$(this),e=t.closest("tr").data("id"),n=a(e);n.english=!n.english;var i={name:n.name,email:n.email,english:n.english};t.find("span").addClass("rotate"),showAjaxSpinner(t),$.ajax({url:"/students/"+e,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(){u(n)})})}$("#students-print").length&&window.print()}),$(function(){if($("#teacher").length){$("#teacher").data("school-code");var l=function(){var n=[];return $(".teachers-table tbody > tr").each(function(){var t=$(this);if("row-template"!=t.attr("id")){var e=t.attr("id").split("-")[1];n.push(i(e))}}),n},i=function(t){var e=$("#teacher-"+t);return{id:e.data("id"),password:e.data("password"),email:e.data("email"),name:e.data("name"),students:e.data("students"),username:e.data("username")}},d=function(e,t){$(".teachers-table-container").show();var n=$("#row-template").clone();n.removeClass("hidden"),Object.keys(e).forEach(function(t){n.data(t,e[t])}),n.find(".name-value").html(e.name),n.find(".username-value").html(e.username),n.find(".password-value").html(e.password),n.find(".email-value").html(e.email),n.find(".students-value").html(0==e.students?"-":e.students);var i="teacher-"+e.id;$("#"+i).length?($("#"+i).before(n),$("#"+i).remove()):t?$("#row-template").parent().prepend(n):$("#row-template").before(n),n.attr("id","teacher-"+e.id)};$("#add-teacher").click(function(t){var e=parseInt($("#teacher").attr("data-size")),n=$(".teachers-table tbody tr").length-1;if(t.preventDefault(),!$(this).validate())return!1;if(0!==e&&e-n<1)return maxTeachersModal.show(e),!1;var i=titleCase($(".teacher-name").val().trim()),a=$(".teacher-email").val().trim(),o=$(".teacher-name").data("prefix"),r=generateRandomPassword();if(-1!=l().map(function(t){return t.name.toLowerCase()}).indexOf(i.toLowerCase()))return $(".teacher-name").markInvalid(_t("add_teacher.validation.name_used")),!1;var s=$(this);showAjaxSpinner(s),$.ajax({url:"/users/generate-username",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({prefix:o,name:i})}).done(function(t){if(t.success){var e=t.username;$(".teacher-name").val(""),$(".teacher-email").val("");var n={teacher_name:i,teacher_password:r,email:a,username:e};$.ajax({url:"/teachers",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(t){var e={id:t.id,password:t.password,email:t.email,students:0,name:t.name,username:t.username};d(e,!0),hideAjaxSpinner(s)})}else assert(!1,"fail to generate username for teacher")})}),$(document).on("click",".btn-delete",function(){var e=$(this),n=e.closest("tr"),i=n.data("id"),t=n.data("name");deleteWarningModal.show(t,function(){showAjaxSpinner(e);var t={_method:"DELETE"};$.ajax({url:"/teachers/"+i,type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(function(){n.remove()})})}),$(document).on("click",".btn-email-credentials",function(){var t=$(this).closest("tr");if(!t.data("email"))return alert(_t("teacher.missing_email")),t.find(".btn-update").trigger("click"),void window.setTimeout(function(){$(".update-email").focus()},500);teacherEmailCredentialsModal.show(t.data("id"),t.data("name"),t.data("email"))}),$(document).on("click",".btn-update",function(){var n=$(this).closest("tr");$(".update-username").html(n.data("username")),$(".update-password").html(n.data("password")),$(".update-name").val(n.data("name")),$(".update-email").val(n.data("email"));var t=l().map(function(t){return t.name.toLowerCase()});teacherUpdateDetailsModal.show(n.data("id"),n.data("name"),n.data("email"),n.data("username"),n.data("password"),$(".teacher-name").data("prefix"),t,function(t){var e=i(n.data("id"));e.name=t.name,e.email=t.email,e.password=t.password,e.username=t.username,d(e)})}),$("#teacher-data-container")&&($(".teacher-data").each(function(t,e){var n=$(e),i={id:n.data("id").toString(),password:n.data("password").toString(),email:n.data("email"),name:n.data("name").toString(),students:n.data("students"),username:n.data("username")};d(i,!1)}),$("#teacher-data-container").remove())}$("#content-access").length&&$(".btn-access-settings").click(function(){showAjaxSpinner($(this)),$(".content-access-form").submit()})}),$(document).ready(function(){if($("#texts-index").length){var n=[],i=function(e){e&&(n=jQuery.grep(n,function(t){return t!=$(e.currentTarget).attr("src")}),$(this).data("textsheet-sprite")&&$("#texts-index .img-textsheet.sprite-"+$(this).data("textsheet-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove()),n.length<=5&&$("[data-textsheet-sprite]").each(function(){if(!(5<n.length)){var t=$(this).attr("data-textsheet-sprite");$(this).removeAttr("data-textsheet-sprite");var e=$(".textsheets-"+t).attr("data-textsheets-sprite-url");n.push(e),$img=$("<img/>"),$img.data("textsheet-sprite",t),$img.one("load",i).attr("src",e)}})};i(),$(".printing-btn").click(function(){var t=$(this);return printableLimitModal.downloadPrintable(t.attr("data-href"),function(){}),!1}),$(".btn-search-topics").click(function(){return textsSearchModal.show("topic"),!1}),$(".btn-search-fields").click(function(){return textsSearchModal.show("field"),!1}),$(".btn-search-authors").click(function(){return textsAuthorsModal.show(),!1}),$(".author-details").click(function(){var t=$(this).data("author-id");return textsAuthorsModal.show(t),!1}),$(".btn-manage-tags").click(function(){return tagsEditorModal.show(),!1}),$(".btn-assign-tags").click(function(){return tagsAssignModal.show($(this).data("id")),!1})}}),$(function(){if($("#user").length){$(".btn-save-coin-settings").click(function(t){t.preventDefault();var e=$(this);showAjaxSpinner(e);var n={game:$("#coin-settings-game").prop("checked"),sightword:$("#coin-settings-sightword").prop("checked"),worksheet:$("#coin-settings-worksheet").prop("checked"),grammar:$("#coin-settings-grammar").prop("checked"),storysheet:$("#coin-settings-story").prop("checked"),textsheet:$("#coin-settings-text").prop("checked")};$.ajax({url:"/users/coin-settings",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n)}).done(function(t){t.success?$(".coin-settings-success").slideDown(1e3,function(){window.setTimeout(function(){$(".coin-settings-success").slideUp(1e3)},2e3)}):assert(!1,"fail to call users coin-settings"),hideAjaxSpinner(e)})});var e=function(t){$target=$("."+t.data("target")),$(".show-section").removeClass("active"),t.addClass("active"),$(".user-section").addClass("hidden"),$target.removeClass("hidden")};$(".show-section").click(function(){var t=$(this);t.data("url")?window.location=t.data("url"):e(t)}),$("#user").hasClass("STUDENT")&&e($(".show-section[data-target='change-password']")),$(".change-username").click(function(){var t=$(this),e=t.closest(".user-section").data("section-id");changeUsernameModal.show(t.data("user-name"),function(){window.location.hash=e,location.reload()})}),window.location.hash&&($(window.location.hash).click(),window.setTimeout(function(){$(window.location.hash).blur(),$(document).scrollTop(0)},250))}$("#reset-password, #contact, #user").length&&($(".contact-btn").click(function(t){t.preventDefault(),$(this).validate()&&($(".contact-btn").closest("form").find("#t").val(_g_t_),$(".contact-btn").closest("form").find("#k").val(_g_k($("#inputEmail").trimval().substring(0,4),$(".contact-btn").closest("form").find("#t").val().substr(0,5))),showAjaxSpinner($(this)),$(this).closest("form").submit())}),$(".create-second-account-btn").click(function(t){t.preventDefault(),$(this).validate()&&($(".create-second-account-btn").closest("form").find("#t").val(_g_t_),$(".create-second-account-btn").closest("form").find("#k").val(_g_k($(".second-account-email").trimval().substring(0,4),$(".create-second-account-btn").closest("form").find("#t").val().substr(0,5))),showAjaxSpinner($(this)),$(this).closest("form").submit())}),$(".reset-password-btn").click(function(t){t.preventDefault(),$(this).validate()&&(showAjaxSpinner($(this)),$(this).closest("form").submit())})),$("#school-trial").length&&$(".contact-btn").click(function(t){t.preventDefault(),$(this).validate()&&schoolTrialConfirmDetailsModal.show(function(){$(".contact-btn").closest("form").find("#t").val(_g_t_),$(".contact-btn").closest("form").find("#k").val(_g_k($("#inputEmail").trimval().substring(0,4),$(".contact-btn").closest("form").find("#t").val().substr(0,5)));var t=$(".contact-btn");showAjaxSpinner(t),t.closest("form").submit()})}),$("#signup").length&&($("#is-teacher").change(function(){$(this).is(":checked")?($("#school-entry").slideDown(),$("#school").attr("data-required","1")):($("#school-entry").slideUp(),$("#school").removeAttr("data-required"),$("#school").removeFormValidation())}),$(".signup-btn").click(function(t){return t.preventDefault(),$(this).validate()&&signupEmailConfirmationModal.show(function(t){t==$("#inputEmail").trimval()?($(".signup-btn").closest("form").find("#t").val(_g_t_),$(".signup-btn").closest("form").find("#k").val(_g_k($("#inputEmail").trimval().substring(0,4),$(".signup-btn").closest("form").find("#t").val().substr(0,5))),$(".signup-btn").closest("form").submit(),$(".signup-btn").hide(),showAjaxSpinner($(".signup-btn"))):($("#inputEmail").val(""),$(".signup-btn").validate(),$("#inputEmail").next().text(_t("users.new.email_mismatch")),$("#inputEmail").focus())}),!1}),$("#signup form").on("keyup keypress",function(t){if(13==(t.keyCode||t.which))return t.preventDefault(),!1}))}),$(function(){if($("#worksheets-index").length){var a=[],o=function(e){e&&(a=jQuery.grep(a,function(t){return t!=$(e.currentTarget).attr("src")}),$(this).data("worksheet-sprite")&&($("#worksheets-index .sprite-"+$(this).data("worksheet-sprite")).css("background-image","url("+$(e.currentTarget).attr("src")+")"),$(this).remove())),a.length<=5&&$("[data-worksheet-sprite],[data-interactive-image-src]").each(function(){if(!(5<a.length))if($(this).data("interactive-image-src")){var t=$(this).attr("data-interactive-image-src");$(this).removeAttr("data-interactive-image-src"),a.push(t),$(this).one("load",o).attr("src",t)}else if($(this).data("worksheet-sprite")){var e=$(this).attr("data-worksheet-sprite"),n=$(this).attr("data-worksheet-sprite-url");$(this).removeAttr("data-worksheet-sprite"),a.push(n);var i=$("<img/>");i.data("worksheet-sprite",e),i.one("load",o).attr("src",n)}})};o(),$(".worksheet-btns").click(function(t){if(!$(t.target).hasClass("btn"))return!$(this).is(":visible")||($(this).hide(),!1);if($(t.target).parent().hasClass("first-btn"),$(t.target).parent().hasClass("second-btn")){if(!notifyFreeWorksheets($("#worksheets-index"),10))return!1;var e=$(this);return printableLimitModal.downloadPrintable($(t.target).attr("data-href"),function(){e.parent().find("downloaded-tick").length||e.parent().append('<div class="downloaded-tick downloaded"></div>')}),!1}t.stopPropagation()}),$(".cell-box").click(function(){var t=$(this).find(".worksheet-btns");return t.is(":visible")?t.hide():($("body").find(".worksheet-btns").hide(),t.data("loaded")||(t.append($("#worksheet-btns-template").clone().children()),t.find(".first-btn a").attr("href",t.data("play-url")),t.find(".second-btn a").attr("data-href",t.data("print-url")),t.data("interactive")||(t.find(".first-btn").remove(),t.find(".label-txt").remove(),t.find(".second-btn").addClass("print-only")),t.data("loaded",!0)),$(this).find(".worksheet-btns").show()),!1}),$("body").click(function(){$("body").find(".worksheet-btns").hide()})}}),!jQuery)throw new Error("Bootstrap requires jQuery");!function(i){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]}}i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;return i(this).one(i.support.transition.end,function(){e=!0}),setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=t()})}(window.jQuery),function(o){"use strict";var e='[data-dismiss="alert"]',i=function(t){o(t).on("click",e,this.close)};i.prototype.close=function(t){function e(){a.trigger("closed.bs.alert").remove()}var n=o(this),i=n.attr("data-target");i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var a=o(i);t&&t.preventDefault(),a.length||(a=n.hasClass("alert")?n:n.parent()),a.trigger(t=o.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),o.support.transition&&a.hasClass("fade")?a.one(o.support.transition.end,e).emulateTransitionEnd(150):e())};var t=o.fn.alert;o.fn.alert=function(n){return this.each(function(){var t=o(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new i(this)),"string"==typeof n&&e[n].call(t)})},o.fn.alert.Constructor=i,o.fn.alert.noConflict=function(){return o.fn.alert=t,this},o(document).on("click.bs.alert.data-api",e,i.prototype.close)}(window.jQuery),function(a){"use strict";var o=function(t,e){this.$element=a(t),this.options=a.extend({},o.DEFAULTS,e)};o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",a=n.data();t+="Text",a.resetText||n.data("resetText",n[i]()),n[i](a[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},o.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons"]');t.length&&("radio"===this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change").prop("type")&&t.find(".active").removeClass("active"));this.$element.toggleClass("active")};var t=a.fn.button;a.fn.button=function(i){return this.each(function(){var t=a(this),e=t.data("bs.button"),n="object"==typeof i&&i;e||t.data("bs.button",e=new o(this,n)),"toggle"==i?e.toggle():i&&e.setState(i)})},a.fn.button.Constructor=o,a.fn.button.noConflict=function(){return a.fn.button=t,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var e=a(t.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle"),t.preventDefault()})}(window.jQuery),function(d){"use strict";var o=function(t,e){this.$element=d(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))};o.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},o.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},o.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},o.prototype.to=function(t){var e=this,n=this.getActiveIndex();return t>this.$items.length-1||t<0?void 0:this.sliding?this.$element.one("slid",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(n<t?"next":"prev",d(this.$items[t]))},o.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition.end&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},o.prototype.next=function(){return this.sliding?void 0:this.slide("next")},o.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},o.prototype.slide=function(t,e){var n=this.$element.find(".item.active"),i=e||n[t](),a=this.interval,o="next"==t?"left":"right",r="next"==t?"first":"last",s=this;if(!i.length){if(!this.options.wrap)return;i=this.$element.find(".item")[r]()}this.sliding=!0,a&&this.pause();var l=d.Event("slide.bs.carousel",{relatedTarget:i[0],direction:o});if(!i.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=d(s.$indicators.children()[s.getActiveIndex()]);t&&t.addClass("active")})),d.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(l),l.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,n.addClass(o),i.addClass(o),n.one(d.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(l),l.isDefaultPrevented())return;n.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}};var t=d.fn.carousel;d.fn.carousel=function(a){return this.each(function(){var t=d(this),e=t.data("bs.carousel"),n=d.extend({},o.DEFAULTS,t.data(),"object"==typeof a&&a),i="string"==typeof a?a:n.slide;e||t.data("bs.carousel",e=new o(this,n)),"number"==typeof a?e.to(a):i?e[i]():n.interval&&e.pause().cycle()})},d.fn.carousel.Constructor=o,d.fn.carousel.noConflict=function(){return d.fn.carousel=t,this},d(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var e,n=d(this),i=d(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),a=d.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(a.interval=!1),i.carousel(a),(o=n.attr("data-slide-to"))&&i.data("bs.carousel").to(o),t.preventDefault()}),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var t=d(this);t.carousel(t.data())})})}(window.jQuery),function(d){"use strict";var a=function(t,e){this.$element=d(t),this.options=d.extend({},a.DEFAULTS,e),this.transitioning=null,this.options.parent&&(this.$parent=d(this.options.parent)),this.options.toggle&&this.toggle()};a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=d.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.$parent&&this.$parent.find("> .panel > .in");if(e&&e.length){var n=e.data("bs.collapse");if(n&&n.transitioning)return;e.collapse("hide"),n||e.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!d.support.transition)return a.call(this);var o=d.camelCase(["scroll",i].join("-"));this.$element.one(d.support.transition.end,d.proxy(a,this)).emulateTransitionEnd(350)[i](this.$element[0][o])}}},
a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=d.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return d.support.transition?void this.$element[e](0).one(d.support.transition.end,d.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var t=d.fn.collapse;d.fn.collapse=function(i){return this.each(function(){var t=d(this),e=t.data("bs.collapse"),n=d.extend({},a.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.collapse",e=new a(this,n)),"string"==typeof i&&e[i]()})},d.fn.collapse.Constructor=a,d.fn.collapse.noConflict=function(){return d.fn.collapse=t,this},d(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var e,n=d(this),i=n.attr("data-target")||t.preventDefault()||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),a=d(i),o=a.data("bs.collapse"),r=o?"toggle":n.data(),s=n.attr("data-parent"),l=s&&d(s);o&&o.transitioning||(l&&l.find('[data-toggle=collapse][data-parent="'+s+'"]').not(n).addClass("collapsed"),n[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(r)})}(window.jQuery),function(r){"use strict";function a(){r(t).remove(),r(l).each(function(t){var e=s(r(this));e.hasClass("open")&&(e.trigger(t=r.Event("hide.bs.dropdown")),t.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown"))})}function s(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&r(e);return n&&n.length?n:t.parent()}var t=".dropdown-backdrop",l="[data-toggle=dropdown]",i=function(t){r(t).on("click.bs.dropdown",this.toggle)};i.prototype.toggle=function(t){var e=r(this);if(!e.is(".disabled, :disabled")){var n=s(e),i=n.hasClass("open");if(a(),!i){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&r('<div class="dropdown-backdrop"/>').insertAfter(r(this)).on("click",a),n.trigger(t=r.Event("show.bs.dropdown")),t.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},i.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var e=r(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=s(e),i=n.hasClass("open");if(!i||i&&27==t.keyCode)return 27==t.which&&n.find(l).focus(),e.click();var a=r("[role=menu] li:not(.divider):visible a",n);if(a.length){var o=a.index(a.filter(":focus"));38==t.keyCode&&0<o&&o--,40==t.keyCode&&o<a.length-1&&o++,~o||(o=0),a.eq(o).focus()}}}};var e=r.fn.dropdown;r.fn.dropdown=function(n){return this.each(function(){var t=r(this),e=t.data("dropdown");e||t.data("dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},r.fn.dropdown.Constructor=i,r.fn.dropdown.noConflict=function(){return r.fn.dropdown=e,this},r(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",l,i.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu]",i.prototype.keydown)}(window.jQuery),function(o){"use strict";var r=function(t,e){this.options=e,this.$element=o(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};r.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},r.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},r.prototype.show=function(n){var i=this,t=o.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',o.proxy(this.hide,this)),this.backdrop(function(){var t=o.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show(),t&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var e=o.Event("shown.bs.modal",{relatedTarget:n});t?i.$element.find(".modal-dialog").one(o.support.transition.end,function(){i.$element.focus().trigger(e)}).emulateTransitionEnd(300):i.$element.focus().trigger(e)}))},r.prototype.hide=function(t){t&&t.preventDefault(),t=o.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),o(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),o.support.transition&&this.$element.hasClass("fade")?this.$element.one(o.support.transition.end,o.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},r.prototype.enforceFocus=function(){o(document).off("focusin.bs.modal").on("focusin.bs.modal",o.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},r.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",o.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},r.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},r.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},r.prototype.backdrop=function(t){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=o.support.transition&&e;if(this.$backdrop=o('<div class="modal-backdrop '+e+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",o.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(o.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),o.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(o.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var t=o.fn.modal;o.fn.modal=function(i,a){return this.each(function(){var t=o(this),e=t.data("bs.modal"),n=o.extend({},r.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.modal",e=new r(this,n)),"string"==typeof i?e[i](a):n.show&&e.show(a)})},o.fn.modal.Constructor=r,o.fn.modal.noConflict=function(){return o.fn.modal=t,this},o(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=o(this),n=e.attr("href"),i=o(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=i.data("modal")?"toggle":o.extend({remote:!/#/.test(n)&&n},i.data(),e.data());t.preventDefault(),i.modal(a,this).one("hide",function(){e.is(":visible")&&e.focus()})}),o(document).on("show.bs.modal",".modal",function(){o(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){o(document.body).removeClass("modal-open")})}(window.jQuery),function(m){"use strict";var a=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};a.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.prototype.init=function(t,e,n){this.enabled=!0,this.type=t,this.$element=m(e),this.options=this.getOptions(n);for(var i=this.options.trigger.split(" "),a=i.length;a--;){var o=i[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,m.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focus",s="hover"==o?"mouseleave":"blur";this.$element.on(r+"."+this.type,this.options.selector,m.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,m.proxy(this.leave,this))}}this.options.selector?this._options=m.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},a.prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.getOptions=function(t){return(t=m.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},a.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&m.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},a.prototype.enter=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show()},a.prototype.leave=function(t){var e=t instanceof this.constructor?t:m(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide()},a.prototype.show=function(){var t=m.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var e=this.tip();this.setContent(),this.options.animation&&e.addClass("fade");var n="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,a=i.test(n);a&&(n=n.replace(i,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(n),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var o=this.getPosition(),r=e[0].offsetWidth,s=e[0].offsetHeight;if(a){var l=this.$element.parent(),d=n,c=document.documentElement.scrollTop||document.body.scrollTop,u="body"==this.options.container?window.innerWidth:l.outerWidth(),f="body"==this.options.container?window.innerHeight:l.outerHeight(),h="body"==this.options.container?0:l.offset().left;n="bottom"==n&&o.top+o.height+s-c>f?"top":"top"==n&&o.top-c-s<0?"bottom":"right"==n&&o.right+r>u?"left":"left"==n&&o.left-r<h?"right":n,e.removeClass(d).addClass(n)}var p=this.getCalculatedOffset(n,o,r,s);this.applyPlacement(p,n),this.$element.trigger("shown.bs."+this.type)}},a.prototype.applyPlacement=function(t,e){var n,i=this.tip(),a=i[0].offsetWidth,o=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top=t.top+r,t.left=t.left+s,i.offset(t).addClass("in");var l=i[0].offsetWidth,d=i[0].offsetHeight;if("top"==e&&d!=o&&(n=!0,t.top=t.top+o-d),/bottom|top/.test(e)){var c=0;t.left<0&&(c=-2*t.left,t.left=0,i.offset(t),l=i[0].offsetWidth,d=i[0].offsetHeight),this.replaceArrow(c-a+l,l,"left")}else this.replaceArrow(d-o,d,"top");n&&i.offset(t)},a.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},a.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},a.prototype.hide=function(){function t(){"in"!=e.hoverState&&n.detach()}var e=this,n=this.tip(),i=m.Event("hide.bs."+this.type);return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),m.support.transition&&this.$tip.hasClass("fade")?n.one(m.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this)},a.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},a.prototype.hasContent=function(){return this.getTitle()},a.prototype.getPosition=function(){var t=this.$element[0];return m.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},a.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},a.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},a.prototype.tip=function(){return this.$tip=this.$tip||m(this.options.template)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},a.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},a.prototype.enable=function(){this.enabled=!0},a.prototype.disable=function(){this.enabled=!1},a.prototype.toggleEnabled=function(){this.enabled=!this.enabled},a.prototype.toggle=function(t){var e=t?m(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;e.tip().hasClass("in")?e.leave(e):e.enter(e)},a.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var t=m.fn.tooltip;m.fn.tooltip=function(i){return this.each(function(){var t=m(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;e||t.data("bs.tooltip",e=new a(this,n)),"string"==typeof i&&e[i]()})},m.fn.tooltip.Constructor=a,m.fn.tooltip.noConflict=function(){return m.fn.tooltip=t,this}}(window.jQuery),function(a){"use strict";var o=function(t,e){this.init("popover",t,e)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");o.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),(o.prototype.constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},o.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var t=a.fn.popover;a.fn.popover=function(i){return this.each(function(){var t=a(this),e=t.data("bs.popover"),n="object"==typeof i&&i;e||t.data("bs.popover",e=new o(this,n)),"string"==typeof i&&e[i]()})},a.fn.popover.Constructor=o,a.fn.popover.noConflict=function(){return a.fn.popover=t,this}}(window.jQuery),function(o){"use strict";function a(t,e){var n,i=o.proxy(this.process,this);this.$element=o(t).is("body")?o(window):o(t),this.$body=o("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",i),this.options=o.extend({},a.DEFAULTS,e),this.selector=(this.options.target||(n=o(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=o([]),this.targets=o([]),this.activeTarget=null,this.refresh(),this.process()}a.DEFAULTS={offset:10},a.prototype.refresh=function(){var i=this.$element[0]==window?"offset":"position";this.offsets=o([]),this.targets=o([]);var a=this;this.$body.find(this.selector).map(function(){var t=o(this),e=t.data("target")||t.attr("href"),n=/^#\w/.test(e)&&o(e);return n&&n.length&&[[n[i]().top+(!o.isWindow(a.$scrollElement.get(0))&&a.$scrollElement.scrollTop()),e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){a.offsets.push(this[0]),a.targets.push(this[1])})},a.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),i=this.offsets,a=this.targets,o=this.activeTarget;if(n<=e)return o!=(t=a.last()[0])&&this.activate(t);for(t=i.length;t--;)o!=a[t]&&e>=i[t]&&(!i[t+1]||e<=i[t+1])&&this.activate(a[t])},a.prototype.activate=function(t){this.activeTarget=t,o(this.selector).parents(".active").removeClass("active");var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=o(e).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")};var t=o.fn.scrollspy;o.fn.scrollspy=function(i){return this.each(function(){var t=o(this),e=t.data("bs.scrollspy"),n="object"==typeof i&&i;e||t.data("bs.scrollspy",e=new a(this,n)),"string"==typeof i&&e[i]()})},o.fn.scrollspy.Constructor=a,o.fn.scrollspy.noConflict=function(){return o.fn.scrollspy=t,this},o(window).on("load",function(){o('[data-spy="scroll"]').each(function(){var t=o(this);t.scrollspy(t.data())})})}(window.jQuery),function(r){"use strict";var i=function(t){this.element=r(t)};i.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.attr("data-target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=e.find(".active:last a")[0],a=r.Event("show.bs.tab",{relatedTarget:i});if(t.trigger(a),!a.isDefaultPrevented()){var o=r(n);this.activate(t.parent("li"),e),this.activate(o,o.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:i})})}}},i.prototype.activate=function(t,e,n){function i(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var a=e.find("> .active"),o=n&&r.support.transition&&a.hasClass("fade");o?a.one(r.support.transition.end,i).emulateTransitionEnd(150):i(),a.removeClass("in")};var t=r.fn.tab;r.fn.tab=function(n){return this.each(function(){var t=r(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new i(this)),"string"==typeof n&&e[n]()})},r.fn.tab.Constructor=i,r.fn.tab.noConflict=function(){return r.fn.tab=t,this},r(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),r(this).tab("show")})}(window.jQuery),function(s){"use strict";var l=function(t,e){this.options=s.extend({},l.DEFAULTS,e),this.$window=s(window).on("scroll.bs.affix.data-api",s.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",s.proxy(this.checkPositionWithEventLoop,this)),this.$element=s(t),this.affixed=this.unpin=null,this.checkPosition()};l.RESET="affix affix-top affix-bottom",l.DEFAULTS={offset:0},l.prototype.checkPositionWithEventLoop=function(){setTimeout(s.proxy(this.checkPosition,this),1)},l.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=s(document).height(),e=this.$window.scrollTop(),n=this.$element.offset(),i=this.options.offset,a=i.top,o=i.bottom;"object"!=typeof i&&(o=a=i),"function"==typeof a&&(a=i.top()),"function"==typeof o&&(o=i.bottom());var r=!(null!=this.unpin&&e+this.unpin<=n.top)&&(null!=o&&n.top+this.$element.height()>=t-o?"bottom":null!=a&&e<=a&&"top");this.affixed!==r&&(this.unpin&&this.$element.css("top",""),this.affixed=r,this.unpin="bottom"==r?n.top-e:null,this.$element.removeClass(l.RESET).addClass("affix"+(r?"-"+r:"")),"bottom"==r&&this.$element.offset({top:document.body.offsetHeight-o-this.$element.height()}))}};var t=s.fn.affix;s.fn.affix=function(i){return this.each(function(){var t=s(this),e=t.data("bs.affix"),n="object"==typeof i&&i;e||t.data("bs.affix",e=new l(this,n)),"string"==typeof i&&e[i]()})},s.fn.affix.Constructor=l,s.fn.affix.noConflict=function(){return s.fn.affix=t,this},s(window).on("load",function(){s('[data-spy="affix"]').each(function(){var t=s(this),e=t.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),t.affix(e)})})}(window.jQuery),function(r){function t(){var t=r("script:first"),e=t.css("color"),n=!1;if(/^rgba/.test(e))n=!0;else try{n=e!=t.css("color","rgba(0, 0, 0, 0.5)").css("color"),t.css("color",e)}catch(i){}return n}function s(t,e,n){var i="rgb"+(r.support.rgba?"a":"")+"("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return r.support.rgba&&(i+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1)),i+=")"}function l(t){var e;return(e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]:(e=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(t))?[17*parseInt(e[1],16),17*parseInt(e[2],16),17*parseInt(e[3],16),1]:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),1]:(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(t))?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4])]:n[t]}r.extend(!0,r,{support:{rgba:t()}});var e=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];r.each(e,function(t,a){r.Tween.propHooks[a]={get:function(t){return r(t.elem).css(a)},set:function(t){var e=t.elem.style,n=l(r(t.elem).css(a)),i=l(t.end);t.run=function(t){e[a]=s(n,i,t)}}}}),r.Tween.propHooks.borderColor={set:function(n){var i=n.elem.style,a=[],t=e.slice(2,6);r.each(t,function(t,e){a[e]=l(r(n.elem).css(e))});var o=l(n.end);n.run=function(n){r.each(t,function(t,e){i[e]=s(a[e],o,n)})}}};var n={aqua:[0,255,255,1],azure:[240,255,255,1],beige:[245,245,220,1],black:[0,0,0,1],blue:[0,0,255,1],brown:[165,42,42,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgrey:[169,169,169,1],darkgreen:[0,100,0,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkviolet:[148,0,211,1],fuchsia:[255,0,255,1],gold:[255,215,0,1],green:[0,128,0,1],indigo:[75,0,130,1],khaki:[240,230,140,1],lightblue:[173,216,230,1],lightcyan:[224,255,255,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],magenta:[255,0,255,1],maroon:[128,0,0,1],navy:[0,0,128,1],olive:[128,128,0,1],orange:[255,165,0,1],pink:[255,192,203,1],purple:[128,0,128,1],violet:[128,0,128,1],red:[255,0,0,1],silver:[192,192,192,1],white:[255,255,255,1],yellow:[255,255,0,1],transparent:[255,255,255,0]}}(jQuery),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(t,e){return e===undefined&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e),e}:n(jQuery)}(function(A){function i(t,e,n){"string"==typeof n&&(n={className:n}),this.options=m(o,A.isPlainObject(n)?n:{}),this.loadHTML(),this.wrapper=A(a.html),this.options.clickToHide&&this.wrapper.addClass(l+"-hidable"),this.wrapper.data(l,this),this.arrow=this.wrapper.find("."+l+"-arrow"),this.container=this.wrapper.find("."+l+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=b(t),this.elem.data(l,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(e)}var M=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r="notify",l=r+"js",s=r+"!blank",j={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},E=["l","c","r"],D=["t","m","b"],N=["t","b","l","r"],O={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},d=function(t){var i;return i=[],A.each(t.split(/\W+/),function(t,e){var n;if(n=e.toLowerCase().charAt(0),j[n])return i.push(n)}),i},c={},a={name:"core",html:'<div class="'+l+'-wrapper">\n\t<div class="'+l+'-arrow"></div>\n\t<div class="'+l+'-container"></div>\n</div>',css:"."+l+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+l+"-corner ."+l+"-wrapper,\n."+l+"-corner ."+l+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+l+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+l+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+l+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+l+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},u={"border-radius":["-webkit-","-moz-"]},t=function(t){return c[t]},e=function(t){if(!t)throw"Missing Style name";c[t]&&delete c[t]},n=function(t,n){if(!t)throw"Missing Style name";if(!n)throw"Missing Style definition";if(!n.html)throw"Missing Style HTML";var e=c[t];e&&e.cssElem&&(window.console&&console.warn(r+": overwriting style '"+t+"'"),c[t].cssElem.remove()),n.name=t,c[t]=n;var a="";n.classes&&A.each(n.classes,function(t,e){return a+="."+l+"-"+n.name+"-"+t+" {\n",A.each(e,function(n,i){return u[n]&&A.each(u[n],function(t,e){return a+="\t"+e+n+": "+i+";\n"}),a+="\t"+n+": "+i+";\n"}),a+="}\n"}),n.css&&(a+="/* styles for "+n.name+" */\n"+n.css),a&&(n.cssElem=f(a),n.cssElem.attr("id","notify-"+n.name));var i={},o=A(n.html);h("html",o,i),h("text",o,i),n.fields=i},f=function(t){var e;(e=v("style")).attr("type","text/css"),A("head").append(e);try{e.html(t)}catch(j){e[0].styleSheet.cssText=t}return e},h=function(e,t,n){var i;return"html"!==e&&(e="text"),p(t,"["+(i="data-notify-"+e)+"]").each(function(){var t;(t=A(this).attr(i))||(t=s),n[t]=e})},p=function(t,e){return t.is(e)?t:t.find(e)},o={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},m=function(t,e){var n;return(n=function(){}).prototype=t,A.extend(!0,new n,e)},g=function(t){return A.extend(o,t)},v=function(t){return A("<"+t+"></"+t+">")},y={},b=function(n){return n.is("[type=radio]")&&(n=n.parents("form:first").find("[type=radio]").filter(function(t,e){return A(e).attr("name")===n.attr("name")}).first()),n},P=function(t,e,n){var i;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return i=j[O[e.charAt(0)]],e,t[i]!==undefined&&(e=j[i.charAt(0)],n=-n),t[e]===undefined?t[e]=n:t[e]+=n,null},F=function(t,e,n){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return n/2-e/2;if("r"===t||"b"===t)return n-e;throw"Invalid alignment"},x=function(t){return x.e=x.e||v("div"),x.e.text(t).html()};i.prototype.loadHTML=function(){var t;t=this.getStyle(),this.userContainer=A(t.html),this.userFields=t.fields},i.prototype.show=function(t,e){var n,i,a,o,r,s;if(i=function(){if(!t&&!s.elem&&s.destroy(),e)return e()},r=0<(s=this).container.parent().parents(":hidden").length,a=this.container.add(this.arrow),n=[],r&&t)o="show";else if(r&&!t)o="hide";else if(!r&&t)o=this.options.showAnimation,n.push(this.options.showDuration);else{if(r||t)return i();o=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(i),a[o].apply(a,n)},i.prototype.setGlobalPosition=function(){var t=this.getPosition(),e=t[0],n=t[1],i=j[e],a=j[n],o=e+"|"+n,r=y[o];if(!r||!document.contains(r[0])){r=y[o]=v("div");var s={};s[i]=0,"middle"===a?s.top="45%":"center"===a?s.left="45%":s[a]=0,r.css(s).addClass(l+"-corner"),A("body").append(r)}return r.prepend(this.wrapper)},i.prototype.setElementPosition=function(){var t,e,n,i,a,o,r,s,l,d,c,u,f,h,p,m,g,v,y,b,x,w,$,k,_,S,T,C;for($=(S=this.getPosition())[0],w=S[1],S[2],c=this.elem.position(),s=this.elem.outerHeight(),u=this.elem.outerWidth(),l=this.elem.innerHeight(),d=this.elem.innerWidth(),C=this.wrapper.position(),a=this.container.height(),o=this.container.width(),v=j[$],b=O[$],(r={})[x=j[b]]="b"===$?s:"r"===$?u:0,P(r,"top",c.top-C.top),P(r,"left",c.left-C.left),h=0,m=(T=["top","left"]).length;h<m;h++)k=T[h],(y=parseInt(this.elem.css("margin-"+k),10))&&P(r,k,y);if(f=Math.max(0,this.options.gap-(this.options.arrowShow?n:0)),P(r,x,f),this.options.arrowShow){for(n=this.options.arrowSize,e=A.extend({},r),t=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",p=0,g=N.length;p<g;p++)k=N[p],_=j[k],k!==b&&(i=_===v?t:"transparent",e["border-"+_]=n+"px solid "+i);P(r,j[b],n),0<=M.call(N,w)&&P(e,j[w],2*n)}else this.arrow.hide();if(0<=M.call(D,$)?(P(r,"left",F(w,o,u)),e&&P(e,"left",F(w,n,d))):0<=M.call(E,$)&&(P(r,"top",F(w,a,s)),e&&P(e,"top",F(w,n,l))),this.container.is(":visible")&&(r.display="block"),this.container.removeAttr("style").css(r),e)return this.arrow.removeAttr("style").css(e)},i.prototype.getPosition=function(){var t,e,n,i,a,o,r,s;if(s=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),0===(t=d(s)).length&&(t[0]="b"),e=t[0],M.call(N,e)<0)throw"Must be one of ["+N+"]";return(1===t.length||(n=t[0],0<=M.call(D,n)&&(i=t[1],M.call(E,i)<0))||(a=t[0],0<=M.call(E,a)&&(o=t[1],M.call(D,o)<0)))&&(t[1]=(r=t[0],0<=M.call(E,r)?"m":"l")),2===t.length&&(t[2]=t[1]),t},i.prototype.getStyle=function(t){var e;if(t||(t=this.options.style),t||(t="default"),!(e=c[t]))throw"Missing style: "+t;return e},i.prototype.updateClasses=function(){var t,e;return t=["base"],A.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),e=this.getStyle(),t=A.map(t,function(t){return l+"-"+e.name+"-"+t}).join(" "),this.userContainer.attr("class",t)},i.prototype.run=function(t,e){var n,i,a,o,r;if(A.isPlainObject(e)?A.extend(this.options,e):"string"===A.type(e)&&(this.options.className=e),!this.container||t){if(this.container||t){for(a in i={},A.isPlainObject(t)?i=t:i[s]=t,i)n=i[a],(o=this.userFields[a])&&("text"===o&&(n=x(n),this.options.breakNewLines&&(n=n.replace(/\n/g,"<br/>"))),r=a===s?"":"="+a,p(this.userContainer,"[data-notify-"+o+r+"]").html(n));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},i.prototype.destroy=function(){this.wrapper.data(l,null),this.wrapper.remove()},A[r]=function(t,e,n){return t&&t.nodeName||t.jquery?A(t)[r](e,n):(n=e,new i(null,e=t,n)),t},A.fn[r]=function(e,n){return A(this).each(function(){var t=b(A(this)).data(l);t&&t.destroy();new i(A(this),e,n)}),this},A.extend(A[r],{defaults:g,addStyle:n,removeStyle:e,pluginOptions:o,getStyle:t,insertCSS:f}),n("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6",
"background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),A(function(){f(a.css).attr("id","core-notify"),A(document).on("click","."+l+"-hidable",function(){A(this).trigger("notify-hide")}),A(document).on("notify-hide","."+l+"-wrapper",function(){var t=A(this).data(l);t&&t.show(!1)})})}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(function(){try{return require("moment")}catch(t){}}()):"function"==typeof define&&define.amd?define(["require"],function(t){return e(function(){try{return t("moment")}catch(t){}}())}):(t=t||self).Chart=e(t.moment)}(this,function(i){"use strict";function l(t){var e=function(){for(var t={},e=Object.keys(Bt),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),a=Object.keys(Bt[i]),o=a.length,r=0;r<o;r++){var s=a[r],l=e[s];-1===l.distance&&(l.distance=e[i].distance+1,l.parent=i,n.unshift(s))}return e}function o(e,n){return function(t){return n(e(t))}}function d(t,e){for(var n=[e[t].parent,t],i=Bt[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),i=o(Bt[e[a].parent][a],i),a=e[a].parent;return i.conversion=n,i}function n(t){if(t){var e=[0,0,0],n=1,i=t.match(/^#([a-fA-F0-9]{3,4})$/i),a="";if(i){a=(i=i[1])[3];for(var o=0;o<e.length;o++)e[o]=parseInt(i[o]+i[o],16);a&&(n=Math.round(parseInt(a+a,16)/255*100)/100)}else if(i=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(a=i[2],i=i[1],o=0;o<e.length;o++)e[o]=parseInt(i.slice(2*o,2*o+2),16);a&&(n=Math.round(parseInt(a,16)/255*100)/100)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=parseInt(i[o+1]);n=parseFloat(i[4])}else if(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<e.length;o++)e[o]=Math.round(2.55*parseFloat(i[o+1]));n=parseFloat(i[4])}else if(i=t.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(e=qt[i[1]]))return}for(o=0;o<e.length;o++)e[o]=f(e[o],0,255);return n=n||0==n?f(n,0,1):1,e[3]=n,e}}function a(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[f(parseInt(e[1]),0,360),f(parseFloat(e[2]),0,100),f(parseFloat(e[3]),0,100),f(isNaN(n)?1:n,0,1)]}}}function r(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[f(parseInt(e[1]),0,360),f(parseFloat(e[2]),0,100),f(parseFloat(e[3]),0,100),f(isNaN(n)?1:n,0,1)]}}}function s(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function c(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function u(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function f(t,e,n){return Math.min(Math.max(e,t),n)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}function p(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function m(e,t){var n=e._chartjs;if(n){var i=n.listeners,a=i.indexOf(t);-1!==a&&i.splice(a,1),0<i.length||(Ae.forEach(function(t){delete e[t]}),delete e._chartjs)}}function g(t,e){var n=e.startAngle,i=e.endAngle,a=e.pixelMargin,o=a/e.outerRadius,r=e.x,s=e.y;t.beginPath(),t.arc(r,s,e.outerRadius,n-o,i+o),e.innerRadius>a?(o=a/e.innerRadius,t.arc(r,s,e.innerRadius-a,i+o,n-o,!0)):t.arc(r,s,a,i+Math.PI/2,n-Math.PI/2),t.closePath(),t.clip()}function v(t,e,n){var i="inner"===e.borderAlign;i?(t.lineWidth=2*e.borderWidth,t.lineJoin="round"):(t.lineWidth=e.borderWidth,t.lineJoin="bevel"),n.fullCircles&&function(t,e,n,i){var a,o=n.endAngle;for(i&&(n.endAngle=n.startAngle+Ee,g(t,n),n.endAngle=o,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=Ee,n.fullCircles--)),t.beginPath(),t.arc(n.x,n.y,n.innerRadius,n.startAngle+Ee,n.startAngle,!0),a=0;a<n.fullCircles;++a)t.stroke();for(t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.startAngle+Ee),a=0;a<n.fullCircles;++a)t.stroke()}(t,e,n,i),i&&g(t,n),t.beginPath(),t.arc(n.x,n.y,e.outerRadius,n.startAngle,n.endAngle),t.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),t.closePath(),t.stroke()}function t(t){var e=this._view;return!!e&&Math.abs(t-e.x)<e.radius+e.hitRadius}function y(t){return t&&void 0!==t.width}function b(t){var e,n,i,a,o;return y(t)?(o=t.width/2,e=t.x-o,n=t.x+o,i=Math.min(t.y,t.base),a=Math.max(t.y,t.base)):(o=t.height/2,e=Math.min(t.x,t.base),n=Math.max(t.x,t.base),i=t.y-o,a=t.y+o),{left:e,top:i,right:n,bottom:a}}function x(t,e,n){return t===e?n:t===n?e:t}function w(t,e,n){var i,a,o,r,s,l,d,c=t.borderWidth,u=(l=(s=t).borderSkipped,d={},l&&(s.horizontal?s.base>s.x&&(l=x(l,"left","right")):s.base<s.y&&(l=x(l,"bottom","top")),d[l]=!0),d);return ge.isObject(c)?(i=+c.top||0,a=+c.right||0,o=+c.bottom||0,r=+c.left||0):i=a=o=r=+c||0,{t:u.top||i<0?0:n<i?n:i,r:u.right||a<0?0:e<a?e:a,b:u.bottom||o<0?0:n<o?n:o,l:u.left||r<0?0:e<r?e:r}}function $(t,e,n){var i=null===e,a=null===n,o=!(!t||i&&a)&&b(t);return o&&(i||e>=o.left&&e<=o.right)&&(a||n>=o.top&&n<=o.bottom)}function k(t,e,n){var i,a,o=n.barThickness,r=e.stackCount,s=e.pixels[t],l=ge.isNullOrUndef(o)?function(t,e){var n,i,a,o,r=t._length;for(a=1,o=e.length;a<o;++a)r=Math.min(r,Math.abs(e[a]-e[a-1]));for(a=0,o=t.getTicks().length;a<o;++a)i=t.getPixelForTick(a),r=0<a?Math.min(r,Math.abs(i-n)):r,n=i;return r}(e.scale,e.pixels):-1;return ge.isNullOrUndef(o)?(i=l*n.categoryPercentage,a=n.barPercentage):(i=o*r,a=1),{chunk:i/r,ratio:a,start:s-i/2}}function _(t,e){var n=t&&t.options.ticks||{},i=n.reverse,a=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:a,end:i?a:o}}function S(t,e,n){var i=n/2,a=_(t,i),o=_(e,i);return{top:o.end,right:a.end,bottom:o.start,left:a.start}}function T(t){var e,n,i,a;return ge.isObject(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a}}function C(t,e){return t["native"]?{x:t.x,y:t.y}:ge.getRelativePosition(t,e)}function A(t,e){var n,i,a,o,r,s,l=t._getSortedVisibleDatasetMetas();for(i=0,o=l.length;i<o;++i)for(a=0,r=(n=l[i].data).length;a<r;++a)(s=n[a])._view.skip||e(s)}function M(t,e){var n=[];return A(t,function(t){t.inRange(e.x,e.y)&&n.push(t)}),n}function j(t,i,a,o){var r=Number.POSITIVE_INFINITY,s=[];return A(t,function(t){if(!a||t.inRange(i.x,i.y)){var e=t.getCenterPoint(),n=o(i,e);n<r?(s=[t],r=n):n===r&&s.push(t)}}),s}function E(t){var a=-1!==t.indexOf("x"),o=-1!==t.indexOf("y");return function(t,e){var n=a?Math.abs(t.x-e.x):0,i=o?Math.abs(t.y-e.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(i,2))}}function D(t,e,n){var i=C(e,t);n.axis=n.axis||"x";var a=E(n.axis),o=n.intersect?M(t,i):j(t,i,!1,a),r=[];return o.length?(t._getSortedVisibleDatasetMetas().forEach(function(t){var e=t.data[o[0]._index];e&&!e._view.skip&&r.push(e)}),r):[]}function N(t,e){return ge.where(t,function(t){return t.pos===e})}function O(t,a){return t.sort(function(t,e){var n=a?e:t,i=a?t:e;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function P(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function F(t,e,n){var i,a,o=n.box,r=t.maxPadding;if(n.size&&(t[n.pos]-=n.size),n.size=n.horizontal?o.height:o.width,t[n.pos]+=n.size,o.getPadding){var s=o.getPadding();r.top=Math.max(r.top,s.top),r.left=Math.max(r.left,s.left),r.bottom=Math.max(r.bottom,s.bottom),r.right=Math.max(r.right,s.right)}if(i=e.outerWidth-P(r,t,"left","right"),a=e.outerHeight-P(r,t,"top","bottom"),i!==t.w||a!==t.h){t.w=i,t.h=a;var l=n.horizontal?[i,t.w]:[a,t.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function L(t,n){function e(t){var e={left:0,top:0,right:0,bottom:0};return t.forEach(function(t){e[t]=Math.max(n[t],i[t])}),e}var i=n.maxPadding;return e(t?["left","right"]:["top","bottom"])}function I(t,e,n){var i,a,o,r,s,l,d=[];for(i=0,a=t.length;i<a;++i)(r=(o=t[i]).box).update(o.width||e.w,o.height||e.h,L(o.horizontal,e)),F(e,n,o)&&(l=!0,d.length&&(s=!0)),r.fullWidth||d.push(o);return s&&I(d,e,n)||l}function R(t,e,n){var i,a,o,r,s=n.padding,l=e.x,d=e.y;for(i=0,a=t.length;i<a;++i)r=(o=t[i]).box,o.horizontal?(r.left=r.fullWidth?s.left:e.left,r.right=r.fullWidth?n.outerWidth-s.right:e.left+e.w,r.top=d,r.bottom=d+r.height,r.width=r.right-r.left,d=r.bottom):(r.left=l,r.right=l+r.width,r.top=e.top,r.bottom=e.top+e.h,r.height=r.bottom-r.top,l=r.right);e.x=l,e.y=d}function H(t,e){var n=ge.getStyle(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}function z(t,e,n){t.addEventListener(e,n,Tn)}function B(t,e,n){t.removeEventListener(e,n,Tn)}function W(t,e,n,i,a){return{type:t,chart:e,"native":a||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}function V(t){var e=document.createElement("div");return e.className=t||"",e}function q(n,i,a){var t,e,o,r,s,l,d,c,u=n[xn]||(n[xn]={}),f=u.resizer=function(t){var e=V(wn),n=V(wn+"-expand"),i=V(wn+"-shrink");n.appendChild(V()),i.appendChild(V()),e.appendChild(n),e.appendChild(i),e._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,i.scrollLeft=1e6,i.scrollTop=1e6};var a=function(){e._reset(),t()};return z(n,"scroll",a.bind(n,"expand")),z(i,"scroll",a.bind(i,"shrink")),e}((o=!(t=function(){if(u.resizer){var t=a.options.maintainAspectRatio&&n.parentNode,e=t?t.clientWidth:0;i(W("resize",a)),t&&t.clientWidth<e&&a.canvas&&i(W("resize",a))}}),r=[],function(){r=Array.prototype.slice.call(arguments),e=e||this,o||(o=!0,ge.requestAnimFrame.call(window,function(){o=!1,t.apply(e,r)}))}));l=function(){if(u.resizer){var t=n.parentNode;t&&t!==f.parentNode&&t.insertBefore(f,t.firstChild),f._reset()}},d=(s=n)[xn]||(s[xn]={}),c=d.renderProxy=function(t){t.animationName===kn&&l()},ge.each(_n,function(t){z(s,t,c)}),d.reflow=!!s.offsetParent,s.classList.add($n)}function U(t){var e,n,i,a=t[xn]||{},o=a.resizer;delete a.resizer,n=(e=t)[xn]||{},(i=n.renderProxy)&&(ge.each(_n,function(t){B(e,t,i)}),delete n.renderProxy),e.classList.remove($n),o&&o.parentNode&&o.parentNode.removeChild(o)}function J(t,e){return e&&(ge.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function X(t){return("string"==typeof t||t instanceof String)&&-1<t.indexOf("\n")?t.split("\n"):t}function Y(t){var e=ue.global;return{xPadding:t.xPadding,yPadding:t.yPadding,xAlign:t.xAlign,yAlign:t.yAlign,rtl:t.rtl,textDirection:t.textDirection,bodyFontColor:t.bodyFontColor,_bodyFontFamily:Dn(t.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Dn(t.bodyFontStyle,e.defaultFontStyle),_bodyAlign:t.bodyAlign,bodyFontSize:Dn(t.bodyFontSize,e.defaultFontSize),bodySpacing:t.bodySpacing,titleFontColor:t.titleFontColor,_titleFontFamily:Dn(t.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Dn(t.titleFontStyle,e.defaultFontStyle),titleFontSize:Dn(t.titleFontSize,e.defaultFontSize),_titleAlign:t.titleAlign,titleSpacing:t.titleSpacing,titleMarginBottom:t.titleMarginBottom,footerFontColor:t.footerFontColor,_footerFontFamily:Dn(t.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Dn(t.footerFontStyle,e.defaultFontStyle),footerFontSize:Dn(t.footerFontSize,e.defaultFontSize),_footerAlign:t.footerAlign,footerSpacing:t.footerSpacing,footerMarginTop:t.footerMarginTop,caretSize:t.caretSize,cornerRadius:t.cornerRadius,backgroundColor:t.backgroundColor,opacity:0,legendColorBackground:t.multiKeyBackground,displayColors:t.displayColors,borderColor:t.borderColor,borderWidth:t.borderWidth}}function G(t,e){return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-t.xPadding:t.x+t.xPadding}function e(t){return J([],X(t))}function Q(){return ge.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,i){if("xAxes"===t||"yAxes"===t){var a,o,r,s=n[t].length;for(e[t]||(e[t]=[]),a=0;a<s;++a)r=n[t][a],o=In(r.type,"xAxes"===t?"category":"linear"),a>=e[t].length&&e[t].push({}),!e[t][a].type||r.type&&r.type!==e[t][a].type?ge.merge(e[t][a],[En.getScaleDefaults(o),r]):ge.merge(e[t][a],r)}else ge._merger(t,e,n,i)}})}function Z(){return ge.merge(Object.create(null),[].slice.call(arguments),{merger:function(t,e,n,i){var a=e[t]||Object.create(null),o=n[t];"scales"===t?e[t]=Q(a,o):"scale"===t?e[t]=ge.merge(a,[En.getScaleDefaults(o.type),o]):ge._merger(t,e,n,i)}})}function K(e){var t=e.options;ge.each(e.scales,function(t){yn.removeBox(e,t)}),t=Z(ue.global,ue[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function tt(t,e,n){for(var i,a=function(t){return t.id===i};i=e+n++,0<=ge.findIndex(t,a););return i}function et(t){return"top"===t||"bottom"===t}function nt(n,i){return function(t,e){return t[n]===e[n]?t[i]-e[i]:t[n]-e[n]}}function it(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function at(t){this.options=t||{}}function ot(t,e,n){var i,a=t.getTicks().length,o=Math.min(e,a-1),r=t.getPixelForTick(o),s=t._startPixel,l=t._endPixel;if(!(n&&(i=1===a?Math.max(r-s,l-r):0===e?(t.getPixelForTick(1)-r)/2:(r-t.getPixelForTick(o-1))/2,(r+=o<e?i:-i)<s-1e-6||l+1e-6<r)))return r}function rt(t,e,n,i){function a(t){return{width:w[t]||0,height:$[t]||0,offset:k[t]||0}}var o,r,s,l,d,c,u,f,h,p,m,g,v,y,b,x=n.length,w=[],$=[],k=[],_=0,S=0;for(o=0;o<x;++o){if(l=n[o].label,d=n[o].major?e.major:e.minor,t.font=c=d.string,u=i[c]=i[c]||{data:{},gc:[]},f=d.lineHeight,h=p=0,Vn(l)||Wn(l)){if(Wn(l))for(r=0,s=l.length;r<s;++r)m=l[r],Vn(m)||Wn(m)||(h=ge.measureText(t,u.data,u.gc,h,m),p+=f)}else h=ge.measureText(t,u.data,u.gc,h,l),p=f;w.push(h),$.push(p),k.push(f/2),_=Math.max(h,_),S=Math.max(p,S)}return y=i,b=x,ge.each(y,function(t){var e,n=t.gc,i=n.length/2;if(b<i){for(e=0;e<i;++e)delete t.data[n[e]];n.splice(0,i)}}),g=w.indexOf(_),v=$.indexOf(S),{first:a(0),last:a(x-1),widest:a(g),highest:a(v)}}function st(t){return t.drawTicks?t.tickMarkLength:0}function lt(t){var e,n;return t.display?(e=ge.options._parseFont(t),n=ge.options.toPadding(t.padding),e.lineHeight+n.height):0}function dt(t,e){return ge.extend(ge.options._parseFont({fontFamily:qn(e.fontFamily,t.fontFamily),fontSize:qn(e.fontSize,t.fontSize),fontStyle:qn(e.fontStyle,t.fontStyle),lineHeight:qn(e.lineHeight,t.lineHeight)}),{color:ge.options.resolve([e.fontColor,t.fontColor,ue.global.defaultFontColor])})}function ct(t){var e=dt(t,t.minor);return{minor:e,major:t.major.enabled?dt(t,t.major):e}}function ut(t){var e,n,i,a=[];for(n=0,i=t.length;n<i;++n)void 0!==(e=t[n])._index&&a.push(e);return a}function ft(t,e,n,i){var a,o,r,s,l=qn(n,0),d=Math.min(qn(i,t.length),t.length),c=0;for(e=Math.ceil(e),i&&(e=(a=i-n)/Math.floor(a/e)),s=l;s<0;)c++,s=Math.round(l+c*e);for(o=Math.max(l,0);o<d;o++)r=t[o],o===s?(r._index=o,c++,s=Math.round(l+c*e)):delete r.label}function ht(t,e,n,i){var a,o,r,s,l,d,c=t.options,u=(r=e,s=c.stacked,d=[(l=n).type,void 0===s&&void 0===l.stack?l.index:"",l.stack].join("."),void 0===r[d]&&(r[d]={pos:[],neg:[]}),r[d]),f=u.pos,h=u.neg,p=i.length;for(a=0;a<p;++a)o=t._parseValue(i[a]),isNaN(o.min)||isNaN(o.max)||n.data[a].hidden||(f[a]=f[a]||0,h[a]=h[a]||0,c.relativePoints?f[a]=100:o.min<0||o.max<0?h[a]+=o.min:f[a]+=o.max)}function pt(t,e,n){var i,a,o=n.length;for(i=0;i<o;++i)a=t._parseValue(n[i]),isNaN(a.min)||isNaN(a.max)||e.data[i].hidden||(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}function mt(t,e){return ge.isFinite(t)&&0<=t?t:e}function gt(t){var e=t.ticks;return e.display&&t.display?di(e.fontSize,ue.global.defaultFontSize)+2*e.backdropPaddingY:0}function vt(t,e,n,i,a){return t===i||t===a?{start:e-n/2,end:e+n/2}:t<i||a<t?{start:e-n,end:e}:{start:e,end:e+n}}function yt(t){return 0===t||180===t?"center":t<180?"left":"right"}function bt(t,e,n,i){var a,o,r=n.y+i/2;if(ge.isArray(e))for(a=0,o=e.length;a<o;++a)t.fillText(e[a],n.x,r),r+=i;else t.fillText(e,n.x,r)}function xt(t,e,n){90===t||270===t?n.y-=e.h/2:(270<t||t<90)&&(n.y-=e.h)}function wt(t){return ge.isNumber(t)?t:0}function $t(t,e){return t-e}function kt(t){return ge.valueOrDefault(t.time.min,t.ticks.min)}function _t(t){return ge.valueOrDefault(t.time.max,t.ticks.max)}function St(t,e,n,i){var a=function(t,e,n){for(var i,a,o,r=0,s=t.length-1;0<=r&&r<=s;){if(a=t[(i=r+s>>1)-1]||null,o=t[i],!a)return{lo:null,hi:o};if(o[e]<n)r=i+1;else{if(!(a[e]>n))return{lo:a,hi:o};s=i-1}}return{lo:o,hi:null}}(t,e,n),o=a.lo?a.hi?a.lo:t[t.length-2]:t[0],r=a.lo?a.hi?a.hi:t[t.length-1]:t[1],s=r[e]-o[e],l=s?(n-o[e])/s:0,d=(r[i]-o[i])*l;return o[i]+d}function Tt(t,e){var n=t._adapter,i=t.options.time,a=i.parser,o=a||i.format,r=e;return"function"==typeof a&&(r=a(r)),ge.isFinite(r)||(r="string"==typeof o?n.parse(r,o):n.parse(r)),null!==r?+r:(a||"function"!=typeof o||(r=o(e),ge.isFinite(r)||(r=n.parse(r))),r)}function Ct(t,e){if(ge.isNullOrUndef(e))return null;var n=t.options.time,i=Tt(t,t.getRightValue(e));return null===i||n.round&&(i=+t._adapter.startOf(i,n.round)),i}function At(t,e,n,i){var a,o,r,s=wi.length;for(a=wi.indexOf(t);a<s-1;++a)if(r=(o=xi[wi[a]]).steps?o.steps:bi,o.common&&Math.ceil((n-e)/(r*o.size))<=i)return wi[a];return wi[s-1]}function Mt(d,t,e){var n,i,a=[],o={},r=t.length;for(n=0;n<r;++n)o[i=t[n]]=n,a.push({value:i,major:!1});return 0!==r&&e?function(t,e,n,i){var a,o,r=d._adapter,s=+r.startOf(e[0].value,i),l=e[e.length-1].value;for(a=s;a<=l;a=+r.add(a,1,i))0<=(o=n[a])&&(e[o].major=!0);return e}(0,a,o,e):a}function jt(t,e,n){var i,a=t._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(i=parseFloat(o,10),isFinite(i)&&Math.floor(i)===i)return"-"!==o[0]&&"+"!==o[0]||(i=e+i),!(i===e||i<0||n<=i)&&i;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function Et(t){return(t.el._scale||{}).getPointPositionForValue?function(t){var e,n,i,a,o,r=t.el._scale,s=r.options,l=r.chart.data.labels.length,d=t.fill,c=[];if(!l)return null;for(e=s.ticks.reverse?r.max:r.min,n=s.ticks.reverse?r.min:r.max,i=r.getPointPositionForValue(0,e),a=0;a<l;++a)o="start"===d||"end"===d?r.getPointPositionForValue(a,"start"===d?e:n):r.getBasePosition(a),s.gridLines.circular&&(o.cx=i.x,o.cy=i.y,o.angle=r.getIndexAngle(a)-Math.PI/2),c.push(o);return c}(t):function(t){var e,n=t.el._model||{},i=t.el._scale||{},a=t.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===a?o=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:i.getBasePixel&&(o=i.getBasePixel()),null!=o){if(void 0!==o.x&&void 0!==o.y)return o;if(ge.isFinite(o))return{x:(e=i.isHorizontal())?o:null,y:e?null:o}}return null}(t)}function Dt(t,e,n){var i,a=t[e].fill,o=[e];if(!n)return a;for(;!1!==a&&-1===o.indexOf(a);){if(!isFinite(a))return a;if(!(i=t[a]))return!1;if(i.visible)return a;o.push(a),a=i.fill}return!1}function Nt(t){var e=t.fill,n="dataset";return!1===e?null:(isFinite(e)||(n="boundary"),Ti[n](t))}function Ot(t){return t&&!t.skip}function Pt(t,e,n,i,a){var o,r,s,l;if(i&&a){for(t.moveTo(e[0].x,e[0].y),o=1;o<i;++o)ge.canvas.lineTo(t,e[o-1],e[o]);if(void 0===n[0].angle)for(t.lineTo(n[a-1].x,n[a-1].y),o=a-1;0<o;--o)ge.canvas.lineTo(t,n[o],n[o-1],!0);else for(r=n[0].cx,s=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-r,2)+Math.pow(n[0].y-s,2)),o=a-1;0<o;--o)t.arc(r,s,l,n[o].angle,n[o-1].angle,!0)}}function Ft(t,e,n,i,a,o){var r,s,l,d,c,u,f,h,p=e.length,m=i.spanGaps,g=[],v=[],y=0,b=0;for(t.beginPath(),r=0,s=p;r<s;++r)c=n(d=e[l=r%p]._view,l,i),u=Ot(d),f=Ot(c),o&&void 0===h&&u&&(s=p+(h=r+1)),u&&f?(y=g.push(d),b=v.push(c)):y&&b&&(m?(u&&g.push(d),f&&v.push(c)):(Pt(t,g,v,y,b),y=b=0,g=[],v=[]));Pt(t,g,v,y,b),t.closePath(),t.fillStyle=a,t.fill()}function Lt(t,e){return t.usePointStyle&&t.boxWidth>e?e:t.boxWidth}function It(t,e){var n=new Ei({ctx:t.ctx,options:e,chart:t});yn.configure(t,n,e),yn.addBox(t,n),t.legend=n}function Rt(t,e){var n=new Oi({ctx:t.ctx,options:e,chart:t});yn.configure(t,n,e),yn.addBox(t,n),t.titleBlock=n}i=i&&i.hasOwnProperty("default")?i["default"]:i;var Ht,zt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Bt=(function(t){var l={};for(var e in zt)zt.hasOwnProperty(e)&&(l[zt[e]]=e);var s=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var n in s)if(s.hasOwnProperty(n)){if(!("channels"in s[n]))throw new Error("missing channels property: "+n);if(!("labels"in s[n]))throw new Error("missing channel labels property: "+n);if(s[n].labels.length!==s[n].channels)throw new Error("channel and label counts mismatch: "+n);var i=s[n].channels,a=s[n].labels;delete s[n].channels,delete s[n].labels,Object.defineProperty(s[n],"channels",{value:i}),Object.defineProperty(s[n],"labels",{value:a})}s.rgb.hsl=function(t){var e,n,i=t[0]/255,a=t[1]/255,o=t[2]/255,r=Math.min(i,a,o),s=Math.max(i,a,o),l=s-r;return s===r?e=0:i===s?e=(a-o)/l:a===s?e=2+(o-i)/l:o===s&&(e=4+(i-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(r+s)/2,[e,100*(s===r?0:n<=.5?l/(s+r):l/(2-s-r)),100*n]},s.rgb.hsv=function(t){var e,n,i,a,o,r=t[0]/255,s=t[1]/255,l=t[2]/255,d=Math.max(r,s,l),c=d-Math.min(r,s,l),u=function(t){return(d-t)/6/c+.5};return 0===c?a=o=0:(o=c/d,e=u(r),n=u(s),i=u(l),r===d?a=i-n:s===d?a=1/3+e-i:l===d&&(a=2/3+n-e),a<0?a+=1:1<a&&(a-=1)),[360*a,100*o,100*d]},s.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[s.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,i))*100,100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},s.rgb.cmyk=function(t){var e,n=t[0]/255,i=t[1]/255,a=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-i,1-a)))/(1-e)||0),100*((1-i-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]},s.rgb.keyword=function(t){var e=l[t];if(e)return e;var n,i,a,o=1/0;for(var r in zt)if(zt.hasOwnProperty(r)){var s=(i=t,a=zt[r],Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));s<o&&(o=s,n=r)}return n},s.keyword.rgb=function(t){return zt[t]},s.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=.04045<i?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]},s.rgb.lab=function(t){var e=s.rgb.xyz(t),n=e[0],i=e[1],a=e[2];return i/=100,a/=108.883,n=.008856<(n/=95.047)?Math.pow(n,1/3):7.787*n+16/116,[116*(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(a=.008856<a?Math.pow(a,1/3):7.787*a+16/116))]},s.hsl.rgb=function(t){var e,n,i,a,o,r=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[o=255*l,o,o];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var d=0;d<3;d++)(i=r+1/3*-(d-1))<0&&i++,1<i&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,a[d]=255*o;return a},s.hsl.hsv=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,a=n,o=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,a*=o<=1?o:2-o,[e,100*(0===i?2*a/(o+a):2*n/(i+n)),(i+n)/2*100]},s.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,a=Math.floor(e)%6,o=e-Math.floor(e),r=255*i*(1-n),s=255*i*(1-n*o),l=255*i*(1-n*(1-o));switch(i*=255,a){case 0:return[i,l,r];case 1:return[s,i,r];case 2:return[r,i,l];case 3:return[r,s,i];case 4:return[l,r,i];case 5:return[i,r,s]}},s.hsv.hsl=function(t){var e,n,i,a=t[0],o=t[1]/100,r=t[2]/100,s=Math.max(r,.01);return i=(2-o)*r,n=o*s,[a,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(i/=2)]},s.hwb.rgb=function(t){var e,n,i,a,o,r,s,l=t[0]/360,d=t[1]/100,c=t[2]/100,u=d+c;switch(1<u&&(d/=u,c/=u),i=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(i=1-i),a=d+i*((n=1-c)-d),e){default:case 6:case 0:o=n,r=a,s=d;break;case 1:o=a,r=n,s=d;break;case 2:o=d,r=n,s=a;break;case 3:o=d,r=a,s=n;break;case 4:o=a,r=d,s=n;break;case 5:o=n,r=d,s=a}return[255*o,255*r,255*s]},s.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a)),255*(1-Math.min(1,i*(1-a)+a))]},s.xyz.rgb=function(t){var e,n,i,a=t[0]/100,o=t[1]/100,r=t[2]/100;return n=-.9689*a+1.8758*o+.0415*r,i=.0557*a+-.204*o+1.057*r,e=.0031308<(e=3.2406*a+-1.5372*o+-.4986*r)?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=.0031308<n?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},s.xyz.lab=function(t){var e=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(i=.008856<i?Math.pow(i,1/3):7.787*i+16/116))]},s.lab.xyz=function(t){var e,n,i,a=t[0];e=t[1]/500+(n=(a+16)/116),i=n-t[2]/200;var o=Math.pow(n,3),r=Math.pow(e,3),s=Math.pow(i,3);return n=.008856<o?o:(n-16/116)/7.787,e=.008856<r?r:(e-16/116)/7.787,i=.008856<s?s:(i-16/116)/7.787,[e*=95.047,n*=100,i*=108.883]},s.lab.lch=function(t){var e,n=t[0],i=t[1],a=t[2];return(e=360*Math.atan2(a,i)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(i*i+a*a),e]},s.lch.lab=function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},s.rgb.ansi16=function(t,e){var n=t[0],i=t[1],a=t[2],o=1 in arguments?e:s.rgb.hsv(t)[2];if(0===(o=Math.round(o/50)))return 30;var r=30+(Math.round(a/255)<<2|Math.round(i/255)<<1|Math.round(n/255));return 2===o&&(r+=60),r},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],n=t[1],i=t[2];return e===n&&n===i?e<8?16:248<e?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},
s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return 50<t&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(50<t));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},s.ansi256.rgb=function(t){if(232<=t){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map(function(t){return t+t}).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},s.rgb.hcg=function(t){var e,n=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.max(Math.max(n,i),a),r=Math.min(Math.min(n,i),a),s=o-r;return e=s<=0?0:o===n?(i-a)/s%6:o===i?2+(a-n)/s:4+(n-i)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?r/(1-s):0)]},s.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=1,a=0;return(i=n<.5?2*e*n:2*e*(1-n))<1&&(a=(n-.5*i)/(1-i)),[t[0],100*i,100*a]},s.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=e*n,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],100*i,100*a]},s.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100;if(0===n)return[255*i,255*i,255*i];var a,o=[0,0,0],r=e%1*6,s=r%1,l=1-s;switch(Math.floor(r)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return a=(1-n)*i,[255*(n*o[0]+a),255*(n*o[1]+a),255*(n*o[2]+a)]},s.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),i=0;return 0<n&&(i=e/n),[t[0],100*i,100*n]},s.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return 0<n&&n<.5?i=e/(2*n):.5<=n&&n<1&&(i=e/(2*(1-n))),[t[0],100*i,100*n]},s.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},s.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,i=n-e,a=0;return i<1&&(a=(n-i)/(1-i)),[t[0],100*i,100*a]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}(Ht={exports:{}},Ht.exports),Ht.exports);Bt.rgb,Bt.hsl,Bt.hsv,Bt.hwb,Bt.cmyk,Bt.xyz,Bt.lab,Bt.lch,Bt.hex,Bt.keyword,Bt.ansi16,Bt.ansi256,Bt.hcg,Bt.apple,Bt.gray;var Wt={};Object.keys(Bt).forEach(function(r){Wt[r]={},Object.defineProperty(Wt[r],"channels",{value:Bt[r].channels}),Object.defineProperty(Wt[r],"labels",{value:Bt[r].labels});var s=function(){for(var t=l(r),e={},n=Object.keys(t),i=n.length,a=0;a<i;a++){var o=n[a];null!==t[o].parent&&(e[o]=d(o,t))}return e}();Object.keys(s).forEach(function(t){var e,n,a,i,o=s[t];Wt[r][t]=(i=function(t){if(null==t)return t;1<arguments.length&&(t=Array.prototype.slice.call(arguments));var e=a(t);if("object"==typeof e)for(var n=e.length,i=0;i<n;i++)e[i]=Math.round(e[i]);return e},"conversion"in(a=o)&&(i.conversion=a.conversion),i),Wt[r][t].raw=(n=function(t){return null==t?t:(1<arguments.length&&(t=Array.prototype.slice.call(arguments)),e(t))},"conversion"in(e=o)&&(n.conversion=e.conversion),n)})});var Vt=Wt,qt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ut={getRgba:n,getHsla:a,getRgb:function(t){var e=n(t);return e&&e.slice(0,3)},getHsl:function(t){var e=a(t);return e&&e.slice(0,3)},getHwb:r,getAlpha:function(t){var e=n(t);return e?e[3]:(e=a(t))?e[3]:(e=r(t))?e[3]:void 0},hexString:function(t,e){return e=void 0!==e&&3===t.length?e:t[3],"#"+h(t[0])+h(t[1])+h(t[2])+(0<=e&&e<1?h(Math.round(255*e)):"")},rgbString:function(t,e){return e<1||t[3]&&t[3]<1?s(t,e):"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:s,percentString:function(t,e){return e<1||t[3]&&t[3]<1?c(t,e):"rgb("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%)"},percentaString:c,hslString:function(t,e){return e<1||t[3]&&t[3]<1?u(t,e):"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:u,hwbString:function(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return Jt[t.slice(0,3)]}},Jt={};for(var Xt in qt)Jt[qt[Xt]]=Xt;var Yt=function(t){return t instanceof Yt?t:this instanceof Yt?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=Ut.getRgba(t))?this.setValues("rgb",e):(e=Ut.getHsla(t))?this.setValues("hsl",e):(e=Ut.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new Yt(t);var e};Yt.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return Ut.hexString(this.values.rgb)},rgbString:function(){return Ut.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return Ut.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return Ut.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return Ut.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return Ut.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return Ut.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return Ut.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return n<e?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return 7.1<=e?"AAA":4.5<=e?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=t,i=void 0===e?.5:e,a=2*i-1,o=this.alpha()-n.alpha(),r=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,s=1-r;return this.rgb(r*this.red()+s*n.red(),r*this.green()+s*n.green(),r*this.blue()+s*n.blue()).alpha(this.alpha()*i+n.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new Yt,i=this.values,a=n.values;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],"[object Array]"===(e={}.toString.call(t))?a[o]=t.slice(0):"[object Number]"===e?a[o]=t:console.error("unexpected color value:",t));return n}},Yt.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Yt.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Yt.prototype.getValues=function(t){for(var e=this.values,n={},i=0;i<t.length;i++)n[t.charAt(i)]=e[t][i];return 1!==e.alpha&&(n.a=e.alpha),n},Yt.prototype.setValues=function(t,e){var n,i,a=this.values,o=this.spaces,r=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)a[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)a[t][n]=e[t.charAt(n)];s=e.a}else if(void 0!==e[o[t][0]]){var l=o[t];for(n=0;n<t.length;n++)a[t][n]=e[l[n]];s=e.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===t)return!1;for(n=0;n<t.length;n++)i=Math.max(0,Math.min(r[t][n],a[t][n])),a[t][n]=Math.round(i);for(var d in o)d!==t&&(a[d]=Vt[t][d](a[t]));return!0},Yt.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},Yt.prototype.setChannel=function(t,e,n){var i=this.values[t];return void 0===n?i[e]:(n===i[e]||(i[e]=n,this.setValues(t,i)),this)},"undefined"!=typeof window&&(window.Color=Yt);var Gt,Qt=Yt,Zt={noop:function(){},uid:(Gt=0,function(){return Gt++}),isNullOrUndef:function(t){return null==t},isArray:function(t){if(Array.isArray&&Array.isArray(t))return!0;var e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)},isObject:function(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)},isFinite:function(t){return("number"==typeof t||t instanceof Number)&&isFinite(t)},valueOrDefault:function(t,e){return void 0===t?e:t},valueAtIndexOrDefault:function(t,e,n){return Zt.valueOrDefault(Zt.isArray(t)?t[e]:t,n)},callback:function(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)},each:function(t,e,n,i){var a,o,r;if(Zt.isArray(t))if(o=t.length,i)for(a=o-1;0<=a;a--)e.call(n,t[a],a);else for(a=0;a<o;a++)e.call(n,t[a],a);else if(Zt.isObject(t))for(o=(r=Object.keys(t)).length,a=0;a<o;a++)e.call(n,t[r[a]],r[a])},arrayEquals:function(t,e){var n,i,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],o=e[n],a instanceof Array&&o instanceof Array){if(!Zt.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},clone:function(t){if(Zt.isArray(t))return t.map(Zt.clone);if(Zt.isObject(t)){for(var e=Object.create(t),n=Object.keys(t),i=n.length,a=0;a<i;++a)e[n[a]]=Zt.clone(t[n[a]]);return e}return t},_merger:function(t,e,n,i){if(p(t)){var a=e[t],o=n[t];Zt.isObject(a)&&Zt.isObject(o)?Zt.merge(a,o,i):e[t]=Zt.clone(o)}},_mergerIf:function(t,e,n){if(p(t)){var i=e[t],a=n[t];Zt.isObject(i)&&Zt.isObject(a)?Zt.mergeIf(i,a):e.hasOwnProperty(t)||(e[t]=Zt.clone(a))}},merge:function(t,e,n){var i,a,o,r,s,l=Zt.isArray(e)?e:[e],d=l.length;if(!Zt.isObject(t))return t;for(i=(n=n||{}).merger||Zt._merger,a=0;a<d;++a)if(e=l[a],Zt.isObject(e))for(s=0,r=(o=Object.keys(e)).length;s<r;++s)i(o[s],t,e,n);return t},mergeIf:function(t,e){return Zt.merge(t,e,{merger:Zt._mergerIf})},extend:Object.assign||function(t){return Zt.merge(t,[].slice.call(arguments,1),{merger:function(t,e,n){e[t]=n[t]}})},inherits:function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=Zt.inherits,t&&Zt.extend(n.prototype,t),n.__super__=e.prototype,n},_deprecated:function(t,e,n,i){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+i+'" instead')}},Kt=Zt;Zt.callCallback=Zt.callback,Zt.indexOf=function(t,e,n){return Array.prototype.indexOf.call(t,e,n)},Zt.getValueOrDefault=Zt.valueOrDefault,Zt.getValueAtIndexOrDefault=Zt.valueAtIndexOrDefault;var te={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return 1<=t?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.45),i<1?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-te.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*te.easeInBounce(2*t):.5*te.easeOutBounce(2*t-1)+.5}},ee={effects:te};Kt.easingEffects=te;var ne=Math.PI,ie=ne/180,ae=2*ne,oe=ne/2,re=ne/4,se=2*ne/3,le={clear:function(t){t.ctx.clearRect(0,0,t.width,t.height)},roundedRect:function(t,e,n,i,a,o){if(o){var r=Math.min(o,a/2,i/2),s=e+r,l=n+r,d=e+i-r,c=n+a-r;t.moveTo(e,l),s<d&&l<c?(t.arc(s,l,r,-ne,-oe),t.arc(d,l,r,-oe,0),t.arc(d,c,r,0,oe),t.arc(s,c,r,oe,ne)):s<d?(t.moveTo(s,n),t.arc(d,l,r,-oe,oe),t.arc(s,l,r,oe,ne+oe)):l<c?(t.arc(s,l,r,-ne,0),t.arc(s,c,r,0,ne)):t.arc(s,l,r,-ne,ne),t.closePath(),t.moveTo(e,n)}else t.rect(e,n,i,a)},drawPoint:function(t,e,n,i,a,o){var r,s,l,d,c,u=(o||0)*ie;if(e&&"object"==typeof e&&("[object HTMLImageElement]"===(r=e.toString())||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(i,a),t.rotate(u),t.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),void t.restore();if(!(isNaN(n)||n<=0)){switch(t.beginPath(),e){default:t.arc(i,a,n,0,ae),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(u)*n,a-Math.cos(u)*n),u+=se,t.lineTo(i+Math.sin(u)*n,a-Math.cos(u)*n),u+=se,t.lineTo(i+Math.sin(u)*n,a-Math.cos(u)*n),t.closePath();break;case"rectRounded":d=n-(c=.516*n),s=Math.cos(u+re)*d,l=Math.sin(u+re)*d,t.arc(i-s,a-l,c,u-ne,u-oe),t.arc(i+l,a-s,c,u-oe,u),t.arc(i+s,a+l,c,u,u+oe),t.arc(i-l,a+s,c,u+oe,u+ne),t.closePath();break;case"rect":if(!o){d=Math.SQRT1_2*n,t.rect(i-d,a-d,2*d,2*d);break}u+=re;case"rectRot":s=Math.cos(u)*n,l=Math.sin(u)*n,t.moveTo(i-s,a-l),t.lineTo(i+l,a-s),t.lineTo(i+s,a+l),t.lineTo(i-l,a+s),t.closePath();break;case"crossRot":u+=re;case"cross":s=Math.cos(u)*n,l=Math.sin(u)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s);break;case"star":s=Math.cos(u)*n,l=Math.sin(u)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s),u+=re,s=Math.cos(u)*n,l=Math.sin(u)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l),t.moveTo(i+l,a-s),t.lineTo(i-l,a+s);break;case"line":s=Math.cos(u)*n,l=Math.sin(u)*n,t.moveTo(i-s,a-l),t.lineTo(i+s,a+l);break;case"dash":t.moveTo(i,a),t.lineTo(i+Math.cos(u)*n,a+Math.sin(u)*n)}t.fill(),t.stroke()}},_isPointInArea:function(t,e){return t.x>e.left-1e-6&&t.x<e.right+1e-6&&t.y>e.top-1e-6&&t.y<e.bottom+1e-6},clipArea:function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},unclipArea:function(t){t.restore()},lineTo:function(t,e,n,i){var a=n.steppedLine;if(a){if("middle"===a){var o=(e.x+n.x)/2;t.lineTo(o,i?n.y:e.y),t.lineTo(o,i?e.y:n.y)}else"after"===a&&!i||"after"!==a&&i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}else n.tension?t.bezierCurveTo(i?e.controlPointPreviousX:e.controlPointNextX,i?e.controlPointPreviousY:e.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):t.lineTo(n.x,n.y)}},de=le;Kt.clear=le.clear,Kt.drawRoundedRectangle=function(t){t.beginPath(),le.roundedRect.apply(le,arguments)};var ce={_set:function(t,e){return Kt.merge(this[t]||(this[t]={}),e)}};ce._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ue=ce,fe=Kt.valueOrDefault,he={toLineHeight:function(t,e){var n=(""+t).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t},toPadding:function(t){var e,n,i,a;return Kt.isObject(t)?(e=+t.top||0,n=+t.right||0,i=+t.bottom||0,a=+t.left||0):e=n=i=a=+t||0,{top:e,right:n,bottom:i,left:a,height:e+i,width:a+n}},_parseFont:function(t){var e,n=ue.global,i=fe(t.fontSize,n.defaultFontSize),a={family:fe(t.fontFamily,n.defaultFontFamily),lineHeight:Kt.options.toLineHeight(fe(t.lineHeight,n.defaultLineHeight),i),size:i,style:fe(t.fontStyle,n.defaultFontStyle),weight:null,string:""};return a.string=!(e=a)||Kt.isNullOrUndef(e.size)||Kt.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family,a},resolve:function(t,e,n,i){var a,o,r,s=!0;for(a=0,o=t.length;a<o;++a)if(void 0!==(r=t[a])&&(void 0!==e&&"function"==typeof r&&(r=r(e),s=!1),void 0!==n&&Kt.isArray(r)&&(r=r[n],s=!1),void 0!==r))return i&&!s&&(i.cacheable=!1),r}},pe={_factorize:function(t){var e,n=[],i=Math.sqrt(t);for(e=1;e<i;e++)t%e==0&&(n.push(e),n.push(t/e));return i===(0|i)&&n.push(i),n.sort(function(t,e){return t-e}).pop(),n},log10:Math.log10||function(t){var e=Math.log(t)*Math.LOG10E,n=Math.round(e);return t===Math.pow(10,n)?n:e}},me=pe;Kt.log10=pe.log10;var ge=Kt,ve=ee,ye=de,be=he,xe=me,we={getRtlAdapter:function(t,e,n){return t?(i=e,a=n,{x:function(t){return i+i+a-t},setWidth:function(t){a=t},textAlign:function(t){return"center"===t?t:"right"===t?"left":"right"},xPlus:function(t,e){return t-e},leftForLtr:function(t,e){return t-e}}):{x:function(t){return t},setWidth:function(){},textAlign:function(t){return t},xPlus:function(t,e){return t+e},leftForLtr:function(t){return t}};var i,a},overrideTextDirection:function(t,e){var n,i;"ltr"!==e&&"rtl"!==e||(i=[(n=t.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)},restoreTextDirection:function(t){var e=t.prevTextDirection;void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}};ge.easing=ve,ge.canvas=ye,ge.options=be,ge.math=xe,ge.rtl=we;var $e=function(t){ge.extend(this,t),this.initialize.apply(this,arguments)};ge.extend($e.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=ge.extend({},t._model)),t._start={},t},transition:function(t){var e=this,n=e._model,i=e._start,a=e._view;return n&&1!==t?(a||(a=e._view={}),i||(i=e._start={}),function(t,e,n,i){var a,o,r,s,l,d,c,u,f,h=Object.keys(n);for(a=0,o=h.length;a<o;++a)if(d=n[r=h[a]],e.hasOwnProperty(r)||(e[r]=d),(s=e[r])!==d&&"_"!==r[0]){if(t.hasOwnProperty(r)||(t[r]=s),(c=typeof d)==typeof(l=t[r]))if("string"===c){if((u=Qt(l)).valid&&(f=Qt(d)).valid){e[r]=f.mix(u,i).rgbString();continue}}else if(ge.isFinite(l)&&ge.isFinite(d)){e[r]=l+(d-l)*i;continue}e[r]=d}}(i,a,n,t)):(e._view=ge.extend({},n),e._start=null),e},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ge.isNumber(this._model.x)&&ge.isNumber(this._model.y)}}),$e.extend=ge.inherits;var ke=$e,_e=ke.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Se=_e;Object.defineProperty(_e.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(_e.prototype,"chartInstance",{get:function(){return this.chart},set:function(t){this.chart=t}}),ue._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ge.noop,onComplete:ge.noop}});var Te={animations:[],request:null,addAnimation:function(t,e,n,i){var a,o,r=this.animations;for(e.chart=t,e.startTime=Date.now(),e.duration=n,i||(t.animating=!0),a=0,o=r.length;a<o;++a)if(r[a].chart===t)return void(r[a]=e);r.push(e),1===r.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ge.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=ge.requestAnimFrame.call(window,function(){t.request=null,t.startDigest()}))},startDigest:function(){this.advance(),0<this.animations.length&&this.requestAnimationFrame()},advance:function(){for(var t,e,n,i,a=this.animations,o=0;o<a.length;)e=(t=a[o]).chart,n=t.numSteps,i=Math.floor((Date.now()-t.startTime)/t.duration*n)+1,t.currentStep=Math.min(i,n),ge.callback(t.render,[e,t],e),ge.callback(t.onAnimationProgress,[t],e),t.currentStep>=n?(ge.callback(t.onAnimationComplete,[t],e),e.animating=!1,a.splice(o,1)):++o}},Ce=ge.options.resolve,Ae=["push","pop","shift","splice","unshift"],Me=function(t,e){this.initialize(t,e)};ge.extend(Me.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(t){this.index=t},linkScales:function(){var t=this.getMeta(),e=this.chart,n=e.scales,i=this.getDataset(),a=e.options.scales;null!==t.xAxisID&&t.xAxisID in n&&!i.xAxisID||(t.xAxisID=i.xAxisID||a.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in n&&!i.yAxisID||(t.yAxisID=i.yAxisID||a.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&m(this._data,this)},createMetaDataset:function(){var t=this.datasetElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(t){var e=this.dataElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index,_index:t})},addElements:function(){var t,e,n=this.getMeta(),i=this.getDataset().data||[],a=n.data;for(t=0,e=i.length;t<e;++t)a[t]=a[t]||this.createMetaData(t);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(t){var e=this.createMetaData(t);this.getMeta().data.splice(t,0,e),this.updateElement(e,t,!0)},buildOrUpdateElements:function(){var a,t,e=this,n=e.getDataset(),i=n.data||(n.data=[]);e._data!==i&&(e._data&&m(e._data,e),i&&Object.isExtensible(i)&&(t=e,(a=i)._chartjs?a._chartjs.listeners.push(t):(Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ae.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),i=a[t];Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value:function(){var e=Array.prototype.slice.call(arguments),t=i.apply(this,e);return ge.each(a._chartjs.listeners,function(t){"function"==typeof t[n]&&t[n].apply(t,e)}),t}})}))),e._data=i),e.resyncElements()},_configure:function(){this._config=ge.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(t,e,n){"_meta"!==t&&"data"!==t&&ge._merger(t,e,n)}})},_update:function(t){this._configure(),this._cachedDataOpts=null,this.update(t)},update:ge.noop,transition:function(t){for(var e=this.getMeta(),n=e.data||[],i=n.length,a=0;a<i;++a)n[a].transition(t);e.dataset&&e.dataset.transition(t)},draw:function(){var t=this.getMeta(),e=t.data||[],n=e.length,i=0;for(t.dataset&&t.dataset.draw();i<n;++i)e[i].draw()},getStyle:function(t){var e,n=this.getMeta(),i=n.dataset;return this._configure(),i&&void 0===t?e=this._resolveDatasetElementOptions(i||{}):(t=t||0,e=this._resolveDataElementOptions(n.data[t]||{},t)),!1!==e.fill&&null!==e.fill||(e.backgroundColor=e.borderColor),e},_resolveDatasetElementOptions:function(t,e){var n,i,a,o,r=this,s=r.chart,l=r._config,d=t.custom||{},c=s.options.elements[r.datasetElementType.prototype._type]||{},u=r._datasetElementOptions,f={},h={chart:s,dataset:r.getDataset(),datasetIndex:r.index,hover:e};for(n=0,i=u.length;n<i;++n)a=u[n],o=e?"hover"+a.charAt(0).toUpperCase()+a.slice(1):a,f[a]=Ce([d[o],l[o],c[o]],h);return f},_resolveDataElementOptions:function(t,e){var n=this,i=t&&t.custom,a=n._cachedDataOpts;if(a&&!i)return a;var o,r,s,l,d=n.chart,c=n._config,u=d.options.elements[n.dataElementType.prototype._type]||{},f=n._dataElementOptions,h={},p={chart:d,dataIndex:e,dataset:n.getDataset(),datasetIndex:n.index},m={cacheable:!i};if(i=i||{},ge.isArray(f))for(r=0,s=f.length;r<s;++r)h[l=f[r]]=Ce([i[l],c[l],u[l]],p,e,m);else for(r=0,s=(o=Object.keys(f)).length;r<s;++r)h[l=o[r]]=Ce([i[l],c[f[l]],c[l],u[l]],p,e,m);return m.cacheable&&(n._cachedDataOpts=Object.freeze(h)),h},removeHoverStyle:function(t){ge.merge(t._model,t.$previousStyle||{}),delete t.$previousStyle},setHoverStyle:function(t){var e=this.chart.data.datasets[t._datasetIndex],n=t._index,i=t.custom||{},a=t._model,o=ge.getHoverColor;t.$previousStyle={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderWidth:a.borderWidth},a.backgroundColor=Ce([i.hoverBackgroundColor,e.hoverBackgroundColor,o(a.backgroundColor)],void 0,n),a.borderColor=Ce([i.hoverBorderColor,e.hoverBorderColor,o(a.borderColor)],void 0,n),a.borderWidth=Ce([i.hoverBorderWidth,e.hoverBorderWidth,a.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var t=this.getMeta().dataset;t&&this.removeHoverStyle(t)},_setDatasetHoverStyle:function(){var t,e,n,i,a,o,r=this.getMeta().dataset,s={};if(r){for(o=r._model,a=this._resolveDatasetElementOptions(r,!0),t=0,e=(i=Object.keys(a)).length;t<e;++t)s[n=i[t]]=o[n],o[n]=a[n];r.$previousStyle=s}},resyncElements:function(){var t=this.getMeta(),e=this.getDataset().data,n=t.data.length,i=e.length;i<n?t.data.splice(i,n-i):n<i&&this.insertElements(n,i-n)},insertElements:function(t,e){for(var n=0;n<e;++n)this.addElementAndReset(t+n)},onDataPush:function(){var t=arguments.length
;this.insertElements(this.getDataset().data.length-t,t)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(t,e){this.getMeta().data.splice(t,e),this.insertElements(t,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Me.extend=ge.inherits;var je=Me,Ee=2*Math.PI;ue._set("global",{elements:{arc:{backgroundColor:ue.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var De=ke.extend({_type:"arc",inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,e){var n=this._view;if(n){for(var i=ge.getAngleFromPoint(n,{x:t,y:e}),a=i.angle,o=i.distance,r=n.startAngle,s=n.endAngle;s<r;)s+=Ee;for(;s<a;)a-=Ee;for(;a<r;)a+=Ee;var l=r<=a&&a<=s,d=o>=n.innerRadius&&o<=n.outerRadius;return l&&d}return!1},getCenterPoint:function(){var t=this._view,e=(t.startAngle+t.endAngle)/2,n=(t.innerRadius+t.outerRadius)/2;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},getArea:function(){var t=this._view;return Math.PI*((t.endAngle-t.startAngle)/(2*Math.PI))*(Math.pow(t.outerRadius,2)-Math.pow(t.innerRadius,2))},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t,e=this._chart.ctx,n=this._view,i="inner"===n.borderAlign?.33:0,a={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-i,0),pixelMargin:i,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/Ee)};if(e.save(),e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,a.fullCircles){for(a.endAngle=a.startAngle+Ee,e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),t=0;t<a.fullCircles;++t)e.fill();a.endAngle=a.startAngle+n.circumference%Ee}e.beginPath(),e.arc(a.x,a.y,a.outerRadius,a.startAngle,a.endAngle),e.arc(a.x,a.y,a.innerRadius,a.endAngle,a.startAngle,!0),e.closePath(),e.fill(),n.borderWidth&&v(e,n,a),e.restore()}}),Ne=ge.valueOrDefault,Oe=ue.global.defaultColor;ue._set("global",{elements:{line:{tension:.4,backgroundColor:Oe,borderWidth:3,borderColor:Oe,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Pe=ke.extend({_type:"line",draw:function(){var t,e,n,i=this,a=i._view,o=i._chart.ctx,r=a.spanGaps,s=i._children.slice(),l=ue.global,d=l.elements.line,c=-1,u=i._loop;if(s.length){if(i._loop){for(t=0;t<s.length;++t)if(e=ge.previousItem(s,t),!s[t]._view.skip&&e._view.skip){s=s.slice(t).concat(s.slice(0,t)),u=r;break}u&&s.push(s[0])}for(o.save(),o.lineCap=a.borderCapStyle||d.borderCapStyle,o.setLineDash&&o.setLineDash(a.borderDash||d.borderDash),o.lineDashOffset=Ne(a.borderDashOffset,d.borderDashOffset),o.lineJoin=a.borderJoinStyle||d.borderJoinStyle,o.lineWidth=Ne(a.borderWidth,d.borderWidth),o.strokeStyle=a.borderColor||l.defaultColor,o.beginPath(),(n=s[0]._view).skip||(o.moveTo(n.x,n.y),c=0),t=1;t<s.length;++t)n=s[t]._view,e=-1===c?ge.previousItem(s,t):s[c],n.skip||(c!==t-1&&!r||-1===c?o.moveTo(n.x,n.y):ge.canvas.lineTo(o,e._view,n),c=t);u&&o.closePath(),o.stroke(),o.restore()}}}),Fe=ge.valueOrDefault,Le=ue.global.defaultColor;ue._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Le,borderColor:Le,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Ie=ke.extend({_type:"point",inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:t,inXRange:t,inYRange:function(t){var e=this._view;return!!e&&Math.abs(t-e.y)<e.radius+e.hitRadius},getCenterPoint:function(){var t=this._view;return{x:t.x,y:t.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(t){var e=this._view,n=this._chart.ctx,i=e.pointStyle,a=e.rotation,o=e.radius,r=e.x,s=e.y,l=ue.global,d=l.defaultColor;e.skip||(void 0===t||ge.canvas._isPointInArea(e,t))&&(n.strokeStyle=e.borderColor||d,n.lineWidth=Fe(e.borderWidth,l.elements.point.borderWidth),n.fillStyle=e.backgroundColor||d,ge.canvas.drawPoint(n,i,o,r,s,a))}}),Re=ue.global.defaultColor;ue._set("global",{elements:{rectangle:{backgroundColor:Re,borderColor:Re,borderSkipped:"bottom",borderWidth:0}}});var He=ke.extend({_type:"rectangle",draw:function(){var t,e,n,i,a,o=this._chart.ctx,r=this._view,s=(e=b(t=r),n=e.right-e.left,i=e.bottom-e.top,a=w(t,n/2,i/2),{outer:{x:e.left,y:e.top,w:n,h:i},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:i-a.t-a.b}}),l=s.outer,d=s.inner;o.fillStyle=r.backgroundColor,o.fillRect(l.x,l.y,l.w,l.h),l.w===d.w&&l.h===d.h||(o.save(),o.beginPath(),o.rect(l.x,l.y,l.w,l.h),o.clip(),o.fillStyle=r.borderColor,o.rect(d.x,d.y,d.w,d.h),o.fill("evenodd"),o.restore())},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){return $(this._view,t,e)},inLabelRange:function(t,e){var n=this._view;return y(n)?$(n,t,null):$(n,null,e)},inXRange:function(t){return $(this._view,t,null)},inYRange:function(t){return $(this._view,null,t)},getCenterPoint:function(){var t,e,n=this._view;return y(n)?(t=n.x,e=(n.y+n.base)/2):(t=(n.x+n.base)/2,e=n.y),{x:t,y:e}},getArea:function(){var t=this._view;return y(t)?t.width*Math.abs(t.y-t.base):t.height*Math.abs(t.x-t.base)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}}),ze={},Be=De,We=Pe,Ve=Ie,qe=He;ze.Arc=Be,ze.Line=We,ze.Point=Ve,ze.Rectangle=qe;var Ue=ge._deprecated,Je=ge.valueOrDefault;ue._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),ue._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Xe=je.extend({dataElementType:ze.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var t,e,n=this;je.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0,e=n._getIndexScale().options,Ue("bar chart",e.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Ue("bar chart",e.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Ue("bar chart",e.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Ue("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Ue("bar chart",e.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(t){var e,n,i=this.getMeta().data;for(this._ruler=this.getRuler(),e=0,n=i.length;e<n;++e)this.updateElement(i[e],e,t)},updateElement:function(t,e,n){var i=this,a=i.getMeta(),o=i.getDataset(),r=i._resolveDataElementOptions(t,e);t._xScale=i.getScaleForId(a.xAxisID),t._yScale=i.getScaleForId(a.yAxisID),t._datasetIndex=i.index,t._index=e,t._model={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderSkipped:r.borderSkipped,borderWidth:r.borderWidth,datasetLabel:o.label,label:i.chart.data.labels[e]},ge.isArray(o.data[e])&&(t._model.borderSkipped=null),i._updateElementGeometry(t,e,n,r),t.pivot()},_updateElementGeometry:function(t,e,n,i){var a=this,o=t._model,r=a._getValueScale(),s=r.getBasePixel(),l=r.isHorizontal(),d=a._ruler||a.getRuler(),c=a.calculateBarValuePixels(a.index,e,i),u=a.calculateBarIndexPixels(a.index,e,d,i);o.horizontal=l,o.base=n?s:c.base,o.x=l?n?s:c.head:u.center,o.y=l?u.center:n?s:c.head,o.height=l?u.size:void 0,o.width=l?void 0:u.size},_getStacks:function(t){var e,n,i=this._getIndexScale(),a=i._getMatchingVisibleMetas(this._type),o=i.options.stacked,r=a.length,s=[];for(e=0;e<r&&(n=a[e],(!1===o||-1===s.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&s.push(n.stack),n.index!==t);++e);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(t,e){var n=this._getStacks(t),i=void 0!==e?n.indexOf(e):-1;return-1===i?n.length-1:i},getRuler:function(){var t,e,n=this._getIndexScale(),i=[];for(t=0,e=this.getMeta().data.length;t<e;++t)i.push(n.getPixelForValue(null,t,this.index));return{pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(t,e,n){var i,a,o,r,s,l,d,c=this.chart,u=this._getValueScale(),f=u.isHorizontal(),h=c.data.datasets,p=u._getMatchingVisibleMetas(this._type),m=u._parseValue(h[t].data[e]),g=n.minBarLength,v=u.options.stacked,y=this.getMeta().stack,b=void 0===m.start?0:0<=m.max&&0<=m.min?m.min:m.max,x=void 0===m.start?m.end:0<=m.max&&0<=m.min?m.max-m.min:m.min-m.max,w=p.length;if(v||void 0===v&&void 0!==y)for(i=0;i<w&&(a=p[i]).index!==t;++i)a.stack===y&&(o=void 0===(d=u._parseValue(h[a.index].data[e])).start?d.end:0<=d.min&&0<=d.max?d.max:d.min,(m.min<0&&o<0||0<=m.max&&0<o)&&(b+=o));return r=u.getPixelForValue(b),l=(s=u.getPixelForValue(b+x))-r,void 0!==g&&Math.abs(l)<g&&(l=g,s=0<=x&&!f||x<0&&f?r-g:r+g),{size:l,base:r,head:s,center:s+l/2}},calculateBarIndexPixels:function(t,e,n,i){var a,o,r,s,l,d,c,u,f,h="flex"===i.barThickness?(a=e,r=i,l=(o=n).pixels,d=l[a],c=0<a?l[a-1]:null,u=a<l.length-1?l[a+1]:null,f=r.categoryPercentage,null===c&&(c=d-(null===u?o.end-o.start:u-d)),null===u&&(u=d+d-c),s=d-(d-Math.min(c,u))/2*f,{chunk:Math.abs(u-c)/2*f/o.stackCount,ratio:r.barPercentage,start:s}):k(e,n,i),p=this.getStackIndex(t,this.getMeta().stack),m=h.start+h.chunk*p+h.chunk/2,g=Math.min(Je(i.maxBarThickness,1/0),h.chunk*h.ratio);return{base:m-g/2,head:m+g/2,center:m,size:g}},draw:function(){var t=this.chart,e=this._getValueScale(),n=this.getMeta().data,i=this.getDataset(),a=n.length,o=0;for(ge.canvas.clipArea(t.ctx,t.chartArea);o<a;++o){var r=e._parseValue(i.data[o]);isNaN(r.min)||isNaN(r.max)||n[o].draw()}ge.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var t=this,e=ge.extend({},je.prototype._resolveDataElementOptions.apply(t,arguments)),n=t._getIndexScale().options,i=t._getValueScale().options;return e.barPercentage=Je(n.barPercentage,e.barPercentage),e.barThickness=Je(n.barThickness,e.barThickness),e.categoryPercentage=Je(n.categoryPercentage,e.categoryPercentage),e.maxBarThickness=Je(n.maxBarThickness,e.maxBarThickness),e.minBarLength=Je(i.minBarLength,e.minBarLength),e}}),Ye=ge.valueOrDefault,Ge=ge.options.resolve;ue._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",i=e.datasets[t.datasetIndex].data[t.index];return n+": ("+t.xLabel+", "+t.yLabel+", "+i.r+")"}}}});var Qe=je.extend({dataElementType:ze.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(n){var i=this,t=i.getMeta().data;ge.each(t,function(t,e){i.updateElement(t,e,n)})},updateElement:function(t,e,n){var i=this,a=i.getMeta(),o=t.custom||{},r=i.getScaleForId(a.xAxisID),s=i.getScaleForId(a.yAxisID),l=i._resolveDataElementOptions(t,e),d=i.getDataset().data[e],c=i.index,u=n?r.getPixelForDecimal(.5):r.getPixelForValue("object"==typeof d?d:NaN,e,c),f=n?s.getBasePixel():s.getPixelForValue(d,e,c);t._xScale=r,t._yScale=s,t._options=l,t._datasetIndex=c,t._index=e,t._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:o.skip||isNaN(u)||isNaN(f),x:u,y:f},t.pivot()},setHoverStyle:function(t){var e=t._model,n=t._options,i=ge.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Ye(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Ye(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Ye(n.hoverBorderWidth,n.borderWidth),e.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(t,e){var n=this,i=n.chart,a=n.getDataset(),o=t.custom||{},r=a.data[e]||{},s=je.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:i,dataIndex:e,dataset:a,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=ge.extend({},s)),s.radius=Ge([o.radius,r.r,n._config.radius,i.options.elements.point.radius],l,e),s}}),Ze=ge.valueOrDefault,Ke=Math.PI,tn=2*Ke,en=Ke/2;ue._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(t){var e,n,i,a=document.createElement("ul"),o=t.data,r=o.datasets,s=o.labels;if(a.setAttribute("class",t.id+"-legend"),r.length)for(n=r[e=0].data.length;e<n;++e)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return a.outerHTML},legend:{labels:{generateLabels:function(a){var o=a.data;return o.labels.length&&o.datasets.length?o.labels.map(function(t,e){var n=a.getDatasetMeta(0),i=n.controller.getStyle(e);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(o.datasets[0].data[e])||n.data[e].hidden,index:e}}):[]}},onClick:function(t,e){var n,i,a,o=e.index,r=this.chart;for(n=0,i=(r.data.datasets||[]).length;n<i;++n)(a=r.getDatasetMeta(n)).data[o]&&(a.data[o].hidden=!a.data[o].hidden);r.update()}},cutoutPercentage:50,rotation:-en,circumference:tn,tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.labels[t.index],i=": "+e.datasets[t.datasetIndex].data[t.index];return ge.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}});var nn=je.extend({dataElementType:ze.Arc,linkScales:ge.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var e,n,i,a,o=this,r=o.chart,s=r.chartArea,l=r.options,d=1,c=1,u=0,f=0,h=o.getMeta(),p=h.data,m=l.cutoutPercentage/100||0,g=l.circumference,v=o._getRingWeight(o.index);if(g<tn){var y=l.rotation%tn,b=(y+=Ke<=y?-tn:y<-Ke?tn:0)+g,x=Math.cos(y),w=Math.sin(y),$=Math.cos(b),k=Math.sin(b),_=y<=0&&0<=b||tn<=b,S=y<=en&&en<=b||tn+en<=b,T=y<=-en&&-en<=b||Ke+en<=b,C=y===-Ke||Ke<=b?-1:Math.min(x,x*m,$,$*m),A=T?-1:Math.min(w,w*m,k,k*m),M=_?1:Math.max(x,x*m,$,$*m),j=S?1:Math.max(w,w*m,k,k*m);d=(M-C)/2,c=(j-A)/2,u=-(M+C)/2,f=-(j+A)/2}for(i=0,a=p.length;i<a;++i)p[i]._options=o._resolveDataElementOptions(p[i],i);for(r.borderWidth=o.getMaxBorderWidth(),e=(s.right-s.left-r.borderWidth)/d,n=(s.bottom-s.top-r.borderWidth)/c,r.outerRadius=Math.max(Math.min(e,n)/2,0),r.innerRadius=Math.max(r.outerRadius*m,0),r.radiusLength=(r.outerRadius-r.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),r.offsetX=u*r.outerRadius,r.offsetY=f*r.outerRadius,h.total=o.calculateTotal(),o.outerRadius=r.outerRadius-r.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-r.radiusLength*v,0),i=0,a=p.length;i<a;++i)o.updateElement(p[i],i,t)},updateElement:function(t,e,n){var i=this,a=i.chart,o=a.chartArea,r=a.options,s=r.animation,l=(o.left+o.right)/2,d=(o.top+o.bottom)/2,c=r.rotation,u=r.rotation,f=i.getDataset(),h=n&&s.animateRotate?0:t.hidden?0:i.calculateCircumference(f.data[e])*(r.circumference/tn),p=n&&s.animateScale?0:i.innerRadius,m=n&&s.animateScale?0:i.outerRadius,g=t._options||{};ge.extend(t,{_datasetIndex:i.index,_index:e,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:l+a.offsetX,y:d+a.offsetY,startAngle:c,endAngle:u,circumference:h,outerRadius:m,innerRadius:p,label:ge.valueAtIndexOrDefault(f.label,e,a.data.labels[e])}});var v=t._model;n&&s.animateRotate||(v.startAngle=0===e?r.rotation:i.getMeta().data[e-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),t.pivot()},calculateTotal:function(){var n,i=this.getDataset(),t=this.getMeta(),a=0;return ge.each(t.data,function(t,e){n=i.data[e],isNaN(n)||t.hidden||(a+=Math.abs(n))}),a},calculateCircumference:function(t){var e=this.getMeta().total;return 0<e&&!isNaN(t)?tn*(Math.abs(t)/e):0},getMaxBorderWidth:function(t){var e,n,i,a,o,r,s,l,d=0,c=this.chart;if(!t)for(e=0,n=c.data.datasets.length;e<n;++e)if(c.isDatasetVisible(e)){t=(i=c.getDatasetMeta(e)).data,e!==this.index&&(o=i.controller);break}if(!t)return 0;for(e=0,n=t.length;e<n;++e)a=t[e],o?(o._configure(),r=o._resolveDataElementOptions(a,e)):r=a._options,"inner"!==r.borderAlign&&(s=r.borderWidth,d=(l=r.hoverBorderWidth)>(d=d<s?s:d)?l:d);return d},setHoverStyle:function(t){var e=t._model,n=t._options,i=ge.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Ze(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=Ze(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=Ze(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e},_getRingWeight:function(t){return Math.max(Ze(this.chart.data.datasets[t].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ue._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),ue._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var an=Xe.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),on=ge.valueOrDefault,rn=ge.options.resolve,sn=ge.canvas._isPointInArea;ue._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var ln=je.extend({datasetElementType:ze.Line,dataElementType:ze.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(t){var e,n,i=this,a=i.getMeta(),o=a.dataset,r=a.data||[],s=i.chart.options,l=i._config,d=i._showLine=on(l.showLine,s.showLines);for(i._xScale=i.getScaleForId(a.xAxisID),i._yScale=i.getScaleForId(a.yAxisID),d&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=i._yScale,o._datasetIndex=i.index,o._children=r,o._model=i._resolveDatasetElementOptions(o),o.pivot()),e=0,n=r.length;e<n;++e)i.updateElement(r[e],e,t);for(d&&0!==o._model.tension&&i.updateBezierControlPoints(),e=0,n=r.length;e<n;++e)r[e].pivot()},updateElement:function(t,e,n){var i,a,o=this,r=o.getMeta(),s=t.custom||{},l=o.getDataset(),d=o.index,c=l.data[e],u=o._xScale,f=o._yScale,h=r.dataset._model,p=o._resolveDataElementOptions(t,e);i=u.getPixelForValue("object"==typeof c?c:NaN,e,d),a=n?f.getBasePixel():o.calculatePointY(c,e,d),t._xScale=u,t._yScale=f,t._options=p,t._datasetIndex=d,t._index=e,t._model={x:i,y:a,skip:s.skip||isNaN(i)||isNaN(a),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:on(s.tension,h?h.tension:0),steppedLine:!!h&&h.steppedLine,hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(t){var e=this,n=e._config,i=t.custom||{},a=e.chart.options,o=a.elements.line,r=je.prototype._resolveDatasetElementOptions.apply(e,arguments);return r.spanGaps=on(n.spanGaps,a.spanGaps),r.tension=on(n.lineTension,o.tension),r.steppedLine=rn([i.steppedLine,n.steppedLine,o.stepped]),r.clip=T(on(n.clip,S(e._xScale,e._yScale,r.borderWidth))),r},calculatePointY:function(t,e,n){var i,a,o,r,s,l,d,c=this.chart,u=this._yScale,f=0,h=0;if(u.options.stacked){for(s=+u.getRightValue(t),d=(l=c._getSortedVisibleDatasetMetas()).length,i=0;i<d&&(o=l[i]).index!==n;++i)a=c.data.datasets[o.index],"line"===o.type&&o.yAxisID===u.id&&((r=+u.getRightValue(a.data[e]))<0?h+=r||0:f+=r||0);return s<0?u.getPixelForValue(h+s):u.getPixelForValue(f+s)}return u.getPixelForValue(t)},updateBezierControlPoints:function(){function t(t,e,n){return Math.max(Math.min(t,n),e)}var e,n,i,a,o=this.chart,r=this.getMeta(),s=r.dataset._model,l=o.chartArea,d=r.data||[];if(s.spanGaps&&(d=d.filter(function(t){return!t._model.skip})),"monotone"===s.cubicInterpolationMode)ge.splineCurveMonotone(d);else for(e=0,n=d.length;e<n;++e)i=d[e]._model,a=ge.splineCurve(ge.previousItem(d,e)._model,i,ge.nextItem(d,e)._model,s.tension),i.controlPointPreviousX=a.previous.x,i.controlPointPreviousY=a.previous.y,i.controlPointNextX=a.next.x,i.controlPointNextY=a.next.y;if(o.options.elements.line.capBezierPoints)for(e=0,n=d.length;e<n;++e)i=d[e]._model,sn(i,l)&&(0<e&&sn(d[e-1]._model,l)&&(i.controlPointPreviousX=t(i.controlPointPreviousX,l.left,l.right),i.controlPointPreviousY=t(i.controlPointPreviousY,l.top,l.bottom)),e<d.length-1&&sn(d[e+1]._model,l)&&(i.controlPointNextX=t(i.controlPointNextX,l.left,l.right),i.controlPointNextY=t(i.controlPointNextY,l.top,l.bottom)))},draw:function(){var t,e=this.chart,n=this.getMeta(),i=n.data||[],a=e.chartArea,o=e.canvas,r=0,s=i.length;for(this._showLine&&(t=n.dataset._model.clip,ge.canvas.clipArea(e.ctx,{left:!1===t.left?0:a.left-t.left,right:!1===t.right?o.width:a.right+t.right,top:!1===t.top?0:a.top-t.top,bottom:!1===t.bottom?o.height:a.bottom+t.bottom}),n.dataset.draw(),ge.canvas.unclipArea(e.ctx));r<s;++r)i[r].draw(a)},setHoverStyle:function(t){var e=t._model,n=t._options,i=ge.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=on(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=on(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=on(n.hoverBorderWidth,n.borderWidth),e.radius=on(n.hoverRadius,n.radius)}}),dn=ge.options.resolve;ue._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(t){var e,n,i,a=document.createElement("ul"),o=t.data,r=o.datasets,s=o.labels;if(a.setAttribute("class",t.id+"-legend"),r.length)for(n=r[e=0].data.length;e<n;++e)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=r[0].backgroundColor[e],s[e]&&i.appendChild(document.createTextNode(s[e]));return a.outerHTML},legend:{labels:{generateLabels:function(a){var o=a.data;return o.labels.length&&o.datasets.length?o.labels.map(function(t,e){var n=a.getDatasetMeta(0),i=n.controller.getStyle(e);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(o.datasets[0].data[e])||n.data[e].hidden,index:e}}):[]}},onClick:function(t,e){var n,i,a,o=e.index,r=this.chart;for(n=0,i=(r.data.datasets||[]).length;n<i;++n)(a=r.getDatasetMeta(n)).data[o].hidden=!a.data[o].hidden;r.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}});var cn=je.extend({dataElementType:ze.Arc,linkScales:ge.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i,a=this,o=a.getDataset(),r=a.getMeta(),s=a.chart.options.startAngle||0,l=a._starts=[],d=a._angles=[],c=r.data;for(a._updateRadius(),r.count=a.countVisibleElements(),e=0,n=o.data.length;e<n;e++)l[e]=s,i=a._computeAngle(e),s+=d[e]=i;for(e=0,n=c.length;e<n;++e)c[e]._options=a._resolveDataElementOptions(c[e],e),a.updateElement(c[e],e,t)},_updateRadius:function(){var t=this,e=t.chart,n=e.chartArea,i=e.options,a=Math.min(n.right-n.left,n.bottom-n.top);e.outerRadius=Math.max(a/2,0),e.innerRadius=Math.max(i.cutoutPercentage?e.outerRadius/100*i.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),t.outerRadius=e.outerRadius-e.radiusLength*t.index,t.innerRadius=t.outerRadius-e.radiusLength},updateElement:function(t,e,n){var i=this,a=i.chart,o=i.getDataset(),r=a.options,s=r.animation,l=a.scale,d=a.data.labels,c=l.xCenter,u=l.yCenter,f=r.startAngle,h=t.hidden?0:l.getDistanceFromCenterForValue(o.data[e]),p=i._starts[e],m=p+(t.hidden?0:i._angles[e]),g=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[e]),v=t._options||{};ge.extend(t,{_datasetIndex:i.index,_index:e,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c,y:u,innerRadius:0,outerRadius:n?g:h,startAngle:n&&s.animateRotate?f:p,endAngle:n&&s.animateRotate?f:m,label:ge.valueAtIndexOrDefault(d,e,d[e])}}),t.pivot()},countVisibleElements:function(){var n=this.getDataset(),t=this.getMeta(),i=0;return ge.each(t.data,function(t,e){isNaN(n.data[e])||t.hidden||i++}),i},setHoverStyle:function(t){var e=t._model,n=t._options,i=ge.getHoverColor,a=ge.valueOrDefault;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=a(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=a(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=a(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(t){var e=this,n=this.getMeta().count,i=e.getDataset(),a=e.getMeta();if(isNaN(i.data[t])||a.data[t].hidden)return 0;var o={chart:e.chart,dataIndex:t,dataset:i,datasetIndex:e.index};return dn([e.chart.options.elements.arc.angle,2*Math.PI/n],o,t)}});ue._set("pie",ge.clone(ue.doughnut)),ue._set("pie",{cutoutPercentage:0});var un=nn,fn=ge.valueOrDefault;ue._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var hn=je.extend({datasetElementType:ze.Line,dataElementType:ze.Point,linkScales:ge.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(t){var e,n,i=this,a=i.getMeta(),o=a.dataset,r=a.data||[],s=i.chart.scale,l=i._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=i.index,o._children=r,o._loop=!0,o._model=i._resolveDatasetElementOptions(o),o.pivot(),e=0,n=r.length;e<n;++e)i.updateElement(r[e],e,t);for(i.updateBezierControlPoints(),e=0,n=r.length;e<n;++e)r[e].pivot()},updateElement:function(t,e,n){var i=this,a=t.custom||{},o=i.getDataset(),r=i.chart.scale,s=r.getPointPositionForValue(e,o.data[e]),l=i._resolveDataElementOptions(t,e),d=i.getMeta().dataset._model,c=n?r.xCenter:s.x,u=n?r.yCenter:s.y;t._scale=r,t._options=l,t._datasetIndex=i.index,t._index=e,t._model={x:c,y:u,skip:a.skip||isNaN(c)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:fn(a.tension,d?d.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var t=this,e=t._config,n=t.chart.options,i=je.prototype._resolveDatasetElementOptions.apply(t,arguments);return i.spanGaps=fn(e.spanGaps,n.spanGaps),i.tension=fn(e.lineTension,n.elements.line.tension),i},updateBezierControlPoints:function(){function t(t,e,n){return Math.max(Math.min(t,n),e)}var e,n,i,a,o=this.getMeta(),r=this.chart.chartArea,s=o.data||[];for(o.dataset._model.spanGaps&&(s=s.filter(function(t){return!t._model.skip})),e=0,n=s.length;e<n;++e)i=s[e]._model,a=ge.splineCurve(ge.previousItem(s,e,!0)._model,i,ge.nextItem(s,e,!0)._model,i.tension),i.controlPointPreviousX=t(a.previous.x,r.left,r.right),i.controlPointPreviousY=t(a.previous.y,r.top,r.bottom),i.controlPointNextX=t(a.next.x,r.left,r.right),i.controlPointNextY=t(a.next.y,r.top,r.bottom)},setHoverStyle:function(t){var e=t._model,n=t._options,i=ge.getHoverColor;t.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=fn(n.hoverBackgroundColor,i(n.backgroundColor)),e.borderColor=fn(n.hoverBorderColor,i(n.borderColor)),e.borderWidth=fn(n.hoverBorderWidth,n.borderWidth),e.radius=fn(n.hoverRadius,n.radius)}});ue._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}}),ue._set("global",{datasets:{scatter:{showLine:!1}}});var pn={bar:Xe,bubble:Qe,doughnut:nn,horizontalBar:an,line:ln,polarArea:cn,pie:un,radar:hn,scatter:ln},mn={modes:{single:function(t,e){var n=C(e,t),i=[];return A(t,function(t){if(t.inRange(n.x,n.y))return i.push(t),i}),i.slice(0,1)},label:D,index:D,dataset:function(t,e,n){var i=C(e,t);n.axis=n.axis||"xy";var a=E(n.axis),o=n.intersect?M(t,i):j(t,i,!1,a);return 0<o.length&&(o=t.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(t,e){return D(t,e,{intersect:!1})},point:function(t,e){return M(t,C(e,t))},nearest:function(t,e,n){var i=C(e,t);n.axis=n.axis||"xy";var a=E(n.axis);return j(t,i,n.intersect,a)},x:function(t,e,n){var i=C(e,t),a=[],o=!1;return A(t,function(t){t.inXRange(i.x)&&a.push(t),t.inRange(i.x,i.y)&&(o=!0)}),n.intersect&&!o&&(a=[]),a},y:function(t,e,n){var i=C(e,t),a=[],o=!1;return A(t,function(t){t.inYRange(i.y)&&a.push(t),t.inRange(i.x,i.y)&&(o=!0)}),n.intersect&&!o&&(a=[]),a}}},gn=ge.extend;ue._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var vn,yn={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},t.boxes.push(e)},removeBox:function(t,e){var n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure:function(t,e,n){for(var i,a=["fullWidth","position","weight"],o=a.length,r=0;r<o;++r)i=a[r],n.hasOwnProperty(i)&&(e[i]=n[i])},update:function(n,t,e){if(n){var i=n.options.layout||{},a=ge.options.toPadding(i.padding),o=t-a.width,r=e-a.height,s=(f=function(t){var e,n,i,a=[];for(e=0,n=(t||[]).length;e<n;++e)i=t[e],a.push({index:e,box:i,pos:i.position,horizontal:i.isHorizontal(),weight:i.weight});return a}(n.boxes),h=O(N(f,"left"),!0),p=O(N(f,"right")),m=O(N(f,"top"),!0),g=O(N(f,"bottom")),{leftAndTop:h.concat(m),rightAndBottom:p.concat(g),chartArea:N(f,"chartArea"),vertical:h.concat(p),horizontal:m.concat(g)}),l=s.vertical,d=s.horizontal,c=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:o,vBoxMaxWidth:o/2/l.length,hBoxMaxHeight:r/2}),u=gn({maxPadding:gn({},a),w:o,h:r,x:a.left,y:a.top},a);!function(t,e){var n,i,a;for(n=0,i=t.length;n<i;++n)(a=t[n]).width=a.horizontal?a.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,a.height=a.horizontal&&e.hBoxMaxHeight}(l.concat(d),c),I(l,u,c),I(d,u,c)&&I(l,u,c),function(n){function t(t){var e=Math.max(i[t]-n[t],0);return n[t]+=e,e}var i=n.maxPadding;n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}(u),R(s.leftAndTop,u,c),u.x+=u.w,u.y+=u.h,R(s.rightAndBottom,u,c),n.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},ge.each(s.chartArea,function(t){var e=t.box;gn(e,n.chartArea),e.update(u.w,u.h)})}var f,h,p,m,g}},bn=(vn=Object.freeze({__proto__:null,
"default":"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&vn["default"]||vn,xn="$chartjs",wn="chartjs-size-monitor",$n="chartjs-render-monitor",kn="chartjs-render-animation",_n=["animationstart","webkitAnimationStart"],Sn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tn=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("e",null,e)}catch(t){}return t}()&&{passive:!0},Cn={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(t){if(!this.disableCSSInjection){var e=t.getRootNode?t.getRootNode():document;!function(t,e){var n=t[xn]||(t[xn]={});if(!n.containsStyles){n.containsStyles=!0,e="/* Chart.js */\n"+e;var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(e)),t.appendChild(i)}}(e.host?e:document.head,bn)}},acquireContext:function(t,e){"string"==typeof t?t=document.getElementById(t):t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas);var n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(this._ensureLoaded(t),function(t,e){var n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[xn]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===a||""===a){var o=H(t,"width");void 0!==o&&(t.width=o)}if(null===i||""===i)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var r=H(t,"height");void 0!==o&&(t.height=r)}}(t,e),n):null},releaseContext:function(t){var n=t.canvas;if(n[xn]){var i=n[xn].initial;["height","width"].forEach(function(t){var e=i[t];ge.isNullOrUndef(e)?n.removeAttribute(t):n.setAttribute(t,e)}),ge.each(i.style||{},function(t,e){n.style[e]=t}),n.width=n.width,delete n[xn]}},addEventListener:function(o,t,r){var e=o.canvas;if("resize"!==t){var n=r[xn]||(r[xn]={});z(e,t,(n.proxies||(n.proxies={}))[o.id+"_"+t]=function(t){var e,n,i,a;r((n=o,i=Sn[(e=t).type]||e.type,a=ge.getRelativePosition(e,n),W(i,n,a.x,a.y,e)))})}else q(e,r,o)},removeEventListener:function(t,e,n){var i=t.canvas;if("resize"!==e){var a=((n[xn]||{}).proxies||{})[t.id+"_"+e];a&&B(i,e,a)}else U(i)}};ge.addEvent=z,ge.removeEvent=B;var An=Cn._enabled?Cn:{acquireContext:function(t){return t&&t.canvas&&(t=t.canvas),t&&t.getContext("2d")||null}},Mn=ge.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},An);ue._set("global",{plugins:{}});var jn={_plugins:[],_cacheId:0,register:function(t){var e=this._plugins;[].concat(t).forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),this._cacheId++},unregister:function(t){var n=this._plugins;[].concat(t).forEach(function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e,n){var i,a,o,r,s,l=this.descriptors(t),d=l.length;for(i=0;i<d;++i)if("function"==typeof(s=(o=(a=l[i]).plugin)[e])&&((r=[t].concat(n||[])).push(a.options),!1===s.apply(o,r)))return!1;return!0},descriptors:function(t){var e=t.$plugins||(t.$plugins={});if(e.id===this._cacheId)return e.descriptors;var i=[],a=[],n=t&&t.config||{},o=n.options&&n.options.plugins||{};return this._plugins.concat(n.plugins||[]).forEach(function(t){if(-1===i.indexOf(t)){var e=t.id,n=o[e];!1!==n&&(!0===n&&(n=ge.clone(ue.global.plugins[e])),i.push(t),a.push({plugin:t,options:n||{}}))}}),e.descriptors=a,e.id=this._cacheId,a},_invalidate:function(t){delete t.$plugins}},En={constructors:{},defaults:{},registerScaleType:function(t,e,n){this.constructors[t]=e,this.defaults[t]=ge.clone(n)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(t){return this.defaults.hasOwnProperty(t)?ge.merge(Object.create(null),[ue.scale,this.defaults[t]]):{}},updateScaleDefaults:function(t,e){this.defaults.hasOwnProperty(t)&&(this.defaults[t]=ge.extend(this.defaults[t],e))},addScalesToLayout:function(e){ge.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,yn.addBox(e,t)})}},Dn=ge.valueOrDefault,Nn=ge.rtl.getRtlAdapter;ue._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ge.noop,title:function(t,e){var n="",i=e.labels,a=i?i.length:0;if(0<t.length){var o=t[0];o.label?n=o.label:o.xLabel?n=o.xLabel:0<a&&o.index<a&&(n=i[o.index])}return n},afterTitle:ge.noop,beforeBody:ge.noop,beforeLabel:ge.noop,label:function(t,e){var n=e.datasets[t.datasetIndex].label||"";return n&&(n+=": "),ge.isNullOrUndef(t.value)?n+=t.yLabel:n+=t.value,n},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ge.noop,afterBody:ge.noop,beforeFooter:ge.noop,footer:ge.noop,afterFooter:ge.noop}}});var On={average:function(t){if(!t.length)return!1;var e,n,i=0,a=0,o=0;for(e=0,n=t.length;e<n;++e){var r=t[e];if(r&&r.hasValue()){var s=r.tooltipPosition();i+=s.x,a+=s.y,++o}}return{x:i/o,y:a/o}},nearest:function(t,e){var n,i,a,o=e.x,r=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){var l=t[n];if(l&&l.hasValue()){var d=l.getCenterPoint(),c=ge.distanceBetweenPoints(e,d);c<s&&(s=c,a=l)}}if(a){var u=a.tooltipPosition();o=u.x,r=u.y}return{x:o,y:r}}},Pn=ke.extend({initialize:function(){this._model=Y(this._options),this._lastActive=[]},getTitle:function(){var t=this,e=t._options.callbacks,n=e.beforeTitle.apply(t,arguments),i=e.title.apply(t,arguments),a=e.afterTitle.apply(t,arguments),o=[];return J(o=J(o=J(o,X(n)),X(i)),X(a))},getBeforeBody:function(){return e(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(t,n){var i=this,a=i._options.callbacks,o=[];return ge.each(t,function(t){var e={before:[],lines:[],after:[]};J(e.before,X(a.beforeLabel.call(i,t,n))),J(e.lines,a.label.call(i,t,n)),J(e.after,X(a.afterLabel.call(i,t,n))),o.push(e)}),o},getAfterBody:function(){return e(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var t=this,e=t._options.callbacks,n=e.beforeFooter.apply(t,arguments),i=e.footer.apply(t,arguments),a=e.afterFooter.apply(t,arguments),o=[];return J(o=J(o=J(o,X(n)),X(i)),X(a))},update:function(t){var e,n,i,a,o,r,s,l,d,c,u,f,h,p,m,g,v,y,b,x,w,$,k,_=this,S=_._options,T=_._model,C=_._model=Y(S),A=_._active,M=_._data,j={xAlign:T.xAlign,yAlign:T.yAlign},E={x:T.x,y:T.y},D={width:T.width,height:T.height},N={x:T.caretX,y:T.caretY};if(A.length){C.opacity=1;var O=[],P=[];N=On[S.position].call(_,A,_._eventPosition);var F=[];for(e=0,n=A.length;e<n;++e)F.push((c=d=l=s=r=o=a=void 0,a=(i=A[e])._xScale,o=i._yScale||i._scale,r=i._index,s=i._datasetIndex,d=(l=i._chart.getDatasetMeta(s).controller)._getIndexScale(),c=l._getValueScale(),{xLabel:a?a.getLabelForIndex(r,s):"",yLabel:o?o.getLabelForIndex(r,s):"",label:d?""+d.getLabelForIndex(r,s):"",value:c?""+c.getLabelForIndex(r,s):"",index:r,datasetIndex:s,x:i._model.x,y:i._model.y}));S.filter&&(F=F.filter(function(t){return S.filter(t,M)})),S.itemSort&&(F=F.sort(function(t,e){return S.itemSort(t,e,M)})),ge.each(F,function(t){O.push(S.callbacks.labelColor.call(_,t,_._chart)),P.push(S.callbacks.labelTextColor.call(_,t,_._chart))}),C.title=_.getTitle(F,M),C.beforeBody=_.getBeforeBody(F,M),C.body=_.getBody(F,M),C.afterBody=_.getAfterBody(F,M),C.footer=_.getFooter(F,M),C.x=N.x,C.y=N.y,C.caretPadding=S.caretPadding,C.labelColors=O,C.labelTextColors=P,C.dataPoints=F,D=function(t,e){var n=t._chart.ctx,i=2*e.yPadding,a=0,o=e.body,r=o.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);r+=e.beforeBody.length+e.afterBody.length;var s=e.title.length,l=e.footer.length,d=e.titleFontSize,c=e.bodyFontSize,u=e.footerFontSize;i+=s*d,i+=s?(s-1)*e.titleSpacing:0,i+=s?e.titleMarginBottom:0,i+=r*c,i+=r?(r-1)*e.bodySpacing:0,i+=l?e.footerMarginTop:0,i+=l*u,i+=l?(l-1)*e.footerSpacing:0;var f=0,h=function(t){a=Math.max(a,n.measureText(t).width+f)};return n.font=ge.fontString(d,e._titleFontStyle,e._titleFontFamily),ge.each(e.title,h),n.font=ge.fontString(c,e._bodyFontStyle,e._bodyFontFamily),ge.each(e.beforeBody.concat(e.afterBody),h),f=e.displayColors?c+2:0,ge.each(o,function(t){ge.each(t.before,h),ge.each(t.lines,h),ge.each(t.after,h)}),f=0,n.font=ge.fontString(u,e._footerFontStyle,e._footerFontFamily),ge.each(e.footer,h),{width:a+=2*e.xPadding,height:i}}(this,C),u=C,h=j=function(t,e){var n,i,a,o,r,s=t._model,l=t._chart,d=t._chart.chartArea,c="center",u="center";s.y<e.height?u="top":s.y>l.height-e.height&&(u="bottom");var f=(d.left+d.right)/2,h=(d.top+d.bottom)/2;"center"===u?(n=function(t){return t<=f},i=function(t){return f<t}):(n=function(t){return t<=e.width/2},i=function(t){return t>=l.width-e.width/2}),a=function(t){return t+e.width+s.caretSize+s.caretPadding>l.width},o=function(t){return t-e.width-s.caretSize-s.caretPadding<0},r=function(t){return t<=h?"top":"bottom"},n(s.x)?(c="left",a(s.x)&&(c="center",u=r(s.y))):i(s.x)&&(c="right",o(s.x)&&(c="center",u=r(s.y)));var p=t._options;return{xAlign:p.xAlign?p.xAlign:c,yAlign:p.yAlign?p.yAlign:u}}(this,f=D),p=_._chart,m=u.x,g=u.y,v=u.caretSize,y=u.caretPadding,b=u.cornerRadius,x=h.xAlign,w=h.yAlign,$=v+y,k=b+y,"right"===x?m-=f.width:"center"===x&&((m-=f.width/2)+f.width>p.width&&(m=p.width-f.width),m<0&&(m=0)),"top"===w?g+=$:g-="bottom"===w?f.height+$:f.height/2,"center"===w?"left"===x?m+=$:"right"===x&&(m-=$):"left"===x?m-=k:"right"===x&&(m+=k),E={x:m,y:g}}else C.opacity=0;return C.xAlign=j.xAlign,C.yAlign=j.yAlign,C.x=E.x,C.y=E.y,C.width=D.width,C.height=D.height,C.caretX=N.x,C.caretY=N.y,_._model=C,t&&S.custom&&S.custom.call(_,C),_},drawCaret:function(t,e){var n=this._chart.ctx,i=this._view,a=this.getCaretPosition(t,e,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)},getCaretPosition:function(t,e,n){var i,a,o,r,s,l,d=n.caretSize,c=n.cornerRadius,u=n.xAlign,f=n.yAlign,h=t.x,p=t.y,m=e.width,g=e.height;if("center"===f)s=p+g/2,"left"===u?(a=(i=h)-d,o=i,r=s+d,l=s-d):(a=(i=h+m)+d,o=i,r=s-d,l=s+d);else if(i="left"===u?(a=h+c+d)-d:"right"===u?(a=h+m-c-d)-d:(a=n.caretX)-d,o=a+d,"top"===f)s=(r=p)-d,l=r;else{s=(r=p+g)+d,l=r;var v=o;o=i,i=v}return{x1:i,x2:a,x3:o,y1:r,y2:s,y3:l}},drawTitle:function(t,e,n){var i,a,o,r=e.title,s=r.length;if(s){var l=Nn(e.rtl,e.x,e.width);for(t.x=G(e,e._titleAlign),n.textAlign=l.textAlign(e._titleAlign),n.textBaseline="middle",i=e.titleFontSize,a=e.titleSpacing,n.fillStyle=e.titleFontColor,n.font=ge.fontString(i,e._titleFontStyle,e._titleFontFamily),o=0;o<s;++o)n.fillText(r[o],l.x(t.x),t.y+i/2),t.y+=i+a,o+1===s&&(t.y+=e.titleMarginBottom-a)}},drawBody:function(e,t,n){var i,a,o,r,s,l,d,c,u=t.bodyFontSize,f=t.bodySpacing,h=t._bodyAlign,p=t.body,m=t.displayColors,g=0,v=m?G(t,"left"):0,y=Nn(t.rtl,t.x,t.width),b=function(t){n.fillText(t,y.x(e.x+g),e.y+u/2),e.y+=u+f},x=y.textAlign(h);for(n.textAlign=h,n.textBaseline="middle",n.font=ge.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.x=G(t,x),n.fillStyle=t.bodyFontColor,ge.each(t.beforeBody,b),g=m&&"right"!==x?"center"===h?u/2+1:u+2:0,s=0,d=p.length;s<d;++s){for(i=p[s],a=t.labelTextColors[s],o=t.labelColors[s],n.fillStyle=a,ge.each(i.before,b),l=0,c=(r=i.lines).length;l<c;++l){if(m){var w=y.x(v);n.fillStyle=t.legendColorBackground,n.fillRect(y.leftForLtr(w,u),e.y,u,u),n.lineWidth=1,n.strokeStyle=o.borderColor,n.strokeRect(y.leftForLtr(w,u),e.y,u,u),n.fillStyle=o.backgroundColor,n.fillRect(y.leftForLtr(y.xPlus(w,1),u-2),e.y+1,u-2,u-2),n.fillStyle=a}b(r[l])}ge.each(i.after,b)}g=0,ge.each(t.afterBody,b),e.y-=f},drawFooter:function(t,e,n){var i,a,o=e.footer,r=o.length;if(r){var s=Nn(e.rtl,e.x,e.width);for(t.x=G(e,e._footerAlign),t.y+=e.footerMarginTop,n.textAlign=s.textAlign(e._footerAlign),n.textBaseline="middle",i=e.footerFontSize,n.fillStyle=e.footerFontColor,n.font=ge.fontString(i,e._footerFontStyle,e._footerFontFamily),a=0;a<r;++a)n.fillText(o[a],s.x(t.x),t.y+i/2),t.y+=i+e.footerSpacing}},drawBackground:function(t,e,n,i){n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,n.lineWidth=e.borderWidth;var a=e.xAlign,o=e.yAlign,r=t.x,s=t.y,l=i.width,d=i.height,c=e.cornerRadius;n.beginPath(),n.moveTo(r+c,s),"top"===o&&this.drawCaret(t,i),n.lineTo(r+l-c,s),n.quadraticCurveTo(r+l,s,r+l,s+c),"center"===o&&"right"===a&&this.drawCaret(t,i),n.lineTo(r+l,s+d-c),n.quadraticCurveTo(r+l,s+d,r+l-c,s+d),"bottom"===o&&this.drawCaret(t,i),n.lineTo(r+c,s+d),n.quadraticCurveTo(r,s+d,r,s+d-c),"center"===o&&"left"===a&&this.drawCaret(t,i),n.lineTo(r,s+c),n.quadraticCurveTo(r,s,r+c,s),n.closePath(),n.fill(),0<e.borderWidth&&n.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var n={width:e.width,height:e.height},i={x:e.x,y:e.y},a=Math.abs(e.opacity<.001)?0:e.opacity,o=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&o&&(t.save(),t.globalAlpha=a,this.drawBackground(i,e,t,n),i.y+=e.yPadding,ge.rtl.overrideTextDirection(t,e.textDirection),this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),ge.rtl.restoreTextDirection(t,e.textDirection),t.restore())}},handleEvent:function(t){var e,n=this,i=n._options;return n._lastActive=n._lastActive||[],"mouseout"===t.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(t,i.mode,i),i.reverse&&n._active.reverse()),(e=!ge.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(i.enabled||i.custom)&&(n._eventPosition={x:t.x,y:t.y},n.update(!0),n.pivot())),e}}),Fn=On,Ln=Pn;Ln.positioners=Fn;var In=ge.valueOrDefault;ue._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Rn=function(t,e){return this.construct(t,e),this};ge.extend(Rn.prototype,{construct:function(t,e){var n,i,a=this;(i=(n=(n=e)||Object.create(null)).data=n.data||{}).datasets=i.datasets||[],i.labels=i.labels||[],n.options=Z(ue.global,ue[n.type],n.options||{}),e=n;var o=Mn.acquireContext(t,e),r=o&&o.canvas,s=r&&r.height,l=r&&r.width;a.id=ge.uid(),a.ctx=o,a.canvas=r,a.config=e,a.width=l,a.height=s,a.aspectRatio=s?l/s:null,a.options=e.options,a._bufferedRender=!1,a._layers=[],(a.chart=a).controller=a,Rn.instances[a.id]=a,Object.defineProperty(a,"data",{get:function(){return a.config.data},set:function(t){a.config.data=t}}),o&&r?(a.initialize(),a.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var t=this;return jn.notify(t,"beforeInit"),ge.retinaScale(t,t.options.devicePixelRatio),t.bindEvents(),t.options.responsive&&t.resize(!0),t.initToolTip(),jn.notify(t,"afterInit"),t},clear:function(){return ge.canvas.clear(this),this},stop:function(){return Te.cancelAnimation(this),this},resize:function(t){var e=this,n=e.options,i=e.canvas,a=n.maintainAspectRatio&&e.aspectRatio||null,o=Math.max(0,Math.floor(ge.getMaximumWidth(i))),r=Math.max(0,Math.floor(a?o/a:ge.getMaximumHeight(i)));if((e.width!==o||e.height!==r)&&(i.width=e.width=o,i.height=e.height=r,i.style.width=o+"px",i.style.height=r+"px",ge.retinaScale(e,n.devicePixelRatio),!t)){var s={width:o,height:r};jn.notify(e,"resize",[s]),n.onResize&&n.onResize(e,s),e.stop(),e.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var t=this.options,n=t.scales||{},e=t.scale;ge.each(n.xAxes,function(t,e){t.id||(t.id=tt(n.xAxes,"x-axis-",e))}),ge.each(n.yAxes,function(t,e){t.id||(t.id=tt(n.yAxes,"y-axis-",e))}),e&&(e.id=e.id||"scale")},buildOrUpdateScales:function(){var r=this,t=r.options,s=r.scales||{},e=[],l=Object.keys(s).reduce(function(t,e){return t[e]=!1,t},{});t.scales&&(e=e.concat((t.scales.xAxes||[]).map(function(t){return{options:t,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(t){return{options:t,dtype:"linear",dposition:"left"}}))),t.scale&&e.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ge.each(e,function(t){var e=t.options,n=e.id,i=In(e.type,t.dtype);et(e.position)!==et(t.dposition)&&(e.position=t.dposition),l[n]=!0;var a=null;if(n in s&&s[n].type===i)(a=s[n]).options=e,a.ctx=r.ctx,a.chart=r;else{var o=En.getScaleConstructor(i);if(!o)return;a=new o({id:n,type:i,options:e,ctx:r.ctx,chart:r}),s[a.id]=a}a.mergeTicksOptions(),t.isDefault&&(r.scale=a)}),ge.each(l,function(t,e){t||delete s[e]}),r.scales=s,En.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t,e,n=this,i=[],a=n.data.datasets;for(t=0,e=a.length;t<e;t++){var o=a[t],r=n.getDatasetMeta(t),s=o.type||n.config.type;if(r.type&&r.type!==s&&(n.destroyDatasetMeta(t),r=n.getDatasetMeta(t)),r.type=s,r.order=o.order||0,r.index=t,r.controller)r.controller.updateIndex(t),r.controller.linkScales();else{var l=pn[r.type];if(void 0===l)throw new Error('"'+r.type+'" is not a chart type.');r.controller=new l(n,t),i.push(r.controller)}}return i},resetElements:function(){var n=this;ge.each(n.data.datasets,function(t,e){n.getDatasetMeta(e).controller.reset()},n)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(t,e){var n,i,a=this;if(t&&"object"==typeof t||(t={duration:t,lazy:e}),K(a),jn._invalidate(a),!1!==jn.notify(a,"beforeUpdate")){a.tooltip._data=a.data;var o=a.buildOrUpdateControllers();for(n=0,i=a.data.datasets.length;n<i;n++)a.getDatasetMeta(n).controller.buildOrUpdateElements();a.updateLayout(),a.options.animation&&a.options.animation.duration&&ge.each(o,function(t){t.reset()}),a.updateDatasets(),a.tooltip.initialize(),a.lastActive=[],jn.notify(a,"afterUpdate"),a._layers.sort(nt("z","_idx")),a._bufferedRender?a._bufferedRequest={duration:t.duration,easing:t.easing,lazy:t.lazy}:a.render(t)}},updateLayout:function(){var e=this;!1!==jn.notify(e,"beforeLayout")&&(yn.update(this,this.width,this.height),e._layers=[],ge.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(t,e){t._idx=e}),jn.notify(e,"afterScaleUpdate"),jn.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==jn.notify(this,"beforeDatasetsUpdate")){for(var t=0,e=this.data.datasets.length;t<e;++t)this.updateDataset(t);jn.notify(this,"afterDatasetsUpdate")}},updateDataset:function(t){var e=this.getDatasetMeta(t),n={meta:e,index:t};!1!==jn.notify(this,"beforeDatasetUpdate",[n])&&(e.controller._update(),jn.notify(this,"afterDatasetUpdate",[n]))},render:function(t,e){var n=this;t&&"object"==typeof t||(t={duration:t,lazy:e});var i=n.options.animation,a=In(t.duration,i&&i.duration),o=t.lazy;if(!1!==jn.notify(n,"beforeRender")){var r=function(t){jn.notify(n,"afterRender"),ge.callback(i&&i.onComplete,[t],n)};if(i&&a){var s=new Se({numSteps:a/16.66,easing:t.easing||i.easing,render:function(t,e){var n=ge.easing.effects[e.easing],i=e.currentStep,a=i/e.numSteps;t.draw(n(a),a,i)},onAnimationProgress:i.onProgress,onAnimationComplete:r});Te.addAnimation(n,s,a,o)}else n.draw(),r(new Se({numSteps:0,chart:n}));return n}},draw:function(t){var e,n,i=this;if(i.clear(),ge.isNullOrUndef(t)&&(t=1),i.transition(t),!(i.width<=0||i.height<=0)&&!1!==jn.notify(i,"beforeDraw",[t])){for(n=i._layers,e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(i.chartArea);for(i.drawDatasets(t);e<n.length;++e)n[e].draw(i.chartArea);i._drawTooltip(t),jn.notify(i,"afterDraw",[t])}},transition:function(t){for(var e=0,n=(this.data.datasets||[]).length;e<n;++e)this.isDatasetVisible(e)&&this.getDatasetMeta(e).controller.transition(t);this.tooltip.transition(t)},_getSortedDatasetMetas:function(t){var e,n,i=[];for(e=0,n=(this.data.datasets||[]).length;e<n;++e)t&&!this.isDatasetVisible(e)||i.push(this.getDatasetMeta(e));return i.sort(nt("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(t){var e,n;if(!1!==jn.notify(this,"beforeDatasetsDraw",[t])){for(n=(e=this._getSortedVisibleDatasetMetas()).length-1;0<=n;--n)this.drawDataset(e[n],t);jn.notify(this,"afterDatasetsDraw",[t])}},drawDataset:function(t,e){var n={meta:t,index:t.index,easingValue:e};!1!==jn.notify(this,"beforeDatasetDraw",[n])&&(t.controller.draw(e),jn.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(t){var e=this.tooltip,n={tooltip:e,easingValue:t};!1!==jn.notify(this,"beforeTooltipDraw",[n])&&(e.draw(),jn.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(t){return mn.modes.single(this,t)},getElementsAtEvent:function(t){return mn.modes.label(this,t,{intersect:!0})},getElementsAtXAxis:function(t){return mn.modes["x-axis"](this,t,{intersect:!0})},getElementsAtEventForMode:function(t,e,n){var i=mn.modes[e];return"function"==typeof i?i(this,t,n):[]},getDatasetAtEvent:function(t){return mn.modes.dataset(this,t,{intersect:!0})},getDatasetMeta:function(t){var e=this.data.datasets[t];e._meta||(e._meta={});var n=e._meta[this.id];return n||(n=e._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e.order||0,index:t}),n},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(t){var e=this.id,n=this.data.datasets[t],i=n._meta&&n._meta[e];i&&(i.controller.destroy(),delete n._meta[e])},destroy:function(){var t,e,n=this,i=n.canvas;for(n.stop(),t=0,e=n.data.datasets.length;t<e;++t)n.destroyDatasetMeta(t);i&&(n.unbindEvents(),ge.canvas.clear(n),Mn.releaseContext(n.ctx),n.canvas=null,n.ctx=null),jn.notify(n,"destroy"),delete Rn.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new Ln({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this,n=e._listeners={},i=function(){e.eventHandler.apply(e,arguments)};ge.each(e.options.events,function(t){Mn.addEventListener(e,t,i),n[t]=i}),e.options.responsive&&(i=function(){e.resize()},Mn.addEventListener(e,"resize",i),n.resize=i)},unbindEvents:function(){var n=this,t=n._listeners;t&&(delete n._listeners,ge.each(t,function(t,e){Mn.removeEventListener(n,e,t)}))},updateHoverStyle:function(t,e,n){var i,a,o,r=n?"set":"remove";for(a=0,o=t.length;a<o;++a)(i=t[a])&&this.getDatasetMeta(i._datasetIndex).controller[r+"HoverStyle"](i);"dataset"===e&&this.getDatasetMeta(t[0]._datasetIndex).controller["_"+r+"DatasetHoverStyle"]()},eventHandler:function(t){var e=this,n=e.tooltip;if(!1!==jn.notify(e,"beforeEvent",[t])){e._bufferedRender=!0,e._bufferedRequest=null;var i=e.handleEvent(t);n&&(i=n._start?n.handleEvent(t):i|n.handleEvent(t)),jn.notify(e,"afterEvent",[t]);var a=e._bufferedRequest;return a?e.render(a):i&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e}},handleEvent:function(t){var e,n=this,i=n.options||{},a=i.hover;return n.lastActive=n.lastActive||[],"mouseout"===t.type?n.active=[]:n.active=n.getElementsAtEventForMode(t,a.mode,a),ge.callback(i.onHover||i.hover.onHover,[t["native"],n.active],n),"mouseup"!==t.type&&"click"!==t.type||i.onClick&&i.onClick.call(n,t["native"],n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,a.mode,!1),n.active.length&&a.mode&&n.updateHoverStyle(n.active,a.mode,!0),e=!ge.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,e}}),Rn.instances={};var Hn=Rn;(Rn.Controller=Rn).types={},ge.configMerge=Z,ge.scaleMerge=Q,ge.extend(at.prototype,{formats:it,parse:it,format:it,add:it,diff:it,startOf:it,endOf:it,_create:function(t){return t}}),at.override=function(t){ge.extend(at.prototype,t)};var zn={_date:at},Bn={formatters:{values:function(t){return ge.isArray(t)?t:""+t},linear:function(t,e,n){var i=3<n.length?n[2]-n[1]:n[1]-n[0];1<Math.abs(i)&&t!==Math.floor(t)&&(i=t-Math.floor(t));var a=ge.log10(Math.abs(i)),o="";if(0!==t)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var r=ge.log10(Math.abs(t)),s=Math.floor(r)-Math.floor(a);s=Math.max(Math.min(s,20),0),o=t.toExponential(s)}else{var l=-1*Math.floor(a);l=Math.max(Math.min(l,20),0),o=t.toFixed(l)}else o="0";return o},logarithmic:function(t,e,n){var i=t/Math.pow(10,Math.floor(ge.log10(t)));return 0===t?"0":1===i||2===i||5===i||0===e||e===n.length-1?t.toExponential():""}}},Wn=ge.isArray,Vn=ge.isNullOrUndef,qn=ge.valueOrDefault,Un=ge.valueAtIndexOrDefault;ue._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Bn.formatters.values,minor:{},major:{}}});var Jn=ke.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){ge.callback(this.options.beforeUpdate,[this])},update:function(t,e,n){var i,a,o,r,s,l=this,d=l.options.ticks,c=d.sampleSize;if(l.beforeUpdate(),l.maxWidth=t,l.maxHeight=e,l.margins=ge.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),r=l.buildTicks()||[],(!(r=l.afterBuildTicks(r)||r)||!r.length)&&l.ticks)for(r=[],i=0,a=l.ticks.length;i<a;++i)r.push({value:l.ticks[i],major:!1});return s=c<(l._ticks=r).length,o=l._convertTicksToLabels(s?function(t,e){for(var n=[],i=t.length/e,a=0,o=t.length;a<o;a+=i)n.push(t[Math.floor(a)]);return n}(r,c):r),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=d.display&&(d.autoSkip||"auto"===d.source)?l._autoSkip(r):r,s&&(o=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=o,l.afterUpdate(),l.minSize},_configure:function(){var t,e,n=this,i=n.options.ticks.reverse;n.isHorizontal()?(t=n.left,e=n.right):(t=n.top,e=n.bottom,i=!i),n._startPixel=t,n._endPixel=e,n._reversePixels=i,n._length=e-t},afterUpdate:function(){ge.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ge.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){ge.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ge.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ge.noop,afterDataLimits:function(){ge.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ge.callback(this.options.beforeBuildTicks,[this])},buildTicks:ge.noop,afterBuildTicks:function(t){var e=this;return Wn(t)&&t.length?ge.callback(e.options.afterBuildTicks,[e,t]):(e.ticks=ge.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,t)},beforeTickToLabelConversion:function(){ge.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){ge.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ge.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t,e,n,i,a,o,r,s=this,l=s.options,d=l.ticks,c=s.getTicks().length,u=d.minRotation||0,f=d.maxRotation,h=u;!s._isVisible()||!d.display||f<=u||c<=1||!s.isHorizontal()?s.labelRotation=u:(e=(t=s._getLabelSizes()).widest.width,n=t.highest.height-t.highest.offset,i=Math.min(s.maxWidth,s.chart.width-e),e+6>(a=l.offset?s.maxWidth/c:i/(c-1))&&(a=i/(c-(l.offset?.5:1)),o=s.maxHeight-st(l.gridLines)-d.padding-lt(l.scaleLabel),r=Math.sqrt(e*e+n*n),h=ge.toDegrees(Math.min(Math.asin(Math.min((t.highest.height+6)/a,1)),Math.asin(Math.min(o/r,1))-Math.asin(n/r))),h=Math.max(u,Math.min(f,h))),s.labelRotation=h)},afterCalculateTickRotation:function(){ge.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ge.callback(this.options.beforeFit,[this])},fit:function(){var t=this,e=t.minSize={width:0,height:0},n=t.chart,i=t.options,a=i.ticks,o=i.scaleLabel,r=i.gridLines,s=t._isVisible(),l="bottom"===i.position,d=t.isHorizontal();if(d?e.width=t.maxWidth:s&&(e.width=st(r)+lt(o)),d?s&&(e.height=st(r)+lt(o)):e.height=t.maxHeight,a.display&&s){var c=ct(a),u=t._getLabelSizes(),f=u.first,h=u.last,p=u.widest,m=u.highest,g=.4*c.minor.lineHeight,v=a.padding;if(d){var y=0!==t.labelRotation,b=ge.toRadians(t.labelRotation),x=Math.cos(b),w=Math.sin(b),$=w*p.width+x*(m.height-(y?m.offset:0))+(y?0:g);e.height=Math.min(t.maxHeight,e.height+$+v);var k,_,S=t.getPixelForTick(0)-t.left,T=t.right-t.getPixelForTick(t.getTicks().length-1);y?(k=l?x*f.width+w*f.offset:w*(f.height-f.offset),_=l?w*(h.height-h.offset):x*h.width+w*h.offset):(k=f.width/2,_=h.width/2),t.paddingLeft=Math.max((k-S)*t.width/(t.width-S),0)+3,t.paddingRight=Math.max((_-T)*t.width/(t.width-T),0)+3}else{var C=a.mirror?0:p.width+v+g;e.width=Math.min(t.maxWidth,e.width+C),t.paddingTop=f.height/2,t.paddingBottom=h.height/2}}t.handleMargins(),d?(t.width=t._length=n.width-t.margins.left-t.margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t.margins.top-t.margins.bottom)},handleMargins:function(){var t=this;t.margins&&(t.margins.left=Math.max(t.paddingLeft,t.margins.left),t.margins.top=Math.max(t.paddingTop,t.margins.top),t.margins.right=Math.max(t.paddingRight,t.margins.right),t.margins.bottom=Math.max(t.paddingBottom,t.margins.bottom))},afterFit:function(){ge.callback(this.options.afterFit,[this])},isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(Vn(t))return NaN;if(("number"==typeof t||t instanceof Number)&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},_convertTicksToLabels:function(t){var e,n,i,a=this;for(a.ticks=t.map(function(t){return t.value}),a.beforeTickToLabelConversion(),e=a.convertTicksToLabels(t)||a.ticks,a.afterTickToLabelConversion(),n=0,i=t.length;n<i;++n)t[n].label=e[n];return e},_getLabelSizes:function(){var t=this,e=t._labelSizes;return e||(t._labelSizes=e=rt(t.ctx,ct(t.options.ticks),t.getTicks(),t.longestTextCache),t.longestLabelWidth=e.widest.width),e},_parseValue:function(t){var e,n,i,a;return Wn(t)?(e=+this.getRightValue(t[0]),n=+this.getRightValue(t[1]),i=Math.min(e,n),
a=Math.max(e,n)):(e=void 0,n=t=+this.getRightValue(t),a=i=t),{min:i,max:a,start:e,end:n}},_getScaleLabel:function(t){var e=this._parseValue(t);return void 0!==e.start?"["+e.start+", "+e.end+"]":+this.getRightValue(t)},getLabelForIndex:ge.noop,getPixelForValue:ge.noop,getValueForPixel:ge.noop,getPixelForTick:function(t){var e=this.options.offset,n=this._ticks.length,i=1/Math.max(n-(e?0:1),1);return t<0||n-1<t?null:this.getPixelForDecimal(t*i+(e?i/2:0))},getPixelForDecimal:function(t){return this._reversePixels&&(t=1-t),this._startPixel+t*this._length},getDecimalForPixel:function(t){var e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,e=this.max;return this.beginAtZero?0:t<0&&e<0?e:0<t&&0<e?t:0},_autoSkip:function(t){var e,n,i,a,o=this.options.ticks,r=this._length,s=o.maxTicksLimit||r/this._tickSize()+1,c=o.major.enabled?function(t){var e,n,i=[];for(e=0,n=t.length;e<n;e++)t[e].major&&i.push(e);return i}(t):[],l=c.length,d=c[0],u=c[l-1];if(s<l)return function(t,e,n){var i,a,o=0,r=e[0];for(n=Math.ceil(n),i=0;i<t.length;i++)a=t[i],i===r?(a._index=i,r=e[++o*n]):delete a.label}(t,c,l/s),ut(t);if(i=function(t,e,n,i){var a,o,r,s,l=function(t){var e,n,i=t.length;if(i<2)return!1;for(n=t[0],e=1;e<i;++e)if(t[e]-t[e-1]!==n)return!1;return n}(c),d=(e.length-1)/i;if(!l)return Math.max(d,1);for(r=0,s=(a=ge.math._factorize(l)).length-1;r<s;r++)if((o=a[r])>d)return o;return Math.max(d,1)}(0,t,0,s),0<l){for(e=0,n=l-1;e<n;e++)ft(t,i,c[e],c[e+1]);return a=1<l?(u-d)/(l-1):null,ft(t,i,ge.isNullOrUndef(a)?0:d-a,d),ft(t,i,u,ge.isNullOrUndef(a)?t.length:u+a),ut(t)}return ft(t,i),ut(t)},_tickSize:function(){var t=this.options.ticks,e=ge.toRadians(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),a=this._getLabelSizes(),o=t.autoSkipPadding||0,r=a?a.widest.width+o:0,s=a?a.highest.height+o:0;return this.isHorizontal()?r*i<s*n?r/n:s/i:s*i<r*n?s/n:r/i},_isVisible:function(){var t,e,n,i=this.chart,a=this.options.display;if("auto"!==a)return!!a;for(t=0,e=i.data.datasets.length;t<e;++t)if(i.isDatasetVisible(t)&&((n=i.getDatasetMeta(t)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(t){var e,n,i,a,o,r,s,l,d,c,u,f,h,p,m,g,v,y=this,b=y.chart,x=y.options,w=x.gridLines,$=x.position,k=w.offsetGridLines,_=y.isHorizontal(),S=y._ticksToDraw,T=S.length+(k?1:0),C=st(w),A=[],M=w.drawBorder?Un(w.lineWidth,0,0):0,j=M/2,E=ge._alignPixel,D=function(t){return E(b,t,M)};for("top"===$?(e=D(y.bottom),s=y.bottom-C,d=e-j,u=D(t.top)+j,h=t.bottom):"bottom"===$?(e=D(y.top),u=t.top,h=D(t.bottom)-j,s=e+j,d=y.top+C):"left"===$?(e=D(y.right),r=y.right-C,l=e-j,c=D(t.left)+j,f=t.right):(e=D(y.left),c=t.left,f=D(t.right)-j,r=e+j,l=y.left+C),n=0;n<T;++n)i=S[n]||{},Vn(i.label)&&n<S.length||(n===y.zeroLineIndex&&x.offset===k?(p=w.zeroLineWidth,m=w.zeroLineColor,g=w.zeroLineBorderDash||[],v=w.zeroLineBorderDashOffset||0):(p=Un(w.lineWidth,n,1),m=Un(w.color,n,"rgba(0,0,0,0.1)"),g=w.borderDash||[],v=w.borderDashOffset||0),void 0!==(a=ot(y,i._index||n,k))&&(o=E(b,a,p),_?r=l=c=f=o:s=d=u=h=o,A.push({tx1:r,ty1:s,tx2:l,ty2:d,x1:c,y1:u,x2:f,y2:h,width:p,color:m,borderDash:g,borderDashOffset:v})));return A.ticksLength=T,A.borderValue=e,A},_computeLabelItems:function(){var t,e,n,i,a,o,r,s,l,d,c,u,f=this,h=f.options,p=h.ticks,m=h.position,g=p.mirror,v=f.isHorizontal(),y=f._ticksToDraw,b=ct(p),x=p.padding,w=st(h.gridLines),$=-ge.toRadians(f.labelRotation),k=[];for("top"===m?(o=f.bottom-w-x,r=$?"left":"center"):"bottom"===m?(o=f.top+w+x,r=$?"right":"center"):"left"===m?(a=f.right-(g?0:w)-x,r=g?"left":"right"):(a=f.left+(g?0:w)+x,r=g?"right":"left"),t=0,e=y.length;t<e;++t)i=(n=y[t]).label,Vn(i)||(s=f.getPixelForTick(n._index||t)+p.labelOffset,d=(l=n.major?b.major:b.minor).lineHeight,c=Wn(i)?i.length:1,v?(a=s,u="top"===m?(($?1:.5)-c)*d:($?0:.5)*d):(o=s,u=(1-c)*d/2),k.push({x:a,y:o,rotation:$,label:i,font:l,textOffset:u,textAlign:r}));return k},_drawGrid:function(t){var e=this,n=e.options.gridLines;if(n.display){var i,a,o,r,s,l=e.ctx,d=e.chart,c=ge._alignPixel,u=n.drawBorder?Un(n.lineWidth,0,0):0,f=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));for(o=0,r=f.length;o<r;++o)i=(s=f[o]).width,a=s.color,i&&a&&(l.save(),l.lineWidth=i,l.strokeStyle=a,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(u){var h,p,m,g,v=u,y=Un(n.lineWidth,f.ticksLength-1,1),b=f.borderValue;e.isHorizontal()?(h=c(d,e.left,v)-v/2,p=c(d,e.right,y)+y/2,m=g=b):(m=c(d,e.top,v)-v/2,g=c(d,e.bottom,y)+y/2,h=p=b),l.lineWidth=u,l.strokeStyle=Un(n.color,0),l.beginPath(),l.moveTo(h,m),l.lineTo(p,g),l.stroke()}}},_drawLabels:function(){var t=this;if(t.options.ticks.display){var e,n,i,a,o,r,s,l,d=t.ctx,c=t._labelItems||(t._labelItems=t._computeLabelItems());for(e=0,i=c.length;e<i;++e){if(r=(o=c[e]).font,d.save(),d.translate(o.x,o.y),d.rotate(o.rotation),d.font=r.string,d.fillStyle=r.color,d.textBaseline="middle",d.textAlign=o.textAlign,s=o.label,l=o.textOffset,Wn(s))for(n=0,a=s.length;n<a;++n)d.fillText(""+s[n],0,l),l+=r.lineHeight;else d.fillText(s,0,l);d.restore()}}},_drawTitle:function(){var t=this,e=t.ctx,n=t.options,i=n.scaleLabel;if(i.display){var a,o,r=qn(i.fontColor,ue.global.defaultFontColor),s=ge.options._parseFont(i),l=ge.options.toPadding(i.padding),d=s.lineHeight/2,c=n.position,u=0;if(t.isHorizontal())a=t.left+t.width/2,o="bottom"===c?t.bottom-d-l.bottom:t.top+d+l.top;else{var f="left"===c;a=f?t.left+d+l.top:t.right-d-l.top,o=t.top+t.height/2,u=f?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(a,o),e.rotate(u),e.textAlign="center",e.textBaseline="middle",e.fillStyle=r,e.font=s.string,e.fillText(i.labelString,0,0),e.restore()}},draw:function(t){this._isVisible()&&(this._drawGrid(t),this._drawTitle(),this._drawLabels())},_layers:function(){var t=this,e=t.options,n=e.ticks&&e.ticks.z||0,i=e.gridLines&&e.gridLines.z||0;return t._isVisible()&&n!==i&&t.draw===t._draw?[{z:i,draw:function(){t._drawGrid.apply(t,arguments),t._drawTitle.apply(t,arguments)}},{z:n,draw:function(){t._drawLabels.apply(t,arguments)}}]:[{z:n,draw:function(){t.draw.apply(t,arguments)}}]},_getMatchingVisibleMetas:function(e){var n=this,i=n.isHorizontal();return n.chart._getSortedVisibleDatasetMetas().filter(function(t){return(!e||t.type===e)&&(i?t.xAxisID===n.id:t.yAxisID===n.id)})}});Jn.prototype._draw=Jn.prototype.draw;var Xn=Jn,Yn=ge.isNullOrUndef,Gn=Xn.extend({determineDataLimits:function(){var t,e=this,n=e._getLabels(),i=e.options.ticks,a=i.min,o=i.max,r=0,s=n.length-1;void 0!==a&&0<=(t=n.indexOf(a))&&(r=t),void 0!==o&&0<=(t=n.indexOf(o))&&(s=t),e.minIndex=r,e.maxIndex=s,e.min=n[r],e.max=n[s]},buildTicks:function(){var t=this._getLabels(),e=this.minIndex,n=this.maxIndex;this.ticks=0===e&&n===t.length-1?t:t.slice(e,n+1)},getLabelForIndex:function(t,e){var n=this.chart;return n.getDatasetMeta(e).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[e].data[t]):this._getLabels()[t]},_configure:function(){var t=this,e=t.options.offset,n=t.ticks;Xn.prototype._configure.call(t),t.isHorizontal()||(t._reversePixels=!t._reversePixels),n&&(t._startValue=t.minIndex-(e?.5:0),t._valueRange=Math.max(n.length-(e?0:1),1))},getPixelForValue:function(t,e,n){var i,a,o,r=this;return Yn(e)||Yn(n)||(t=r.chart.data.datasets[n].data[e]),Yn(t)||(i=r.isHorizontal()?t.x:t.y),(void 0!==i||void 0!==t&&isNaN(e))&&(a=r._getLabels(),t=ge.valueOrDefault(i,t),e=-1!==(o=a.indexOf(t))?o:e,isNaN(e)&&(e=t)),r.getPixelForDecimal((e-r._startValue)/r._valueRange)},getPixelForTick:function(t){var e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t],t+this.minIndex)},getValueForPixel:function(t){var e=Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange);return Math.min(Math.max(e,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Qn={position:"bottom"};Gn._defaults=Qn;var Zn=ge.noop,Kn=ge.isNullOrUndef,ti=Xn.extend({getRightValue:function(t){return"string"==typeof t?+t:Xn.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;if(e.beginAtZero){var n=ge.sign(t.min),i=ge.sign(t.max);n<0&&i<0?t.max=0:0<n&&0<i&&(t.min=0)}var a=void 0!==e.min||void 0!==e.suggestedMin,o=void 0!==e.max||void 0!==e.suggestedMax;void 0!==e.min?t.min=e.min:void 0!==e.suggestedMin&&(null===t.min?t.min=e.suggestedMin:t.min=Math.min(t.min,e.suggestedMin)),void 0!==e.max?t.max=e.max:void 0!==e.suggestedMax&&(null===t.max?t.max=e.suggestedMax:t.max=Math.max(t.max,e.suggestedMax)),a!==o&&t.min>=t.max&&(a?t.max=t.min+1:t.min=t.max-1),t.min===t.max&&(t.max++,e.beginAtZero||t.min--)},getTickLimit:function(){var t,e=this.options.ticks,n=e.stepSize,i=e.maxTicksLimit;return n?t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(t=this._computeTickLimit(),i=i||11),i&&(t=Math.min(i,t)),t},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Zn,buildTicks:function(){var t=this,e=t.options.ticks,n=t.getTickLimit(),i={maxTicks:n=Math.max(2,n),min:e.min,max:e.max,precision:e.precision,stepSize:ge.valueOrDefault(e.fixedStepSize,e.stepSize)},a=t.ticks=function(t,e){var n,i,a,o,r=[],s=t.stepSize,l=s||1,d=t.maxTicks-1,c=t.min,u=t.max,f=t.precision,h=e.min,p=e.max,m=ge.niceNum((p-h)/d/l)*l;if(m<1e-14&&Kn(c)&&Kn(u))return[h,p];(o=Math.ceil(p/m)-Math.floor(h/m))>d&&(m=ge.niceNum(o*m/d/l)*l),s||Kn(f)?n=Math.pow(10,ge._decimalPlaces(m)):(n=Math.pow(10,f),m=Math.ceil(m*n)/n),i=Math.floor(h/m)*m,a=Math.ceil(p/m)*m,s&&(!Kn(c)&&ge.almostWhole(c/m,m/1e3)&&(i=c),!Kn(u)&&ge.almostWhole(u/m,m/1e3)&&(a=u)),o=(a-i)/m,o=ge.almostEquals(o,Math.round(o),m/1e3)?Math.round(o):Math.ceil(o),i=Math.round(i*n)/n,a=Math.round(a*n)/n,r.push(Kn(c)?i:c);for(var g=1;g<o;++g)r.push(Math.round((i+g*m)*n)/n);return r.push(Kn(u)?a:u),r}(i,t);t.handleDirectionalChanges(),t.max=ge.max(a),t.min=ge.min(a),e.reverse?(a.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),Xn.prototype.convertTicksToLabels.call(t)},_configure:function(){var t,e=this,n=e.getTicks(),i=e.min,a=e.max;Xn.prototype._configure.call(e),e.options.offset&&n.length&&(i-=t=(a-i)/Math.max(n.length-1,1)/2,a+=t),e._startValue=i,e._endValue=a,e._valueRange=a-i}}),ei={position:"left",ticks:{callback:Bn.formatters.linear}},ni=ti.extend({determineDataLimits:function(){var t,e,n,i,a=this,o=a.options,r=a.chart.data.datasets,s=a._getMatchingVisibleMetas(),l=o.stacked,d={},c=s.length;if(a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,void 0===l)for(t=0;!l&&t<c;++t)l=void 0!==(e=s[t]).stack;for(t=0;t<c;++t)n=r[(e=s[t]).index].data,l?ht(a,d,e,n):pt(a,e,n);ge.each(d,function(t){i=t.pos.concat(t.neg),a.min=Math.min(a.min,ge.min(i)),a.max=Math.max(a.max,ge.max(i))}),a.min=ge.isFinite(a.min)&&!isNaN(a.min)?a.min:0,a.max=ge.isFinite(a.max)&&!isNaN(a.max)?a.max:1,a.handleTickRangeOptions()},_computeTickLimit:function(){var t;return this.isHorizontal()?Math.ceil(this.width/40):(t=ge.options._parseFont(this.options.ticks),Math.ceil(this.height/t.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){return this.getPixelForDecimal((+this.getRightValue(t)-this._startValue)/this._valueRange)},getValueForPixel:function(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange},getPixelForTick:function(t){var e=this.ticksAsNumbers;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])}}),ii=ei;ni._defaults=ii;var ai=ge.valueOrDefault,oi=ge.math.log10,ri={position:"left",ticks:{callback:Bn.formatters.logarithmic}},si=Xn.extend({determineDataLimits:function(){function t(t){return u?t.xAxisID===s.id:t.yAxisID===s.id}var e,n,i,a,o,r,s=this,l=s.options,d=s.chart,c=d.data.datasets,u=s.isHorizontal();s.min=Number.POSITIVE_INFINITY,s.max=Number.NEGATIVE_INFINITY,s.minNotZero=Number.POSITIVE_INFINITY;var f=l.stacked;if(void 0===f)for(e=0;e<c.length;e++)if(n=d.getDatasetMeta(e),d.isDatasetVisible(e)&&t(n)&&void 0!==n.stack){f=!0;break}if(l.stacked||f){var h={};for(e=0;e<c.length;e++){var p=[(n=d.getDatasetMeta(e)).type,void 0===l.stacked&&void 0===n.stack?e:"",n.stack].join(".");if(d.isDatasetVisible(e)&&t(n))for(void 0===h[p]&&(h[p]=[]),o=0,r=(a=c[e].data).length;o<r;o++){var m=h[p];i=s._parseValue(a[o]),isNaN(i.min)||isNaN(i.max)||n.data[o].hidden||i.min<0||i.max<0||(m[o]=m[o]||0,m[o]+=i.max)}}ge.each(h,function(t){if(0<t.length){var e=ge.min(t),n=ge.max(t);s.min=Math.min(s.min,e),s.max=Math.max(s.max,n)}})}else for(e=0;e<c.length;e++)if(n=d.getDatasetMeta(e),d.isDatasetVisible(e)&&t(n))for(o=0,r=(a=c[e].data).length;o<r;o++)i=s._parseValue(a[o]),isNaN(i.min)||isNaN(i.max)||n.data[o].hidden||i.min<0||i.max<0||(s.min=Math.min(i.min,s.min),s.max=Math.max(i.max,s.max),0!==i.min&&(s.minNotZero=Math.min(i.min,s.minNotZero)));s.min=ge.isFinite(s.min)?s.min:null,s.max=ge.isFinite(s.max)?s.max:null,s.minNotZero=ge.isFinite(s.minNotZero)?s.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var t=this,e=t.options.ticks;t.min=mt(e.min,t.min),t.max=mt(e.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(oi(t.min))-1),t.max=Math.pow(10,Math.floor(oi(t.max))+1)):(t.min=1,t.max=10)),null===t.min&&(t.min=Math.pow(10,Math.floor(oi(t.max))-1)),null===t.max&&(t.max=0!==t.min?Math.pow(10,Math.floor(oi(t.min))+1):10),null===t.minNotZero&&(0<t.min?t.minNotZero=t.min:t.max<1?t.minNotZero=Math.pow(10,Math.floor(oi(t.max))):t.minNotZero=1)},buildTicks:function(){var t=this,e=t.options.ticks,n=!t.isHorizontal(),i={min:mt(e.min),max:mt(e.max)},a=t.ticks=function(t,e){var n,i,a=[],o=ai(t.min,Math.pow(10,Math.floor(oi(e.min)))),r=Math.floor(oi(e.max)),s=Math.ceil(e.max/Math.pow(10,r));0===o?(n=Math.floor(oi(e.minNotZero)),i=Math.floor(e.minNotZero/Math.pow(10,n)),a.push(o),o=i*Math.pow(10,n)):(n=Math.floor(oi(o)),i=Math.floor(o/Math.pow(10,n)));for(var l=n<0?Math.pow(10,Math.abs(n)):1;a.push(o),10==++i&&(i=1,l=0<=++n?1:l),o=Math.round(i*Math.pow(10,n)*l)/l,n<r||n===r&&i<s;);var d=ai(t.max,o);return a.push(d),a}(i,t);t.max=ge.max(a),t.min=ge.min(a),e.reverse?(n=!n,t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n&&a.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Xn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return this._getScaleLabel(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){var e=this.tickValues;return t<0||t>e.length-1?null:this.getPixelForValue(e[t])},_getFirstTickValue:function(t){var e=Math.floor(oi(t));return Math.floor(t/Math.pow(10,e))*Math.pow(10,e)},_configure:function(){var t=this,e=t.min,n=0;Xn.prototype._configure.call(t),0===e&&(e=t._getFirstTickValue(t.minNotZero),n=ai(t.options.ticks.fontSize,ue.global.defaultFontSize)/t._length),t._startValue=oi(e),t._valueOffset=n,t._valueRange=(oi(t.max)-oi(e))/(1-n)},getPixelForValue:function(t){var e=this,n=0;return(t=+e.getRightValue(t))>e.min&&0<t&&(n=(oi(t)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(n)},getValueForPixel:function(t){var e=this,n=e.getDecimalForPixel(t);return 0===n&&0===e.min?0:Math.pow(10,e._startValue+(n-e._valueOffset)*e._valueRange)}}),li=ri;si._defaults=li;var di=ge.valueOrDefault,ci=ge.valueAtIndexOrDefault,ui=ge.options.resolve,fi={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Bn.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(t){return t}}},hi=ti.extend({setDimensions:function(){var t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=gt(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2},determineDataLimits:function(){var a=this,n=a.chart,o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;ge.each(n.data.datasets,function(t,e){if(n.isDatasetVisible(e)){var i=n.getDatasetMeta(e);ge.each(t.data,function(t,e){var n=+a.getRightValue(t);isNaN(n)||i.data[e].hidden||(o=Math.min(n,o),r=Math.max(n,r))})}}),a.min=o===Number.POSITIVE_INFINITY?0:o,a.max=r===Number.NEGATIVE_INFINITY?0:r,a.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gt(this.options))},convertTicksToLabels:function(){var e=this;ti.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=ge.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t=this.options;t.display&&t.pointLabels.display?function(t){var e,n,i,a=ge.options._parseFont(t.options.pointLabels),o={l:0,r:t.width,t:0,b:t.height-t.paddingTop},r={};t.ctx.font=a.string,t._pointLabelSizes=[];var s,l,d,c=t.chart.data.labels.length;for(e=0;e<c;e++){i=t.getPointPosition(e,t.drawingArea+5),s=t.ctx,l=a.lineHeight,d=t.pointLabels[e],n=ge.isArray(d)?{w:ge.longestText(s,s.font,d),h:d.length*l}:{w:s.measureText(d).width,h:l},t._pointLabelSizes[e]=n;var u=t.getIndexAngle(e),f=ge.toDegrees(u)%360,h=vt(f,i.x,n.w,0,180),p=vt(f,i.y,n.h,90,270);h.start<o.l&&(o.l=h.start,r.l=u),h.end>o.r&&(o.r=h.end,r.r=u),p.start<o.t&&(o.t=p.start,r.t=u),p.end>o.b&&(o.b=p.end,r.b=u)}t.setReductions(t.drawingArea,o,r)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(t,e,n){var i=this,a=e.l/Math.sin(n.l),o=Math.max(e.r-i.width,0)/Math.sin(n.r),r=-e.t/Math.cos(n.t),s=-Math.max(e.b-(i.height-i.paddingTop),0)/Math.cos(n.b);a=wt(a),o=wt(o),r=wt(r),s=wt(s),i.drawingArea=Math.min(Math.floor(t-(a+o)/2),Math.floor(t-(r+s)/2)),i.setCenterPoint(a,o,r,s)},setCenterPoint:function(t,e,n,i){var a=this,o=a.width-e-a.drawingArea,r=t+a.drawingArea,s=n+a.drawingArea,l=a.height-a.paddingTop-i-a.drawingArea;a.xCenter=Math.floor((r+o)/2+a.left),a.yCenter=Math.floor((s+l)/2+a.top+a.paddingTop)},getIndexAngle:function(t){var e=this.chart,n=(t*(360/e.data.labels.length)+((e.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(t){var e=this;if(ge.isNullOrUndef(t))return NaN;var n=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this.getIndexAngle(t)-Math.PI/2;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(t){var e=this.min,n=this.max;return this.getPointPositionForValue(t||0,this.beginAtZero?0:e<0&&n<0?n:0<e&&0<n?e:0)},_drawGrid:function(){var t,n,e,i=this,a=i.ctx,o=i.options,r=o.gridLines,s=o.angleLines,l=di(s.lineWidth,r.lineWidth),d=di(s.color,r.color);if(o.pointLabels.display&&function(t){var e=t.ctx,n=t.options,i=n.pointLabels,a=gt(n),o=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),r=ge.options._parseFont(i);e.save(),e.font=r.string,e.textBaseline="middle";for(var s=t.chart.data.labels.length-1;0<=s;s--){var l=0===s?a/2:0,d=t.getPointPosition(s,o+l+5),c=ci(i.fontColor,s,ue.global.defaultFontColor);e.fillStyle=c;var u=t.getIndexAngle(s),f=ge.toDegrees(u);e.textAlign=yt(f),xt(f,t._pointLabelSizes[s],d),bt(e,t.pointLabels[s],d,r.lineHeight)}e.restore()}(i),r.display&&ge.each(i.ticks,function(t,e){0!==e&&(n=i.getDistanceFromCenterForValue(i.ticksAsNumbers[e]),function(t,e,n,i){var a,o=t.ctx,r=e.circular,s=t.chart.data.labels.length,l=ci(e.color,i-1),d=ci(e.lineWidth,i-1);if((r||s)&&l&&d){if(o.save(),o.strokeStyle=l,o.lineWidth=d,o.setLineDash&&(o.setLineDash(e.borderDash||[]),o.lineDashOffset=e.borderDashOffset||0),o.beginPath(),r)o.arc(t.xCenter,t.yCenter,n,0,2*Math.PI);else{a=t.getPointPosition(0,n),o.moveTo(a.x,a.y);for(var c=1;c<s;c++)a=t.getPointPosition(c,n),o.lineTo(a.x,a.y)}o.closePath(),o.stroke(),o.restore()}}(i,r,n,e))}),s.display&&l&&d){for(a.save(),a.lineWidth=l,a.strokeStyle=d,a.setLineDash&&(a.setLineDash(ui([s.borderDash,r.borderDash,[]])),a.lineDashOffset=ui([s.borderDashOffset,r.borderDashOffset,0])),t=i.chart.data.labels.length-1;0<=t;t--)n=i.getDistanceFromCenterForValue(o.ticks.reverse?i.min:i.max),e=i.getPointPosition(t,n),a.beginPath(),a.moveTo(i.xCenter,i.yCenter),a.lineTo(e.x,e.y),a.stroke();a.restore()}},_drawLabels:function(){var n=this,i=n.ctx,a=n.options.ticks;if(a.display){var o,r,t=n.getIndexAngle(0),s=ge.options._parseFont(a),l=di(a.fontColor,ue.global.defaultFontColor);i.save(),i.font=s.string,i.translate(n.xCenter,n.yCenter),i.rotate(t),i.textAlign="center",i.textBaseline="middle",ge.each(n.ticks,function(t,e){(0!==e||a.reverse)&&(o=n.getDistanceFromCenterForValue(n.ticksAsNumbers[e]),a.showLabelBackdrop&&(r=i.measureText(t).width,i.fillStyle=a.backdropColor,i.fillRect(-r/2-a.backdropPaddingX,-o-s.size/2-a.backdropPaddingY,r+2*a.backdropPaddingX,s.size+2*a.backdropPaddingY)),i.fillStyle=l,i.fillText(t,0,-o))}),i.restore()}},_drawTitle:ge.noop}),pi=fi;hi._defaults=pi;var mi=ge._deprecated,gi=ge.options.resolve,vi=ge.valueOrDefault,yi=Number.MIN_SAFE_INTEGER||-9007199254740991,bi=Number.MAX_SAFE_INTEGER||9007199254740991,xi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wi=Object.keys(xi),$i=Xn.extend({initialize:function(){this.mergeTicksOptions(),Xn.prototype.initialize.call(this)},update:function(){var t=this,e=t.options,n=e.time||(e.time={}),i=t._adapter=new zn._date(e.adapters.date);return mi("time scale",n.format,"time.format","time.parser"),mi("time scale",n.min,"time.min","ticks.min"),mi("time scale",n.max,"time.max","ticks.max"),ge.mergeIf(n.displayFormats,i.formats()),Xn.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),Xn.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var t,e,n,i,a,o,r,s=this,l=s.chart,d=s._adapter,c=s.options,u=c.time.unit||"day",f=bi,h=yi,p=[],m=[],g=[],v=s._getLabels();for(t=0,n=v.length;t<n;++t)g.push(Ct(s,v[t]));for(t=0,n=(l.data.datasets||[]).length;t<n;++t)if(l.isDatasetVisible(t))if(a=l.data.datasets[t].data,ge.isObject(a[0]))for(m[t]=[],e=0,i=a.length;e<i;++e)o=Ct(s,a[e]),p.push(o),m[t][e]=o;else m[t]=g.slice(0),r||(p=p.concat(g),r=!0);else m[t]=[];g.length&&(f=Math.min(f,g[0]),h=Math.max(h,g[g.length-1])),p.length&&(p=1<n?function(t){var e,n,i,a={},o=[];for(e=0,n=t.length;e<n;++e)a[i=t[e]]||(a[i]=!0,o.push(i));return o}(p).sort($t):p.sort($t),f=Math.min(f,p[0]),h=Math.max(h,p[p.length-1])),f=Ct(s,kt(c))||f,h=Ct(s,_t(c))||h,f=f===bi?+d.startOf(Date.now(),u):f,h=h===yi?+d.endOf(Date.now(),u)+1:h,s.min=Math.min(f,h),s.max=Math.max(f+1,h),s._table=[],s._timestamps={data:p,datasets:m,labels:g}},buildTicks:function(){var t,e,n,i,a,o,r,s,l,d=this,c=d.min,u=d.max,f=d.options,h=f.ticks,p=f.time,m=d._timestamps,g=[],v=d.getLabelCapacity(c),y=h.source,b=f.distribution;for(m="data"===y||"auto"===y&&"series"===b?m.data:"labels"===y?m.labels:function(t,e,n,i){var a,o=t._adapter,r=t.options,s=r.time,l=s.unit||At(s.minUnit,e,n,i),d=gi([s.stepSize,s.unitStepSize,1]),c="week"===l&&s.isoWeekday,u=e,f=[];if(c&&(u=+o.startOf(u,"isoWeek",c)),u=+o.startOf(u,c?"day":l),o.diff(n,e,l)>1e5*d)throw e+" and "+n+" are too far apart with stepSize of "+d+" "+l;for(a=u;a<n;a=+o.add(a,d,l))f.push(a);return a!==n&&"ticks"!==r.bounds||f.push(a),f}(d,c,u,v),"ticks"===f.bounds&&m.length&&(c=m[0],u=m[m.length-1]),c=Ct(d,kt(f))||c,u=Ct(d,_t(f))||u,t=0,e=m.length;t<e;++t)(n=m[t])>=c&&n<=u&&g.push(n);return d.min=c,d.max=u,d._unit=p.unit||(h.autoSkip?At(p.minUnit,d.min,d.max,v):function(t,e,n,i,a){var o,r;for(o=wi.length-1;o>=wi.indexOf(n);o--)if(r=wi[o],xi[r].common&&t._adapter.diff(a,i,r)>=e-1)return r;return wi[n?wi.indexOf(n):0]}(d,g.length,p.minUnit,d.min,d.max)),d._majorUnit=h.major.enabled&&"year"!==d._unit?function(t){for(var e=wi.indexOf(t)+1,n=wi.length;e<n;++e)if(xi[wi[e]].common)return wi[e]}(d._unit):void 0,d._table=function(t,e,n){if("linear"===b||!t.length)return[{time:e,pos:0},{time:n,pos:1}];var i,a,o,r,s,l=[],d=[e];for(i=0,a=t.length;i<a;++i)(r=t[i])>e&&r<n&&d.push(r);for(d.push(n),i=0,a=d.length;i<a;++i)s=d[i+1],o=d[i-1],r=d[i],void 0!==o&&void 0!==s&&Math.round((s+o)/2)===r||l.push({time:r,pos:i/(a-1)});return l}(d._timestamps.data,c,u),d._offsets=(i=d._table,a=g,l=s=0,f.offset&&a.length&&(o=St(i,"time",a[0],"pos"),s=1===a.length?1-o:(St(i,"time",a[1],"pos")-o)/2,r=St(i,"time",a[a.length-1],"pos"),l=1===a.length?r:(r-St(i,"time",a[a.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}),h.reverse&&g.reverse(),Mt(d,g,d._majorUnit)},getLabelForIndex:function(t,e){var n=this,i=n._adapter,a=n.chart.data,o=n.options.time,r=a.labels&&t<a.labels.length?a.labels[t]:"",s=a.datasets[e].data[t];return ge.isObject(s)&&(r=n.getRightValue(s)),o.tooltipFormat?i.format(Tt(n,r),o.tooltipFormat):"string"==typeof r?r:i.format(Tt(n,r),o.displayFormats.datetime)},tickFormatFunction:function(t,e,n,i){var a=this._adapter,o=this.options,r=o.time.displayFormats,s=r[this._unit],l=this._majorUnit,d=r[l],c=n[e],u=o.ticks,f=l&&d&&c&&c.major,h=a.format(t,i||(f?d:s)),p=f?u.major:u.minor,m=gi([p.callback,p.userCallback,u.callback,u.userCallback]);return m?m(h,e,n):h},convertTicksToLabels:function(t){var e,n,i=[];for(e=0,n=t.length;e<n;++e)i.push(this.tickFormatFunction(t[e].value,e,t));return i},getPixelForOffset:function(t){var e=this._offsets,n=St(this._table,"time",t,"pos");return this.getPixelForDecimal((e.start+n)*e.factor)},getPixelForValue:function(t,e,n){var i=null;if(void 0!==e&&void 0!==n&&(i=this._timestamps.datasets[n][e]),null===i&&(i=Ct(this,t)),null!==i)return this.getPixelForOffset(i)},getPixelForTick:function(t){var e=this.getTicks();return 0<=t&&t<e.length?this.getPixelForOffset(e[t].value):null},getValueForPixel:function(t){var e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end,i=St(this._table,"pos",n,"time");return this._adapter._create(i)},_getLabelSize:function(t){var e=this.options.ticks,n=this.ctx.measureText(t).width,i=ge.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(i),o=Math.sin(i),r=vi(e.fontSize,ue.global.defaultFontSize);return{w:n*a+r*o,h:n*o+r*a}},getLabelWidth:function(t){return this._getLabelSize(t).w},getLabelCapacity:function(t){var e=this,n=e.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,o=e.tickFormatFunction(t,0,Mt(e,[t],e._majorUnit),a),r=e._getLabelSize(o),s=Math.floor(e.isHorizontal()?e.width/r.w:e.height/r.h);return e.options.offset&&s--,0<s?s:1}}),ki={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};$i._defaults=ki;var _i={category:Gn,linear:ni,logarithmic:si,radialLinear:hi,time:$i},Si={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};zn._date.override("function"==typeof i?{_id:"moment",formats:function(){return Si},parse:function(t,e){return"string"==typeof t&&"string"==typeof e?t=i(t,e):t instanceof i||(t=i(t)),t.isValid()?t.valueOf():null},format:function(t,e){return i(t).format(e)},add:function(t,e,n){return i(t).add(e,n).valueOf()},diff:function(t,e,n){return i(t).diff(i(e),n)},startOf:function(t,e,n){return t=i(t),"isoWeek"===e?t.isoWeekday(n).valueOf():t.startOf(e).valueOf()},endOf:function(t,e){return i(t).endOf(e).valueOf()},_create:function(t){return i(t)}}:{}),ue._set("global",{plugins:{filler:{propagate:!0}}});var Ti={dataset:function(t){var e=t.fill,n=t.chart,i=n.getDatasetMeta(e),a=i&&n.isDatasetVisible(e)&&i.dataset._children||[],o=a.length||0;return o?function(t,e){return e<o&&a[e]._view||null}:null},boundary:function(t){var n=t.boundary,e=n?n.x:null,i=n?n.y:null;return ge.isArray(n)?function(t,e){return n[e]}:function(t){return{x:null===e?t.x:e,y:null===i?t.y:i}}}},Ci={id:"filler",afterDatasetsUpdate:function(t,e){var n,i,a,o,r=(t.data.datasets||[]).length,s=e.propagate,l=[];for(i=0;i<r;++i)o=null,(a=(n=t.getDatasetMeta(i)).dataset)&&a._model&&a instanceof ze.Line&&(o={visible:t.isDatasetVisible(i),fill:jt(a,i,r),chart:t,el:a}),n.$filler=o,l.push(o);for(i=0;i<r;++i)(o=l[i])&&(o.fill=Dt(l,i,s),o.boundary=Et(o),o.mapper=Nt(o))},beforeDatasetsDraw:function(t){var e,n,i,a,o,r,s,l=t._getSortedVisibleDatasetMetas(),d=t.ctx;for(n=l.length-1;0<=n;--n)(e=l[n].$filler)&&e.visible&&(a=(i=e.el)._view,o=i._children||[],r=e.mapper,s=a.backgroundColor||ue.global.defaultColor,r&&s&&o.length&&(ge.canvas.clipArea(d,t.chartArea),Ft(d,o,r,a,s,i._loop),ge.canvas.unclipArea(d)))}},Ai=ge.rtl.getRtlAdapter,Mi=ge.noop,ji=ge.valueOrDefault;ue._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(t,e){var n=e.datasetIndex,i=this.chart,a=i.getDatasetMeta(n);a.hidden=null===a.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(n){var i=n.data.datasets,t=n.options.legend||{},a=t.labels&&t.labels.usePointStyle;return n._getSortedDatasetMetas().map(function(t){var e=t.controller.getStyle(a?0:void 0);return{text:i[t.index].label,fillStyle:e.backgroundColor,hidden:!n.isDatasetVisible(t.index),lineCap:e.borderCapStyle,lineDash:e.borderDash,lineDashOffset:e.borderDashOffset,lineJoin:e.borderJoinStyle,lineWidth:e.borderWidth,strokeStyle:e.borderColor,pointStyle:e.pointStyle,rotation:e.rotation,datasetIndex:t.index}},this)}}},legendCallback:function(t){var e,n,i,a=document.createElement("ul"),o=t.data.datasets;for(a.setAttribute("class",t.id+"-legend"),e=0,n=o.length;e<n;e++)(i=a.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[e].backgroundColor,o[e].label&&i.appendChild(document.createTextNode(o[e].label));return a.outerHTML}});var Ei=ke.extend({initialize:function(t){ge.extend(this,t),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Mi,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:Mi,beforeSetDimensions:Mi,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Mi,beforeBuildLabels:Mi,buildLabels:function(){var e=this,n=e.options.labels||{},t=ge.callback(n.generateLabels,[e.chart],e)||[];n.filter&&(t=t.filter(function(t){return n.filter(t,e.chart.data)})),e.options.reverse&&t.reverse(),e.legendItems=t},afterBuildLabels:Mi,beforeFit:Mi,fit:function(){var t=this,e=t.options,i=e.labels,n=e.display,a=t.ctx,o=ge.options._parseFont(i),r=o.size,s=t.legendHitBoxes=[],l=t.minSize,d=t.isHorizontal();if(d?(l.width=t.maxWidth,l.height=n?10:0):(l.width=n?10:0,l.height=t.maxHeight),n){if(a.font=o.string,d){var c=t.lineWidths=[0],u=0;a.textAlign="left",a.textBaseline="middle",ge.each(t.legendItems,function(t,e){var n=Lt(i,r)+r/2+a.measureText(t.text).width;(0===e||c[c.length-1]+n+2*i.padding>l.width)&&(u+=r+i.padding,c[c.length-(0<e?0:1)]=0),s[e]={left:0,top:0,width:n,height:r},c[c.length-1]+=n+i.padding}),l.height+=u}else{var f=i.padding,h=t.columnWidths=[],p=t.columnHeights=[],m=i.padding,g=0,v=0;ge.each(t.legendItems,function(t,e){var n=Lt(i,r)+r/2+a.measureText(t.text).width;0<e&&v+r+2*f>l.height&&(m+=g+i.padding,h.push(g),p.push(v),v=g=0),g=Math.max(g,n),v+=r+f,s[e]={left:0,top:0,width:n,height:r}}),m+=g,h.push(g),p.push(v),l.width+=m}t.width=l.width,t.height=l.height}else t.width=l.width=t.height=l.height=0},afterFit:Mi,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var p=this,n=p.options,m=n.labels
,t=ue.global,g=t.defaultColor,v=t.elements.line,y=p.height,b=p.columnHeights,x=p.width,w=p.lineWidths;if(n.display){var $,k=Ai(n.rtl,p.left,p.minSize.width),_=p.ctx,e=ji(m.fontColor,t.defaultFontColor),i=ge.options._parseFont(m),S=i.size;_.textAlign=k.textAlign("left"),_.textBaseline="middle",_.lineWidth=.5,_.strokeStyle=e,_.fillStyle=e,_.font=i.string;var T=Lt(m,S),C=p.legendHitBoxes,A=function(t,e){switch(n.align){case"start":return m.padding;case"end":return t-e;default:return(t-e+m.padding)/2}},M=p.isHorizontal();$=M?{x:p.left+A(x,w[0]),y:p.top+m.padding,line:0}:{x:p.left+m.padding,y:p.top+A(y,b[0]),line:0},ge.rtl.overrideTextDirection(p.ctx,n.textDirection);var j=S+m.padding;ge.each(p.legendItems,function(t,e){var n=_.measureText(t.text).width,i=T+S/2+n,a=$.x,o=$.y;k.setWidth(p.minSize.width),M?0<e&&a+i+m.padding>p.left+p.minSize.width&&(o=$.y+=j,$.line++,a=$.x=p.left+A(x,w[$.line])):0<e&&o+j>p.top+p.minSize.height&&(a=$.x=a+p.columnWidths[$.line]+m.padding,$.line++,o=$.y=p.top+A(y,b[$.line]));var r,s,l,d,c,u,f,h=k.x(a);!function(t,e,n){if(!(isNaN(T)||T<=0)){_.save();var i=ji(n.lineWidth,v.borderWidth);if(_.fillStyle=ji(n.fillStyle,g),_.lineCap=ji(n.lineCap,v.borderCapStyle),_.lineDashOffset=ji(n.lineDashOffset,v.borderDashOffset),_.lineJoin=ji(n.lineJoin,v.borderJoinStyle),_.lineWidth=i,_.strokeStyle=ji(n.strokeStyle,g),_.setLineDash&&_.setLineDash(ji(n.lineDash,v.borderDash)),m&&m.usePointStyle){var a=T*Math.SQRT2/2,o=k.xPlus(t,T/2),r=e+S/2;ge.canvas.drawPoint(_,n.pointStyle,a,o,r,n.rotation)}else _.fillRect(k.leftForLtr(t,T),e,T,S),0!==i&&_.strokeRect(k.leftForLtr(t,T),e,T,S);_.restore()}}(h,o,t),C[e].left=k.leftForLtr(h,C[e].width),C[e].top=o,r=h,s=o,l=t,d=n,c=S/2,u=k.xPlus(r,T+c),f=s+c,_.fillText(l.text,u,f),l.hidden&&(_.beginPath(),_.lineWidth=2,_.moveTo(u,f),_.lineTo(k.xPlus(u,d),f),_.stroke()),M?$.x+=i+m.padding:$.y+=j}),ge.rtl.restoreTextDirection(p.ctx,n.textDirection)}},_getLegendItemAt:function(t,e){var n,i,a,o=this;if(t>=o.left&&t<=o.right&&e>=o.top&&e<=o.bottom)for(a=o.legendHitBoxes,n=0;n<a.length;++n)if(t>=(i=a[n]).left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height)return o.legendItems[n];return null},handleEvent:function(t){var e,n=this,i=n.options,a="mouseup"===t.type?"click":t.type;if("mousemove"===a){if(!i.onHover&&!i.onLeave)return}else{if("click"!==a)return;if(!i.onClick)return}e=n._getLegendItemAt(t.x,t.y),"click"===a?e&&i.onClick&&i.onClick.call(n,t["native"],e):(i.onLeave&&e!==n._hoveredItem&&(n._hoveredItem&&i.onLeave.call(n,t["native"],n._hoveredItem),n._hoveredItem=e),i.onHover&&e&&i.onHover.call(n,t["native"],e))}}),Di={id:"legend",_element:Ei,beforeInit:function(t){var e=t.options.legend;e&&It(t,e)},beforeUpdate:function(t){var e=t.options.legend,n=t.legend;e?(ge.mergeIf(e,ue.global.legend),n?(yn.configure(t,n,e),n.options=e):It(t,e)):n&&(yn.removeBox(t,n),delete t.legend)},afterEvent:function(t,e){var n=t.legend;n&&n.handleEvent(e)}},Ni=ge.noop;ue._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Oi=ke.extend({initialize:function(t){ge.extend(this,t),this.legendHitBoxes=[]},beforeUpdate:Ni,update:function(t,e,n){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:Ni,beforeSetDimensions:Ni,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:Ni,beforeBuildLabels:Ni,buildLabels:Ni,afterBuildLabels:Ni,beforeFit:Ni,fit:function(){var t,e=this,n=e.options,i=e.minSize={},a=e.isHorizontal();n.display?(t=(ge.isArray(n.text)?n.text.length:1)*ge.options._parseFont(n).lineHeight+2*n.padding,e.width=i.width=a?e.maxWidth:t,e.height=i.height=a?t:e.maxHeight):e.width=i.width=e.height=i.height=0},afterFit:Ni,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var t=this,e=t.ctx,n=t.options;if(n.display){var i,a,o,r=ge.options._parseFont(n),s=r.lineHeight,l=s/2+n.padding,d=0,c=t.top,u=t.left,f=t.bottom,h=t.right;e.fillStyle=ge.valueOrDefault(n.fontColor,ue.global.defaultFontColor),e.font=r.string,t.isHorizontal()?(a=u+(h-u)/2,o=c+l,i=h-u):(a="left"===n.position?u+l:h-l,o=c+(f-c)/2,i=f-c,d=Math.PI*("left"===n.position?-.5:.5)),e.save(),e.translate(a,o),e.rotate(d),e.textAlign="center",e.textBaseline="middle";var p=n.text;if(ge.isArray(p))for(var m=0,g=0;g<p.length;++g)e.fillText(p[g],0,m,i),m+=s;else e.fillText(p,0,0,i);e.restore()}}}),Pi={},Fi=Ci,Li=Di,Ii={id:"title",_element:Oi,beforeInit:function(t){var e=t.options.title;e&&Rt(t,e)},beforeUpdate:function(t){var e=t.options.title,n=t.titleBlock;e?(ge.mergeIf(e,ue.global.title),n?(yn.configure(t,n,e),n.options=e):Rt(t,e)):n&&(yn.removeBox(t,n),delete t.titleBlock)}};for(var Ri in Pi.filler=Fi,Pi.legend=Li,Pi.title=Ii,Hn.helpers=ge,function(){function c(t,e,n){var i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}function u(t){return null!=t&&"none"!==t}function e(t,e,n){var i=document.defaultView,a=ge._getParentNode(t),o=i.getComputedStyle(t)[e],r=i.getComputedStyle(a)[e],s=u(o),l=u(r),d=Number.POSITIVE_INFINITY;return s||l?Math.min(s?c(o,t,n):d,l?c(r,a,n):d):"none"}ge.where=function(t,e){if(ge.isArray(t)&&Array.prototype.filter)return t.filter(e);var n=[];return ge.each(t,function(t){e(t)&&n.push(t)}),n},ge.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var i=0,a=t.length;i<a;++i)if(e.call(n,t[i],i,t))return i;return-1},ge.findNextWhere=function(t,e,n){ge.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<t.length;i++){var a=t[i];if(e(a))return a}},ge.findPreviousWhere=function(t,e,n){ge.isNullOrUndef(n)&&(n=t.length);for(var i=n-1;0<=i;i--){var a=t[i];if(e(a))return a}},ge.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},ge.almostEquals=function(t,e,n){return Math.abs(t-e)<n},ge.almostWhole=function(t,e){var n=Math.round(t);return n-e<=t&&t<=n+e},ge.max=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.max(t,e)},Number.NEGATIVE_INFINITY)},ge.min=function(t){return t.reduce(function(t,e){return isNaN(e)?t:Math.min(t,e)},Number.POSITIVE_INFINITY)},ge.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:0<t?1:-1},ge.toRadians=function(t){return t*(Math.PI/180)},ge.toDegrees=function(t){return t*(180/Math.PI)},ge._decimalPlaces=function(t){if(ge.isFinite(t)){for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}},ge.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i),o=Math.atan2(i,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},ge.distanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},ge.aliasPixel=function(t){return t%2==0?0:.5},ge._alignPixel=function(t,e,n){var i=t.currentDevicePixelRatio,a=n/2;return Math.round((e-a)*i)/i+a},ge.splineCurve=function(t,e,n,i){var a=t.skip?e:t,o=e,r=n.skip?e:n,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),l=Math.sqrt(Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)),d=s/(s+l),c=l/(s+l),u=i*(d=isNaN(d)?0:d),f=i*(c=isNaN(c)?0:c);return{previous:{x:o.x-u*(r.x-a.x),y:o.y-u*(r.y-a.y)},next:{x:o.x+f*(r.x-a.x),y:o.y+f*(r.y-a.y)}}},ge.EPSILON=Number.EPSILON||1e-14,ge.splineCurveMonotone=function(t){var e,n,i,a,o,r,s,l,d,c=(t||[]).map(function(t){return{model:t._model,deltaK:0,mK:0}}),u=c.length;for(e=0;e<u;++e)if(!(i=c[e]).model.skip){if(n=0<e?c[e-1]:null,(a=e<u-1?c[e+1]:null)&&!a.model.skip){var f=a.model.x-i.model.x;i.deltaK=0!==f?(a.model.y-i.model.y)/f:0}!n||n.model.skip?i.mK=i.deltaK:!a||a.model.skip?i.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(n.deltaK+i.deltaK)/2}for(e=0;e<u-1;++e)i=c[e],a=c[e+1],i.model.skip||a.model.skip||(ge.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=a.mK=0:(o=i.mK/i.deltaK,r=a.mK/i.deltaK,(l=Math.pow(o,2)+Math.pow(r,2))<=9||(s=3/Math.sqrt(l),i.mK=o*s*i.deltaK,a.mK=r*s*i.deltaK)));for(e=0;e<u;++e)(i=c[e]).model.skip||(n=0<e?c[e-1]:null,a=e<u-1?c[e+1]:null,n&&!n.model.skip&&(d=(i.model.x-n.model.x)/3,i.model.controlPointPreviousX=i.model.x-d,i.model.controlPointPreviousY=i.model.y-d*i.mK),a&&!a.model.skip&&(d=(a.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+d,i.model.controlPointNextY=i.model.y+d*i.mK))},ge.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},ge.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},ge.niceNum=function(t,e){var n=Math.floor(ge.log10(t)),i=t/Math.pow(10,n);return(e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},ge.requestAnimFrame="undefined"==typeof window?function(t){t()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},ge.getRelativePosition=function(t,e){var n,i,a=t.originalEvent||t,o=t.target||t.srcElement,r=o.getBoundingClientRect(),s=a.touches;s&&0<s.length?(n=s[0].clientX,i=s[0].clientY):(n=a.clientX,i=a.clientY);var l=parseFloat(ge.getStyle(o,"padding-left")),d=parseFloat(ge.getStyle(o,"padding-top")),c=parseFloat(ge.getStyle(o,"padding-right")),u=parseFloat(ge.getStyle(o,"padding-bottom")),f=r.right-r.left-l-c,h=r.bottom-r.top-d-u;return{x:n=Math.round((n-r.left-l)/f*o.width/e.currentDevicePixelRatio),y:i=Math.round((i-r.top-d)/h*o.height/e.currentDevicePixelRatio)}},ge.getConstraintWidth=function(t){return e(t,"max-width","clientWidth")},ge.getConstraintHeight=function(t){return e(t,"max-height","clientHeight")},ge._calculatePadding=function(t,e,n){return-1<(e=ge.getStyle(t,e)).indexOf("%")?n*parseInt(e,10)/100:parseInt(e,10)},ge._getParentNode=function(t){var e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e},ge.getMaximumWidth=function(t){var e=ge._getParentNode(t);if(!e)return t.clientWidth;var n=e.clientWidth,i=n-ge._calculatePadding(e,"padding-left",n)-ge._calculatePadding(e,"padding-right",n),a=ge.getConstraintWidth(t);return isNaN(a)?i:Math.min(i,a)},ge.getMaximumHeight=function(t){var e=ge._getParentNode(t);if(!e)return t.clientHeight;var n=e.clientHeight,i=n-ge._calculatePadding(e,"padding-top",n)-ge._calculatePadding(e,"padding-bottom",n),a=ge.getConstraintHeight(t);return isNaN(a)?i:Math.min(i,a)},ge.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},ge.retinaScale=function(t,e){var n=t.currentDevicePixelRatio=e||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var i=t.canvas,a=t.height,o=t.width;i.height=a*n,i.width=o*n,t.ctx.scale(n,n),i.style.height||i.style.width||(i.style.height=a+"px",i.style.width=o+"px")}},ge.fontString=function(t,e,n){return e+" "+t+"px "+n},ge.longestText=function(t,e,n,i){var a=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(a=i.data={},o=i.garbageCollect=[],i.font=e),t.font=e;var r,s,l,d,c,u=0,f=n.length;for(r=0;r<f;r++)if(null!=(d=n[r])&&!0!==ge.isArray(d))u=ge.measureText(t,a,o,u,d);else if(ge.isArray(d))for(s=0,l=d.length;s<l;s++)null==(c=d[s])||ge.isArray(c)||(u=ge.measureText(t,a,o,u,c));var h=o.length/2;if(h>n.length){for(r=0;r<h;r++)delete a[o[r]];o.splice(0,h)}return u},ge.measureText=function(t,e,n,i,a){var o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),i<o&&(i=o),i},ge.numberOfLabelLines=function(t){var e=1;return ge.each(t,function(t){ge.isArray(t)&&t.length>e&&(e=t.length)}),e},ge.color=Qt?function(t){return t instanceof CanvasGradient&&(t=ue.global.defaultColor),Qt(t)}:function(t){return console.error("Color.js not found!"),t},ge.getHoverColor=function(t){return t instanceof CanvasPattern||t instanceof CanvasGradient?t:ge.color(t).saturate(.5).darken(.1).rgbString()}}(),Hn._adapters=zn,Hn.Animation=Se,Hn.animationService=Te,Hn.controllers=pn,Hn.DatasetController=je,Hn.defaults=ue,Hn.Element=ke,Hn.elements=ze,Hn.Interaction=mn,Hn.layouts=yn,Hn.platform=Mn,Hn.plugins=jn,Hn.Scale=Xn,Hn.scaleService=En,Hn.Ticks=Bn,Hn.Tooltip=Ln,Hn.helpers.each(_i,function(t,e){Hn.scaleService.registerScaleType(e,t,t._defaults)}),Pi)Pi.hasOwnProperty(Ri)&&Hn.plugins.register(Pi[Ri]);Hn.platform.initialize();var Hi=Hn;return"undefined"!=typeof window&&(window.Chart=Hn),(Hn.Chart=Hn).Legend=Pi.legend._element,Hn.Title=Pi.title._element,Hn.pluginService=Hn.plugins,Hn.PluginBase=Hn.Element.extend({}),Hn.canvasHelpers=Hn.helpers.canvas,Hn.layoutService=Hn.layouts,Hn.LinearScaleBase=ti,Hn.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(n){Hn[n]=function(t,e){return new Hn(t,Hn.helpers.merge(e||{},{type:n.charAt(0).toLowerCase()+n.slice(1)}))}}),Hi});